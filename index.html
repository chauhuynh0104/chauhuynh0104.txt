<!-- 

///////////////////////////////////////////////
/////Code được viết bởi Chauhuynh0104/////////
////http://fb.com/chauhuynh0104//////////////
/////////////079.567.9350///////////////////
///Vui lòng tôn trọng bản quyền tác giả////
/////////Không xoá dòng này //////////////
/////////////////////////////////////////

!-->
<!DOCTYPE html>
<html lang="vi">
<head><meta charset="UTF-8"><title>Thủ Thuật</title></head>
<body>
<script>
  const base64 = "PCEtLSANCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy9Db2RlIMSRxrDhu6NjIHZp4bq/dCBi4bufaSBDaGF1aHV5bmgwMTA0Ly8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vL2h0dHA6Ly9mYi5jb20vY2hhdWh1eW5oMDEwNC8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzA3OS41NjcuOTM1MC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy9WdWkgbMOybmcgdMO0biB0cuG7jW5nIGLhuqNuIHF1eeG7gW4gdMOhYyBnaeG6oy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy8vLy8vLy9LaMO0bmcgeG/DoSBkw7JuZyBuw6B5IC8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KIS0tPg0KPCFET0NUWVBFIGh0bWw+DQoNCjxodG1sIGxhbmc9InZpIj4NCjxoZWFkPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDQwMDs2MDA7NzAwJmFtcDtkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCIvPg0KPGxpbmsgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4wL2Nzcy9hbGwubWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0Ii8+DQo8bWV0YSBjaGFyc2V0PSJ1dGYtOCIvPg0KPG1ldGEgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCIgbmFtZT0idmlld3BvcnQiLz4NCjx0aXRsZT5LaeG7g20gVHJhIFRo4bunIFRodeG6rXQgWSBU4bq/PC90aXRsZT4NCjxzdHlsZT4NCiAgICAgICAgKiB7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgfQ0KICAgICAgICBib2R5IHsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgcGFkZGluZzogMmNtOw0KICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICB9DQogICAgICAgIGgxLCBoMiB7DQogICAgICAgICAgICBjb2xvcjogIzJjM2U1MDsNCiAgICAgICAgfQ0KICAgICAgICAuY29udGFpbmVyIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgZ2FwOiAyMHB4Ow0KICAgICAgICB9DQogICAgICAgIC50YWJsZS1jb250YWluZXIgew0KICAgICAgICAgICAgZmxleDogMTsNCiAgICAgICAgICAgIG92ZXJmbG93OiBhdXRvOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOw0KICAgICAgICB9DQogICAgICAgIC51cGxvYWQtc2VjdGlvbiB7DQogICAgICAgICAgICBib3JkZXI6IDJweCBkYXNoZWQgIzM0OThkYjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICB9DQogICAgICAgIHRhYmxlIHsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgfQ0KICAgICAgICB0aCwgdGQgew0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsNCiAgICAgICAgICAgIG1heC13aWR0aDogMjAwcHg7DQogICAgICAgIH0NCiAgICAgICAgdGggew0KICAgICAgICAgICAgYmFja2dyb3VuZDogI2YyZjJmMjsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBzdGlja3k7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgIH0NCiAgICAgICAgLmNvbmZsaWN0IHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmRkZGQ7DQogICAgICAgIH0NCg0KICAgICAgICAud2FybmluZyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmM2NkOw0KICAgICAgICB9DQogICAgICAgIC5lcnJvciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhkN2RhOw0KICAgICAgICAgICAgY29sb3I6ICM3MjFjMjQ7DQogICAgICAgIH0NCiAgICAgICAgLmJ0biB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQ5OGRiOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgICAgICB9DQogICAgICAgIC5idG46aG92ZXIgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI5ODBiOTsNCiAgICAgICAgfQ0KICAgICAgICAuYnRuOmRpc2FibGVkIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2NjY2M7DQogICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkOw0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1wYWdlIC5wcm9jZWR1cmUtaW5mbyB7DQogICAgICAgIA0KICAgICAgICAgICAgcGFkZGluZzogNDVweDsNCiAgICAgICAgICAgIG1hcmdpbjogMHB4IGF1dG87DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjOTk5OTk5Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjIpOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogICAgICAgIH0NCiAgICAgICAgLnByb2NlZHVyZS1pbmZvIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7DQogICAgICAgICAgICBwYWRkaW5nOiAxNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICB3aWR0aDogYXV0bzsNCiAgICAgICAgICAgIG1heC13aWR0aDogbm9uZTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7DQogICAgICAgIH0NCiAgICAgICAgI2Vycm9yTG9nIHsNCiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgICAgIH0NCiAgICAgICAgLmVycm9yLWl0ZW0gew0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7DQogICAgICAgIH0NCiAgICAgICAgLmVycm9yLWl0ZW06bGFzdC1jaGlsZCB7DQogICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lOw0KICAgICAgICB9DQogICAgICAgIC5maWxlLXJlcXVpcmVtZW50cyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTdmNGZmOw0KICAgICAgICAgICAgcGFkZGluZzogMTVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOw0KICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgfQ0KDQogICAgICAgIC5maWxlLXJlcXVpcmVtZW50cy5oaWRkZW4gew0KICAgICAgICAgICAgb3BhY2l0eTogMDsNCiAgICAgICAgICAgIGhlaWdodDogMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgIH0NCiAgICAgICAgLmNvbmZsaWN0LXJvdyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmN2ZhOw0KICAgICAgICB9DQogICAgICAgIC5jb25mbGljdC1kZXRhaWwgew0KICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbCAhaW1wb3J0YW50Ow0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsNCiAgICAgICAgfQ0KICAgICAgICAuY29uZmxpY3QtZGV0YWlsIGJyIHsNCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1zZWN0aW9uIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICBwYWRkaW5nOiAzMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87DQogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICBtYXgtd2lkdGg6IDQyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzk5OTk5OTsNCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwOw0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1pbnB1dCB7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDIwMHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1lcnJvciB7DQogICAgICAgICAgICBjb2xvcjogI2Q5NTM0ZjsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICB9DQogICAgICAgIC5tYWluLWNvbnRlbnQgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgfQ0KICAgICAgICAubG9naW4tdGl0bGUgew0KICAgICAgICAgICAgY29sb3I6ICMyYzNlNTA7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICB9DQogICAgICAgIC5sb2dvdXQtYnRuIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogMjBweDsNCiAgICAgICAgICAgIHJpZ2h0OiAyMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U3NGMzYzsNCiAgICAgICAgfQ0KICAgICAgICAubG9nb3V0LWJ0bjpob3ZlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzAzOTJiOw0KICAgICAgICB9DQogICAgICAgIC5vcHRpb24tc2VjdGlvbiB7DQogICAgICAgICAgICBtYXJnaW46IDE1cHggMDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgICAgICB9DQogICAgICAgICNvcGVyYXRvckZpbHRlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICAgIH0NCiAgICAgICAgI29wZXJhdG9yRmlsdGVyIGxhYmVsIHsNCiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTBweDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQogICAgICAgICNvcGVyYXRvclNlbGVjdCB7DQogICAgICAgICAgICBwYWRkaW5nOiA4cHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDI1MHB4Ow0KICAgICAgICB9DQogICAgICAgIC50aW1lLXN1Z2dlc3Rpb24gew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U4ZjVlOTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsNCiAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDsNCiAgICAgICAgfQ0KICAgICAgICAubm8tc3VnZ2VzdGlvbiB7DQogICAgICAgICAgICBjb2xvcjogI2QzMmYyZjsNCiAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICAgICAgfQ0KICAgICAgICAudGltZS1vcHRpb25zIHsNCiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwOw0KICAgICAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgIH0NCiAgICAgICAgLnRpbWUtb3B0aW9ucyBsYWJlbCB7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIH0NCiAgICAgICAgLmdyb3VwLXNlcGFyYXRvciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGOw0KICAgICAgICAgICAgaGVpZ2h0OiA1cHg7DQogICAgICAgIH0NCgkJLyogUGjhuqduIGNo4buvIGPDsyBjaMO6IHRow61jaCAqLw0KICAgICAgICAuY2h1LXRoaWNoIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjMDAwMDAwOw0KICAgIA0KICAgICAgICB9IA0KICAgICAgICAvKiBLaHVuZyBjaMO6IHRow61jaCDhuqluICovDQogICAgICAgIC5jaHUtdGhpY2ggLm5vaS1kdW5nIHsNCiAgICAgICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjsNCiAgICAgICAgICAgIHdpZHRoOiAyMDBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmY2M7DQogICAgICAgICAgICBjb2xvcjogIzMzMzsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICB6LWluZGV4OiAxOw0KICAgICAgICAgICAgYm90dG9tOiAxMjUlOw0KICAgICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KICAgICAgICAgICAgb3BhY2l0eTogMDsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zczsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZmNjMDA7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjIpOw0KICAgICAgICB9DQogICAgICAgIC8qIEhp4buDbiB0aOG7iyBjaMO6IHRow61jaCBraGkgZGkgY2h14buZdCB2w6BvICovDQogICAgICAgIC5jaHUtdGhpY2g6aG92ZXIgLm5vaS1kdW5nIHsNCiAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7DQogICAgICAgICAgICBvcGFjaXR5OiAxOw0KICAgICAgICB9DQogICAgICAgIC8qIE3FqWkgdMOqbiBuaOG7jyBwaMOtYSBkxrDhu5tpIGNow7ogdGjDrWNoICovDQogICAgICAgIC5jaHUtdGhpY2ggLm5vaS1kdW5nOjphZnRlciB7DQogICAgICAgICAgICBjb250ZW50OiAiIjsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogMTAwJTsNCiAgICAgICAgICAgIGxlZnQ6IDUwJTsNCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtNXB4Ow0KICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiA1cHg7DQogICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkOw0KICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjZmZmZmNjIHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50Ow0KICAgICAgICB9DQoJCSAgICAvKiBUaMOqbSBDU1MgbeG7m2kgY2hvIGLhuqNuZyBs4buXaSAyIGPhu5l0ICovDQogIC5lcnJvci10YWJsZSB7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICAgICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7DQogICAgfQ0KICAgIC5lcnJvci10YWJsZSB0aCwgLmVycm9yLXRhYmxlIHRkIHsNCiAgICAgICAgcGFkZGluZzogMTBweDsNCiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsNCiAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsNCiAgICB9DQogICAgLmVycm9yLXRhYmxlIHRoIHsNCiAgICAgICAgYmFja2dyb3VuZDogI2YyZjJmMjsNCiAgICAgICAgcG9zaXRpb246IHN0aWNreTsNCiAgICAgICAgdG9wOiAwOw0KICAgIH0NCiAgICAuZXJyb3ItdGFibGUgLmVycm9yLXJvdyB7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGY3ZmE7DQogICAgfQ0KICAgIC5lcnJvci10YWJsZSAuZXJyb3ItZGV0YWlsIHsNCiAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbCAhaW1wb3J0YW50Ow0KICAgICAgICBsaW5lLWhlaWdodDogMS41Ow0KICAgICAgICBwYWRkaW5nOiA4cHg7DQogICAgfQ0KICAgICNvcGVyYXRvckZpbHRlckVycm9yIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOw0KICAgIHBhZGRpbmc6IDEwcHg7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIG1hcmdpbi10b3A6IDEwcHg7DQp9DQojb3BlcmF0b3JGaWx0ZXJFcnJvciBsYWJlbCB7DQogICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KDQojb3BlcmF0b3JGaWx0ZXJFcnJvciBzZWxlY3Qgew0KICAgIHBhZGRpbmc6IDhweDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOw0KICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICB3aWR0aDogMjUwcHg7DQp9DQovKiA9PT09PT09PT09PT09PT09PT09IFRSQU5HIFRSw40gTsOCTkcgQ+G6pFAgPT09PT09PT09PT09PT09PT09PSAqLw0KDQovKiBOw7p0IGLhuqVtIGNodW5nICovDQouYnRuIHsNCiAgYm9yZGVyLXJhZGl1czogNnB4ICFpbXBvcnRhbnQ7DQogIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UtaW4tb3V0ICFpbXBvcnRhbnQ7DQp9DQouYnRuOmhvdmVyIHsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOw0KICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwwLDAsMC4yKTsNCn0NCi8qIELhuqNuZyBk4buvIGxp4buHdSAqLw0KdGFibGUsIC5lcnJvci10YWJsZSB7DQogIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xKTsNCn0NCnRoIHsNCiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMzQ5OGRiLCAjMjk4MGI5KSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZiAhaW1wb3J0YW50Ow0KICBmb250LXdlaWdodDogYm9sZDsNCn0NCnRkIHsNCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzIGVhc2UtaW4tb3V0Ow0KfQ0KdHI6aG92ZXIgdGQgew0KICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMDMpOw0KfQ0KDQovKiBMaWdodCBNb2RlOiBM4buNYyBuZ8aw4budaSB0aOG7sWMgaGnhu4duICovDQojb3BlcmF0b3JGaWx0ZXIsICNvcGVyYXRvckZpbHRlckVycm9yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsNCiAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICBwYWRkaW5nOiAxMHB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjEpOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dDsNCn0NCiNvcGVyYXRvckZpbHRlcjpob3ZlciwgI29wZXJhdG9yRmlsdGVyRXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMzNDk4ZGI7DQogIGJveC1zaGFkb3c6IDAgMCA4cHggcmdiYSg1MiwxNTIsMjE5LDAuNSk7DQp9DQojb3BlcmF0b3JTZWxlY3QsICNvcGVyYXRvclNlbGVjdEVycm9yIHsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dDsNCn0NCiNvcGVyYXRvclNlbGVjdDpob3ZlciwgI29wZXJhdG9yU2VsZWN0RXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMzNDk4ZGI7DQogIGJveC1zaGFkb3c6IDAgMCA2cHggcmdiYSg1MiwxNTIsMjE5LDAuNCk7DQp9DQovKiBEYXJrIE1vZGUgbsOibmcgY+G6pXAgKi8NCmJvZHkuZGFyay1tb2RlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzEyMTIxMiAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yRmlsdGVyLA0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yRmlsdGVyRXJyb3Igew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmMyYzJjICFpbXBvcnRhbnQ7DQogIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7DQogIGJvcmRlcjogMXB4IHNvbGlkICM1NTUgIWltcG9ydGFudDsNCiAgYm9yZGVyLXJhZGl1czogOHB4ICFpbXBvcnRhbnQ7DQogIHBhZGRpbmc6IDEycHggIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuNCkgIWltcG9ydGFudDsNCiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZS1pbi1vdXQgIWltcG9ydGFudDsNCn0NCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvckZpbHRlcjpob3ZlciwNCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvckZpbHRlckVycm9yOmhvdmVyIHsNCiAgYm9yZGVyLWNvbG9yOiAjMDBiY2Q0ICFpbXBvcnRhbnQ7DQogIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMTg4LCAyMTIsIDAuNikgIWltcG9ydGFudDsNCn0NCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvclNlbGVjdCwNCmJvZHkuZGFyay1tb2RlICNvcGVyYXRvclNlbGVjdEVycm9yIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjNTU1ICFpbXBvcnRhbnQ7DQogIGJvcmRlci1yYWRpdXM6IDVweCAhaW1wb3J0YW50Ow0KICBwYWRkaW5nOiA4cHggMTBweCAhaW1wb3J0YW50Ow0KICBmb250LXdlaWdodDogYm9sZCAhaW1wb3J0YW50Ow0KICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dCAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yU2VsZWN0OmhvdmVyLA0KYm9keS5kYXJrLW1vZGUgI29wZXJhdG9yU2VsZWN0RXJyb3I6aG92ZXIgew0KICBib3JkZXItY29sb3I6ICMwMGJjZDQgIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDAsIDE4OCwgMjEyLCAwLjUpICFpbXBvcnRhbnQ7DQp9DQpib2R5LmRhcmstbW9kZSAubGlzdDEgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7DQogICAgYm9yZGVyLWNvbG9yOiAjMzQ0OTVlOw0KICAgIGNvbG9yOiAjZWNmMGYxOw0KfQ0KLmRvY3Rvci1jb2x1bW4gew0KICAgIGRpc3BsYXk6IG5vbmU7IC8qIE3hurdjIMSR4buLbmgg4bqpbiAqLw0KfQ0KDQouc2hvdy1kb2N0b3IgLmRvY3Rvci1jb2x1bW4gew0KICAgIGRpc3BsYXk6IHRhYmxlLWNlbGw7IC8qIEhp4buDbiB0aOG7iyBraGkgY8OzIGNsYXNzIHNob3ctZG9jdG9yICovDQp9DQogICAgaHRtbCB7DQogICAgICAgIHNjcm9sbC1iZWhhdmlvcjogc21vb3RoOw0KICAgIH0NCiAgICAvKiBIaeG7h3Ug4bupbmcgaGlnaGxpZ2h0IGtoaSBjdeG7mW4gdOG7m2kgKi8NCiAgICAuaGlnaGxpZ2h0LWVycm9yLXNlY3Rpb24gew0KICAgICAgICBhbmltYXRpb246IGhpZ2hsaWdodC1mYWRlIDJzIGVhc2Utb3V0Ow0KICAgIH0NCiAgICBAa2V5ZnJhbWVzIGhpZ2hsaWdodC1mYWRlIHsNCiAgICAgICAgMCUgew0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgNHB4IHJnYmEoNTIsIDE1MiwgMjE5LCAwLjcpOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg1MiwgMTUyLCAyMTksIDAuMSk7DQogICAgICAgIH0NCiAgICAgICAgMTAwJSB7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMCA0cHggcmdiYSg1MiwgMTUyLCAyMTksIDApOw0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg1MiwgMTUyLCAyMTksIDApOw0KICAgICAgICB9DQogICAgfQ0KCS8qIEPEg24gY2jhu4luaCBpY29uIHbDoCB0ZXh0IHRyb25nIHRpw6p1IMSR4buBICovDQp0aCBpIHsNCiAgICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgICBjb2xvcjogd2hpdGU7IC8qIE3DoHUgaWNvbiAqLw0KICAgIHdpZHRoOiAxNnB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi8qIERhcmsgbW9kZSAqLw0KYm9keS5kYXJrLW1vZGUgdGggaSB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQp9DQovKiBIaeG7h3Ug4bupbmcga2hpIGhvdmVyICovDQp0aDpob3ZlciBpIHsNCiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7DQogICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZTsNCn0NCiAgLyogVGjDqm0gdsOgbyBwaOG6p24gc3R5bGUgKi8NCiAgICAuZmEtc3Bpbi1jb250aW51b3VzIHsNCiAgICAgICAgYW5pbWF0aW9uOiBmYS1zcGluIDJzIGluZmluaXRlIGxpbmVhcjsNCiAgICB9DQogICAgQGtleWZyYW1lcyBmYS1zcGluIHsNCiAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfQ0KICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfQ0KICAgIH0NCgkudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7DQogICAgY29sb3I6ICMyYzNlNTA7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCn0NCg0KLmRhcmstbW9kZSAudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQp9DQoudGltZS1zdWdnZXN0aW9uIHsNCiAgICBsaW5lLWhlaWdodDogMS42Ow0KfQ0KLyogPT09PT09PSBUT0FTVCAmIERBU0hCT0FSRCA9PT09PT09ICovDQoudG9hc3Qgew0KICB2aXNpYmlsaXR5OiBoaWRkZW47DQogIG1pbi13aWR0aDogMjUwcHg7DQogIG1hcmdpbi1sZWZ0OiAtMTI1cHg7DQogIGJhY2tncm91bmQtY29sb3I6ICMzMzM7DQogIGNvbG9yOiAjZmZmOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgcGFkZGluZzogMTRweDsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB6LWluZGV4OiA5OTk5Ow0KICBsZWZ0OiA1MCU7DQogIGJvdHRvbTogMzBweDsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBvcGFjaXR5OiAwOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXMsIGJvdHRvbSAwLjVzOw0KfQ0KLnRvYXN0LnNob3cgew0KICB2aXNpYmlsaXR5OiB2aXNpYmxlOw0KICBvcGFjaXR5OiAxOw0KICBib3R0b206IDUwcHg7DQp9DQouZGFzaGJvYXJkIHsNCiAgZGlzcGxheTogZmxleDsNCiAgZ2FwOiAxMHB4Ow0KICBtYXJnaW46IDEwcHggMDsNCn0NCi5kYXNoYm9hcmQgLmNhcmQgew0KICBmbGV4OiAxOw0KICBiYWNrZ3JvdW5kOiAjZjhmOWZhOw0KICBib3JkZXItcmFkaXVzOiA2cHg7DQogIHBhZGRpbmc6IDEwcHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4xKTsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQp9DQoNCiAgYm9keS5kYXJrLW1vZGUgI3BhdGllbnRDb3VudGVyIHsNCiAgICBjb2xvcjogIzAwYmNkNDsNCiAgfQ0KI2hlcmJPdXRsaWVyTW9kYWxbc3R5bGUqPSJkaXNwbGF5Il0gKyBiciwNCiNoZXJiT3V0bGllck1vZGFsW3N0eWxlKj0iZGlzcGxheSJdICsgYnIgKyBiciB7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5oZXJiLW91dGxpZXIgdGQgew0KICAgIGJhY2tncm91bmQtY29sb3I6I2ZmZGRkZCAhaW1wb3J0YW50Ow0KICAgIGNvbG9yOiNiNzFjMWMgIWltcG9ydGFudDsNCiAgICBmb250LXdlaWdodDo2MDA7DQogIH0NCiAgDQogDQovKiBEYXJrIG1vZGUgY2hvIGtodSB24buxYyBtYWluYmxvayAodXBsb2FkICsgdMO5eSBjaOG7jW4pICovDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgew0KICBiYWNrZ3JvdW5kOiAjMWUxZTFlICFpbXBvcnRhbnQ7DQogIGJvcmRlcjogMnB4IHNvbGlkICM1NTUgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDE4OCwyMTIsMC4yNSk7IC8qIG5o4bq5LCDEkeG7k25nIGLhu5kgdGhlbWUgKi8NCiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzIGVhc2UsIGJvcmRlci1jb2xvciAwLjJzIGVhc2U7DQp9DQoNCi8qIEPDoWMgY29udHJvbCBiw6puIHRyb25nIG1haW5ibG9rICovDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgaW5wdXQsDQpib2R5LmRhcmstbW9kZSAubWFpbmJsb2sgc2VsZWN0LA0KYm9keS5kYXJrLW1vZGUgLm1haW5ibG9rIGJ1dHRvbiB7DQogIGJhY2tncm91bmQ6ICMyYzJjMmMgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm9yZGVyOiAxcHggc29saWQgIzY2NiAhaW1wb3J0YW50Ow0KfQ0KDQovKiBEYXJrIG1vZGU6IHRvb2x0aXAg4bufIG3hu41pIG7GoWkgKHRpw6p1IMSR4buBICYgbuG7mWkgZHVuZykgKi8NCmJvZHkuZGFyay1tb2RlIC5jaHUtdGhpY2ggLm5vaS1kdW5nIHsNCiAgYmFja2dyb3VuZDogIzJjM2U1MCAhaW1wb3J0YW50OyAgLyogxJHhu5VpIHNhbmcgbuG7gW4gdOG7kWkgZOG7hSDEkeG7jWM7IG114buRbiBnaeG7ryBu4buBbiB2w6BuZyB0aMOsIHjDs2EgZMOybmcgbsOgeSAqLw0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50OyAgICAgICAgLyogbuG6v3UgZ2nhu68gbuG7gW4gdsOgbmcsIMSR4buVaSB0aMOgbmggIzAwMCAhaW1wb3J0YW50ICovDQogIGJvcmRlcjogMXB4IHNvbGlkICMwMGJjZDQgIWltcG9ydGFudDsNCn0NCg0KIDwvc3R5bGU+DQo8c2NyaXB0Pg0KICAgIGFzeW5jIGZ1bmN0aW9uIGNoZWNrQWNjZXNzKCkgew0KICAgICAgICBjb25zdCBqc29uVXJsID0gJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jaGF1aHV5bmgwMTA0L2NoYXVodXluaDAxMDQudHh0L3JlZnMvaGVhZHMvbWFpbi9kcmNoYXUuanNvbic7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChqc29uVXJsICsgJz92PScgKyBEYXRlLm5vdygpKTsNCiAgICAgICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ0tow7RuZyB0aOG7gyB04bqjaSBmaWxlIEpTT04nKTsNCiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHJlcy5qc29uKCk7DQoNCiAgICAgICAgICAgIGlmICghY29uZmlnLkFDQ0VTU19BTExPV0VEKSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0icGFkZGluZzo1MHB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOnJlZDtmb250LXNpemU6MjBweCI+DQogICAgICAgICAgICAgICAgICAgIDxoMj5C4bqiTyBUUsOMIEjhu4YgVEjhu5BORzwvaDI+DQogICAgICAgICAgICAgICAgICAgIDxwPiR7Y29uZmlnLk1FU1NBR0V9PC9wPg0KICAgICAgICAgICAgICAgICAgICAke2NvbmZpZy5SRURJUkVDVF9VUkwgPyBgPHA+U+G6vSBjaHV54buDbiBoxrDhu5tuZyBzYXUgPHNwYW4gaWQ9J2NvdW50ZG93bic+NTwvc3Bhbj4gZ2nDonkuLi48L3A+YCA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvZGl2PmA7DQogICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5SRURJUkVDVF9VUkwpIHsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHNlY29uZHMgPSA1Ow0KICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHMtLTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3VudGRvd24nKS5pbm5lclRleHQgPSBzZWNvbmRzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlY29uZHMgPD0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29uZmlnLlJFRElSRUNUX1VSTDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gYDxkaXYgc3R5bGU9J3BhZGRpbmc6NTBweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjpyZWQnPg0KICAgICAgICAgICAgICAgIDxoMj5LSMOUTkcgVOG6okkgxJDGr+G7okMgQ+G6pFUgSMOMTkg8L2gyPjxwPkzhu5dpIHRydXkgY+G6rXAga2hpIGvhur90IG7hu5FpIG3huqFuZy48YnIvPiBWdWkgbMOybmcga2nhu4NtIHRyYSBs4bqhaSDEkcaw4budbmcgdHJ1eeG7gW4gaW50ZXJuZXQuPC9wPg0KICAgICAgICAgICAgPC9kaXY+YDsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRBY2NvdW50c0Zyb21UWFQoKSB7DQogICAgICAgIGNvbnN0IHR4dFVybCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY2hhdWh1eW5oMDEwNC9jaGF1aHV5bmgwMTA0LnR4dC9yZWZzL2hlYWRzL21haW4vdGtrLnR4dCc7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHR4dFVybCArICc/dj0nICsgRGF0ZS5ub3coKSk7DQogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICBjb25zdCBhY2NvdW50cyA9IHt9Ow0KICAgICAgICB0ZXh0LnNwbGl0KCdcbicpLmZvckVhY2gobGluZSA9PiB7DQogICAgICAgICAgICBjb25zdCBbdSwgcF0gPSBsaW5lLnRyaW0oKS5zcGxpdCgnOicpOw0KICAgICAgICAgICAgaWYgKHUgJiYgcCkgYWNjb3VudHNbdV0gPSBwOw0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJuIGFjY291bnRzOw0KICAgIH0NCg0KICAgIGFzeW5jIGZ1bmN0aW9uIGVuYWJsZUxvZ2luKGFjY291bnRzKSB7DQogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkJ0bicpOw0KICAgICAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWVJbnB1dCcpOw0KICAgICAgICBjb25zdCBwYXNzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpOw0KICAgICAgICBjb25zdCBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkVycm9yJyk7DQoNCiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgY29uc3QgdXNlciA9IHVzZXJJbnB1dC52YWx1ZS50cmltKCk7DQogICAgICAgICAgICBjb25zdCBwYXNzID0gcGFzc0lucHV0LnZhbHVlLnRyaW0oKTsNCiAgICAgICAgICAgIGlmIChhY2NvdW50c1t1c2VyXSAmJiBhY2NvdW50c1t1c2VyXSA9PT0gcGFzcykgew0KICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ21lZFVzZXInLCB1c2VyKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xvZ2luLXBhZ2UnKTsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5TZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgew0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nob3dNb3JlU3VnZ2VzdGlvbnNDaGVja2JveCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgew0KICAgIGlmIChhbGxQcm9jZWR1cmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgZ2VuZXJhdGVUaW1lU3VnZ2VzdGlvbnMoYWxsUHJvY2VkdXJlcyk7DQogICAgICAgIGZpbHRlckJ5T3BlcmF0b3IoKTsNCiAgICB9DQp9KTsNCn0pOw0KDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhc3luYyAoKSA9PiB7DQogICAgICAgIGNvbnN0IGFsbG93ID0gYXdhaXQgY2hlY2tBY2Nlc3MoKTsNCiAgICAgICAgaWYgKCFhbGxvdykgcmV0dXJuOw0KICAgICAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGxvYWRBY2NvdW50c0Zyb21UWFQoKTsNCgkJIGF3YWl0IFByb21pc2UuYWxsKFsNCiAgICBsb2FkUHJvY2VkdXJlcygpLA0KICAgIGxvYWRDb25mbGljdFJ1bGVzKCkNCl0pOw0KICAgICAgICBjb25zdCBzYXZlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ21lZFVzZXInKTsNCiAgICAgICAgaWYgKHNhdmVkICYmIGFjY291bnRzW3NhdmVkXSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRlbnQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpblNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgIGVuYWJsZUxvZ2luKGFjY291bnRzKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KPC9zY3JpcHQ+DQo8c3R5bGU+DQogIGJvZHkuZGFyay1tb2RlICNsb2FkaW5nUG9wdXAgew0KICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTsNCiAgfQ0KICBib2R5LmRhcmstbW9kZSAjbG9hZGluZ1BvcHVwIGRpdiB7DQogICAgYmFja2dyb3VuZDogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICAgIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7DQogICAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLCAxODgsIDIxMiwgMC4zKTsNCiAgfQ0KDQogIGJvZHkuZGFyay1tb2RlICNwYXRpZW50Q291bnRlciB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQogIH0NCjwvc3R5bGU+DQo8c3R5bGU+DQogIC8qIEhp4buHdSDhu6luZyBtxrDhu6N0ICovDQogICNsb2FkaW5nUG9wdXAgew0KICAgIG9wYWNpdHk6IDA7DQogICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzIGVhc2U7DQogIH0NCiAgI2xvYWRpbmdQb3B1cC5zaG93IHsNCiAgICBvcGFjaXR5OiAxOw0KICB9DQogIC8qIFByb2dyZXNzIGJhciAqLw0KICAjcHJvZ3Jlc3NCYXJDb250YWluZXIgew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJhY2tncm91bmQ6ICNkZGQ7DQogICAgaGVpZ2h0OiA2cHg7DQogICAgbWFyZ2luLXRvcDogMjBweDsNCiAgICBib3JkZXItcmFkaXVzOiAzcHg7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgfQ0KICAjcHJvZ3Jlc3NCYXIgew0KICAgIHdpZHRoOiAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgYmFja2dyb3VuZDogIzM0OThkYjsNCiAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGVhc2U7DQogIH0NCiAgYm9keS5kYXJrLW1vZGUgI3Byb2dyZXNzQmFyQ29udGFpbmVyIHsNCiAgICBiYWNrZ3JvdW5kOiAjNTU1Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICNwcm9ncmVzc0JhciB7DQogICAgYmFja2dyb3VuZDogIzAwYmNkNDsNCiAgfQ0KDQogIGJvZHkuZGFyay1tb2RlICNwYXRpZW50Q291bnRlciB7DQogICAgY29sb3I6ICMwMGJjZDQ7DQogIH0NCjwvc3R5bGU+DQo8c3R5bGU+DQouc2Nyb2xsaW5nLXRleHQgew0KICBvdmVyZmxvdzogaGlkZGVuOw0KICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi5zY3JvbGxpbmctdGV4dCBzcGFuIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBwYWRkaW5nLWxlZnQ6IDAlOyAvKiByZW1vdmUgaW5pdGlhbCBibGFuayBzcGFjZSAqLw0KICBhbmltYXRpb246IHNjcm9sbC1sZWZ0IDhzIGxpbmVhciBpbmZpbml0ZTsgLyogZmFzdGVyIHNjcm9sbCAqLw0KfQ0KDQpAa2V5ZnJhbWVzIHNjcm9sbC1sZWZ0IHsNCiAgMCUgew0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsNCiAgfQ0KICAxMDAlIHsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpOw0KICB9DQp9DQo8L3N0eWxlPg0KDQo8IS0tIFRIRU1FIEFDQ0VOVCBWQVJTIChBVVRPLUlOSkVDVEVEKSAtLT4NCjxzdHlsZSBpZD0idGhlbWUtYWNjZW50LXZhcnMiPg0KICA6cm9vdCB7DQogICAgLS1hY2NlbnQ6ICMzNDk4ZGI7DQogICAgLS1hY2NlbnQtaG92ZXI6ICMyOTgwYjk7DQogICAgLS1hY2NlbnQtYm9yZGVyOiAjMzQ5OGRiOw0KICB9DQogIGJvZHkudGhlbWUtZGVmYXVsdCB7IC0tYWNjZW50OiMzNDk4ZGI7IC0tYWNjZW50LWhvdmVyOiMyOTgwYjk7IC0tYWNjZW50LWJvcmRlcjojMzQ5OGRiOyB9DQogIGJvZHkudGhlbWUtb3JhbmdlICB7IC0tYWNjZW50OiNGRjY2MDA7IC0tYWNjZW50LWhvdmVyOiNlNjVjMDA7IC0tYWNjZW50LWJvcmRlcjojRkY2NjAwOyB9DQogIGJvZHkudGhlbWUtcmVkICAgICB7IC0tYWNjZW50OiNGRjAwMDA7IC0tYWNjZW50LWhvdmVyOiNjYzAwMDA7IC0tYWNjZW50LWJvcmRlcjojRkYwMDAwOyB9DQogIGJvZHkudGhlbWUtZ3JlZW4gICB7IC0tYWNjZW50OiMwMEFBMDA7IC0tYWNjZW50LWhvdmVyOiMwMDg4MDA7IC0tYWNjZW50LWJvcmRlcjojMDBBQTAwOyB9DQoNCiAgLyogw4FwIGThu6VuZyBiaeG6v24gbMOqbiBjw6FjIHRow6BuaCBwaOG6p24gY2jDrW5oICovDQogIC5idG4geyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQpICFpbXBvcnRhbnQ7IGNvbG9yOiNmZmYgIWltcG9ydGFudDsgfQ0KICAuYnRuOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYWNjZW50LWhvdmVyKSAhaW1wb3J0YW50OyB9DQogIC51cGxvYWQtc2VjdGlvbiB7IGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50LWJvcmRlcikgIWltcG9ydGFudDsgfQ0KICAjc2NhblN0YXR1cyB7IGNvbG9yOiB2YXIoLS1hY2NlbnQtYm9yZGVyKSAhaW1wb3J0YW50OyB9DQogIHRoIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLHZhcigtLWFjY2VudCksdmFyKC0tYWNjZW50LWhvdmVyKSkgIWltcG9ydGFudDsgfQ0KICAjb3BlcmF0b3JGaWx0ZXI6aG92ZXIsICNvcGVyYXRvckZpbHRlckVycm9yOmhvdmVyIHsNCiAgICBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudC1ib3JkZXIpICFpbXBvcnRhbnQ7DQogICAgYm94LXNoYWRvdzogMCAwIDhweCByZ2JhKDAsMCwwLDAuMTUpLDAgMCA4cHggdmFyKC0tYWNjZW50LWJvcmRlcikgIWltcG9ydGFudDsNCiAgfQ0KICAuaGlnaGxpZ2h0LWVycm9yLXNlY3Rpb24gew0KICAgIGJveC1zaGFkb3c6IDAgMCAwIDRweCB2YXIoLS1hY2NlbnQtYm9yZGVyKSAhaW1wb3J0YW50Ow0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC4wMikgIWltcG9ydGFudDsNCiAgfQ0KICAudGltZS1zdWdnZXN0aW9uIHN0cm9uZyB7IGNvbG9yOiB2YXIoLS1hY2NlbnQtaG92ZXIpICFpbXBvcnRhbnQ7IH0NCjwvc3R5bGU+DQoNCjwvaGVhZD4NCjxib2R5Pg0KPCEtLSBUSEVNRSBQSUNLRVIgLS0+DQo8ZGl2IGlkPSJ0aGVtZVBpY2tlciIgY2xhc3M9InRoZW1lLXBpY2tlciIgdGl0bGU9IkNo4buNbiBtw6B1IGNo4bunIMSR4buBIGdpYW8gZGnhu4duIj4NCiANCiANCiAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ0aGVtZS1zd2F0Y2giIGRhdGEtdGhlbWU9ImRlZmF1bHQiIHN0eWxlPSItLXN3YXRjaDojMzQ5OGRiIiBhcmlhLWxhYmVsPSJN4bq3YyDEkeG7i25oIChYYW5oIGTGsMahbmcpIj48L2J1dHRvbj4NCiAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ0aGVtZS1zd2F0Y2giIGRhdGEtdGhlbWU9Im9yYW5nZSIgIHN0eWxlPSItLXN3YXRjaDojRkY2NjAwIiBhcmlhLWxhYmVsPSJNw6B1IGNhbSI+PC9idXR0b24+DQogIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idGhlbWUtc3dhdGNoIiBkYXRhLXRoZW1lPSJyZWQiICAgICBzdHlsZT0iLS1zd2F0Y2g6I0ZGMDAwMCIgYXJpYS1sYWJlbD0iTcOgdSDEkeG7jyI+PC9idXR0b24+DQogIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idGhlbWUtc3dhdGNoIiBkYXRhLXRoZW1lPSJncmVlbiIgICBzdHlsZT0iLS1zd2F0Y2g6IzAwQUEwMCIgYXJpYS1sYWJlbD0iTcOgdSB4YW5oIGzDoSI+PC9idXR0b24+DQogICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9ImRhcmtUb2dnbGUiIGNsYXNzPSJ0aGVtZS1kYXJrLXRvZ2dsZSIgb25jbGljaz0idG9nZ2xlRGFya01vZGUoKSIgYXJpYS1sYWJlbD0iQuG6rXQvVOG6r3QgY2jhur8gxJHhu5kgdOG7kWkiPg0KICAgIDxzcGFuIGlkPSJkYXJrSWNvbiI+PHNtYWxsPvCfjJk8L3NtYWxsPjwvc3Bhbj4gPHNwYW4gaWQ9ImRhcmtUZXh0Ij5U4buRaTwvc3Bhbj4NCiAgPC9idXR0b24+DQogIA0KPC9kaXY+DQoNCjxzdHlsZT4NCiAgI3RoZW1lUGlja2VyLnRoZW1lLXBpY2tlciB7DQogICAgcG9zaXRpb246YWJzb2x1dGU7DQogICAgdG9wOjIwcHg7IGxlZnQ6MTBweDsNCiAgICB6LWluZGV4OjEwMDAwOw0KICAgIGRpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7Zm9udC1zaXplOjE0cHg7Zm9udC1mYW1pbHk6SW50ZXIsc2Fucy1zZXJpZjsNCiAgICBwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC44NSk7Ym9yZGVyOjFweCBzb2xpZCAjY2NjO2JvcmRlci1yYWRpdXM6NnB4Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICN0aGVtZVBpY2tlci50aGVtZS1waWNrZXIgew0KICAgIGJhY2tncm91bmQ6cmdiYSgwLDAsMCwuNik7Ym9yZGVyLWNvbG9yOiM2NjY7Y29sb3I6I2ZmZjsNCiAgfQ0KICAjdGhlbWVQaWNrZXIgLnRoZW1lLXN3YXRjaHsNCiAgICB3aWR0aDoyMHB4O2hlaWdodDoyMHB4O3BhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MnB4IHNvbGlkICNmZmY7Ym9yZGVyLXJhZGl1czo1MCU7Y3Vyc29yOnBvaW50ZXI7DQogICAgYmFja2dyb3VuZDp2YXIoLS1zd2F0Y2gpO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2xpbmUtaGVpZ2h0OjA7b3V0bGluZTpub25lOw0KICB9DQogICN0aGVtZVBpY2tlciAudGhlbWUtc3dhdGNoOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkICMwMDA7fQ0KICBib2R5LmRhcmstbW9kZSAjdGhlbWVQaWNrZXIgLnRoZW1lLXN3YXRjaHtib3JkZXItY29sb3I6IzAwMDt9DQogICN0aGVtZVBpY2tlciAudGhlbWUtc3dhdGNoLmlzLWFjdGl2ZXtib3gtc2hhZG93OjAgMCAwIDJweCAjMDAwIGluc2V0LDAgMCAwIDRweCAjZmZmO30NCiAgYm9keS5kYXJrLW1vZGUgI3RoZW1lUGlja2VyIC50aGVtZS1zd2F0Y2guaXMtYWN0aXZle2JveC1zaGFkb3c6MCAwIDAgMnB4ICNmZmYgaW5zZXQsMCAwIDAgNHB4ICMwMDA7fQ0KPC9zdHlsZT4NCjxzdHlsZT4NCiAgLyogRGFyayB0b2dnbGUgaW5zaWRlIHRoZW1lUGlja2VyICovDQogICN0aGVtZVBpY2tlciAudGhlbWUtZGFyay10b2dnbGV7DQogICAgZm9udC1mYW1pbHk6J0ludGVyJyxzYW5zLXNlcmlmOw0KICAgIGRpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7DQogICAgcGFkZGluZzoycHggNnB4Ow0KICAgIGZvbnQtc2l6ZToxMnB4Ow0KICAgIGJvcmRlcjpub25lOw0KICAgIGJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7DQogICAgY29sb3I6aW5oZXJpdDsNCiAgICBjdXJzb3I6cG9pbnRlcjsNCiAgfQ0KICAjdGhlbWVQaWNrZXIgLnRoZW1lLWRhcmstdG9nZ2xlOmhvdmVyew0KICAgIHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7DQogIH0NCiAgI3RoZW1lUGlja2VyIC50aGVtZS1kYXJrLXRvZ2dsZSAjZGFya0ljb257Zm9udC1zaXplOjE2cHg7bGluZS1oZWlnaHQ6MTt9DQogIC8qIEhpZGUgbGVnYWN5IGZsb2F0aW5nIGRhcmsgdG9nZ2xlIGJ1dHRvbiBpZiBzdGlsbCBwcmVzZW50ICovDQogIC5kYXJrLXRvZ2dsZS1idG57ZGlzcGxheTpub25lIWltcG9ydGFudDt9DQo8L3N0eWxlPg0KDQoNCjxzdHlsZT4NCiAgYm9keS5kYXJrLW1vZGUgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICMxMjEyMTI7DQogICAgY29sb3I6ICNmZmZmZmY7DQogIH0NCmJvZHkuZGFyay1tb2RlLCANCmJvZHkuZGFyay1tb2RlICogew0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KYm9keS5kYXJrLW1vZGUgc2VsZWN0LA0KYm9keS5kYXJrLW1vZGUgb3B0aW9uIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KICBib2R5LmRhcmstbW9kZSAuY29udGFpbmVyLA0KICBib2R5LmRhcmstbW9kZSAudXBsb2FkLXNlY3Rpb24sDQogIGJvZHkuZGFyay1tb2RlIC5sb2dpbi1zZWN0aW9uLA0KICBib2R5LmRhcmstbW9kZSAucHJvY2VkdXJlLWluZm8sDQogIGJvZHkuZGFyay1tb2RlIC5vcHRpb24tc2VjdGlvbiwNCiAgYm9keS5kYXJrLW1vZGUgLnRpbWUtb3B0aW9ucywNCiAgYm9keS5kYXJrLW1vZGUgLmZpbGUtcmVxdWlyZW1lbnRzLA0KICBib2R5LmRhcmstbW9kZSAudGFibGUtY29udGFpbmVyLA0KICBib2R5LmRhcmstbW9kZSB0YWJsZSwNCiAgYm9keS5kYXJrLW1vZGUgdGgsDQogIGJvZHkuZGFyay1tb2RlIHRkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUxZTFlICFpbXBvcnRhbnQ7DQogICAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgICBib3JkZXItY29sb3I6ICM0NDQgIWltcG9ydGFudDsNCiAgfQ0KICANCiAgLmRhcmstdG9nZ2xlLWJ0biB7DQogICAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7DQogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMmMzZTUwLCAjNGNhMWFmKTsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICAgIGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjIpOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBnYXA6IDZweDsNCg0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50Ow0KICAgIHRvcDogMjBweCAhaW1wb3J0YW50Ow0KICAgIGxlZnQ6IDIwcHggIWltcG9ydGFudDsNCiAgICB6LWluZGV4OiAxMDAwMCAhaW1wb3J0YW50Ow0KDQogICAgcGFkZGluZzogOHB4IDEycHg7DQogICAgYm9yZGVyOiBub25lOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICM0NDQ7DQogICAgY29sb3I6ICNmZmY7DQogICAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgfQ0KDQoNCi8qID09PT09PT0gVE9BU1QgJiBEQVNIQk9BUkQgPT09PT09PSAqLw0KLnRvYXN0IHsNCiAgdmlzaWJpbGl0eTogaGlkZGVuOw0KICBtaW4td2lkdGg6IDI1MHB4Ow0KICBtYXJnaW4tbGVmdDogLTEyNXB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOw0KICBjb2xvcjogI2ZmZjsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIHBhZGRpbmc6IDE0cHg7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgei1pbmRleDogOTk5OTsNCiAgbGVmdDogNTAlOw0KICBib3R0b206IDMwcHg7DQogIGZvbnQtc2l6ZTogMTZweDsNCiAgb3BhY2l0eTogMDsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzLCBib3R0b20gMC41czsNCn0NCi50b2FzdC5zaG93IHsNCiAgdmlzaWJpbGl0eTogdmlzaWJsZTsNCiAgb3BhY2l0eTogMTsNCiAgYm90dG9tOiA1MHB4Ow0KfQ0KLmRhc2hib2FyZCB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGdhcDogMTBweDsNCiAgbWFyZ2luOiAxMHB4IDA7DQp9DQouZGFzaGJvYXJkIC5jYXJkIHsNCiAgZmxleDogMTsNCiAgYmFja2dyb3VuZDogI2Y4ZjlmYTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBwYWRkaW5nOiAxMHB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMSk7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLm1haW5ibG9rIHsNCiAgICBiYWNrZ3JvdW5kOiAjZWRmN2ZmOw0KICAgIGJvcmRlcjogMnB4IHNvbGlkICNmM2YzZjM7DQogICAgbWFyZ2luOiAwOw0KICAgIHBhZGRpbmc6IDJweCAycHggMnB4IDJweDsNCiAgICB9DQoubGlzdDEgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZhZjA7DQogICAgYm9yZGVyOiAycHggZGFzaGVkICNmZmNmNjY7DQogICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgIHBhZGRpbmc6IDVweDsNCn0NCg0KICBib2R5LmRhcmstbW9kZSAjcGF0aWVudENvdW50ZXIgew0KICAgIGNvbG9yOiAjMDBiY2Q0Ow0KICB9DQoNCg0KLmhlcmItcm93IHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmN2ZhICFpbXBvcnRhbnQ7DQp9DQogLmhlcmItb3V0bGllciB0ZCB7DQogICAgYmFja2dyb3VuZDojZmZkZGRkICFpbXBvcnRhbnQ7DQogICAgY29sb3I6I2I3MWMxYyAhaW1wb3J0YW50Ow0KICAgIGZvbnQtd2VpZ2h0OjYwMDsNCiAgfQ0KICAjaGVyYk91dGxpZXJTdW1tYXJ5IGEgew0KICAgIGNvbG9yOiNkMzJmMmY7DQogICAgZm9udC13ZWlnaHQ6NjAwOw0KICAgIHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7DQogICAgY3Vyc29yOnBvaW50ZXI7DQogIH0NCiAgYm9keS5kYXJrLW1vZGUgLmhlcmItb3V0bGllciB0ZCB7DQogICAgYmFja2dyb3VuZDojNWMxZjFmICFpbXBvcnRhbnQ7DQogICAgY29sb3I6I2ZmOGE4MCAhaW1wb3J0YW50Ow0KICB9DQogIGJvZHkuZGFyay1tb2RlICNoZXJiT3V0bGllclN1bW1hcnkgYSB7DQogICAgY29sb3I6I2ZmOGE4MCAhaW1wb3J0YW50Ow0KICB9DQouZGFyay1tb2RlICNoZXJiT3V0bGllck1vZGFsIFtyb2xlPSJkaWFsb2ciXSB7DQogIGJhY2tncm91bmQ6IzFlMWUxZSAhaW1wb3J0YW50Ow0KICBjb2xvcjojZjVmNWY1ICFpbXBvcnRhbnQ7DQogIGJvcmRlci1jb2xvcjojZmY2NjY2ICFpbXBvcnRhbnQ7DQp9DQoNCi8qIEtow7RuZyBn4bqhY2ggY2jDom4ga2hpIC5jaHUtdGhpY2ggZMO5bmcgY2hvIHRpw6p1IMSR4buBICovDQouY2h1LXRoaWNoLm5vLXVuZGVybGluZSwNCi5jaHUtdGhpY2gubm8tdW5kZXJsaW5lIGEgew0KICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsNCn0NCi8qIERBUksgTU9ERTogcG9wdXAgdGjhu6cgdGh14bqtdCBjaGkgdGnhur90ICovDQpib2R5LmRhcmstbW9kZSAjcHJvY2VkdXJlT3ZlcmxheSB7DQogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC44KSAhaW1wb3J0YW50OyAvKiB04buRaSBoxqFuIGtoaSBi4bqtdCBkYXJrICovDQp9DQoNCmJvZHkuZGFyay1tb2RlICNwcm9jZWR1cmVQb3B1cCB7DQogIGJhY2tncm91bmQ6ICMxZTFlMWUgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmNWY1ZjUgIWltcG9ydGFudDsNCiAgYm9yZGVyLWNvbG9yOiAjZmY2NjY2ICFpbXBvcnRhbnQ7ICAgICAgICAvKiB0deG7szogZ2nhu68gbcOgdSB4YW5oICMzNDk4ZGIgbuG6v3UgdGjDrWNoICovDQogIGJveC1zaGFkb3c6IDAgNXB4IDIwcHggcmdiYSgwLDAsMCwwLjYpICFpbXBvcnRhbnQ7DQp9DQoNCi8qIGNo4buvIHRpw6p1IMSR4buBIGLDqm4gdHJvbmcgKGtow7RuZyBi4bqvdCBideG7mWMsIGTDuW5nIG7hur91IG114buRbiDEkeG7lWkgbcOgdSByacOqbmcpICovDQpib2R5LmRhcmstbW9kZSAjcHJvY2VkdXJlUG9wdXAgaDMgew0KICBjb2xvcjogI2ZmOGE4MCAhaW1wb3J0YW50Ow0KfQ0KDQovKiBuw7p0IMSQw7NuZyB0cm9uZyBkYXJrIG1vZGUgKi8NCmJvZHkuZGFyay1tb2RlICNwcm9jZWR1cmVQb3B1cCAuYnRuIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNjY2NiAhaW1wb3J0YW50Ow0KICBjb2xvcjogIzAwMCAhaW1wb3J0YW50Ow0KfQ0KLyogRGFyayBtb2RlIGNobyDDtCDEkcSDbmcgbmjhuq1wICovDQpib2R5LmRhcmstbW9kZSAubG9naW4tc2VjdGlvbiwNCmJvZHkuZGFyay1tb2RlIC5sb2dpbi1pbnB1dCB7DQogIGJhY2tncm91bmQtY29sb3I6ICMyYzJjMmMgIWltcG9ydGFudDsNCiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsNCiAgYm9yZGVyOiAxcHggc29saWQgIzY2NiAhaW1wb3J0YW50Ow0KfQ0KDQovKiBQbGFjZWhvbGRlciBk4buFIMSR4buNYyB0cm9uZyBkYXJrIG1vZGUgKi8NCmJvZHkuZGFyay1tb2RlIC5sb2dpbi1pbnB1dDo6cGxhY2Vob2xkZXIgew0KICBjb2xvcjogI2JiYmJiYiAhaW1wb3J0YW50Ow0KICBvcGFjaXR5OiAxOyAvKiBi4bqjbyDEkeG6o20ga2jDtG5nIGLhu4sgcXXDoSBt4budICovDQp9DQoNCi8qIENvbiB0cuG7jyBnw7UgY2jhu68gKGNhcmV0KSBjxaluZyBzw6FuZyAqLw0KYm9keS5kYXJrLW1vZGUgLmxvZ2luLWlucHV0IHsNCiAgY2FyZXQtY29sb3I6ICNmZmZmZmY7DQp9DQpib2R5LmRhcmstbW9kZSAjbG9hZGluZ1BvcHVwICNwcm9ncmVzc0JhciB7DQogIGJhY2tncm91bmQ6ICMwMGJjZDQgIWltcG9ydGFudDsgLyogdGhhbmggdGnhur9uIHRyw6xuaCAqLw0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAyMHB4Ow0KICByaWdodDogMjBweDsNCiAgZGlzcGxheTogZmxleDsNCiAgZ2FwOiAxMnB4Ow0KICB6LWluZGV4OiA5OTk5Ow0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCAuYnRuIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzM0OThkYjsNCiAgY29sb3I6IHdoaXRlOw0KICBwYWRkaW5nOiAxMHB4IDE2cHg7DQogIGJvcmRlcjogbm9uZTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBmb250LXNpemU6IDE0cHg7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgYm94LXNoYWRvdzogMCAycHggNnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7DQogIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycyBlYXNlOw0KfQ0KDQoudG9wLWJ1dHRvbi1ncm91cCAuYnRuOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogIzI5ODBiOTsNCn0NCg0KDQoNCg0KPC9zdHlsZT4NCg0KPHNjcmlwdD4NCiAgICAgIGZ1bmN0aW9uIHRvZ2dsZURhcmtNb2RlKCkgew0KICAgICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTsNCiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkYXJrSWNvbiIpOw0KICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRhcmtUZXh0Iik7DQogICAgICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgiZGFyay1tb2RlIik7DQogICAgICAgIGNvbnN0IGlzRGFyayA9IGJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCJkYXJrLW1vZGUiKTsNCiAgICAgICAgaWNvbi50ZXh0Q29udGVudCA9IGlzRGFyayA/ICLimIDvuI8iIDogIvCfjJkiOw0KICAgICAgICB0ZXh0LnRleHRDb250ZW50ID0gaXNEYXJrID8gIlPDoW5nIiA6ICJU4buRaSI7DQogICAgICB9DQogICAgPC9zY3JpcHQ+DQo8c2NyaXB0Pg0KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsNCi8vIEzhuqV5IGPDoWMgcGjhuqduIHThu60NCiAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJpZ2dlckJ1dHRvbicpOw0KICAgICAgICAgICAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVJbnB1dCcpOw0KDQogICAgICAgICAgICAvLyBLaeG7g20gdHJhIHhlbSBwaOG6p24gdOG7rSBjw7MgdOG7k24gdOG6oWkga2jDtG5nDQogICAgICAgICAgICBpZiAoIXRyaWdnZXJCdXR0b24gfHwgIWZpbGVJbnB1dCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0zhu5dpOiBLaMO0bmcgdMOsbSB0aOG6pXkgdHJpZ2dlckJ1dHRvbiBob+G6t2MgZmlsZUlucHV0Jyk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBUaMOqbSBz4buxIGtp4buHbiBjbGljayBjaG8gYnV0dG9uDQogICAgICAgICAgICB0cmlnZ2VyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfEkMOjIGNsaWNrIG7DunQgQ2jhu41uIGZpbGUnKTsgLy8gRGVidWcNCiAgICAgICAgICAgICAgICBmaWxlSW5wdXQuY2xpY2soKTsgLy8gS8OtY2ggaG/huqF0IGlucHV0IGZpbGUNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0pOw0KDQo8L3NjcmlwdD4NCjxkaXYgY2xhc3M9ImNvbnRhaW5lciI+DQo8ZGl2IGNsYXNzPSJsb2dpbi1zZWN0aW9uIiBpZD0ibG9naW5TZWN0aW9uIj4NCjxoMiBjbGFzcz0ibG9naW4tdGl0bGUiPsSQxIJORyBOSOG6rFAgSOG7hiBUSOG7kE5HPC9oMj4NCjxpbnB1dCBjbGFzcz0ibG9naW4taW5wdXQiIGlkPSJ1c2VybmFtZUlucHV0IiBwbGFjZWhvbGRlcj0iVMOqbiDEkcSDbmcgbmjhuq1wIiB0eXBlPSJ0ZXh0Ii8+DQo8aW5wdXQgY2xhc3M9ImxvZ2luLWlucHV0IiBpZD0icGFzc3dvcmRJbnB1dCIgcGxhY2Vob2xkZXI9Ik3huq10IGto4bqpdSIgdHlwZT0icGFzc3dvcmQiLz4NCjxici8+PGJ1dHRvbiBjbGFzcz0iYnRuIiBpZD0ibG9naW5CdG4iPsSQxINuZyBuaOG6rXA8L2J1dHRvbj4NCjxkaXYgY2xhc3M9ImxvZ2luLWVycm9yIiBpZD0ibG9naW5FcnJvciI+VMOqbiDEkcSDbmcgbmjhuq1wIGhv4bq3YyBt4bqtdCBraOG6qXUga2jDtG5nIMSRw7puZzwvZGl2Pg0KPC9kaXY+DQo8ZGl2IGNsYXNzPSJtYWluLWNvbnRlbnQiIGlkPSJtYWluQ29udGVudCI+DQo8ZGl2IGNsYXNzPSJ0b3AtYnV0dG9uLWdyb3VwIj4NCiAgPGJ1dHRvbiBvbmNsaWNrPSJ3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7IiBjbGFzcz0iYnRuIj5Yb8OhIENhY2hlPC9idXR0b24+DQogIDxidXR0b24gY2xhc3M9ImJ0biJpZD0ibG9nb3V0QnRuIj7EkMSDbmcgeHXhuqV0PC9idXR0b24+DQo8L2Rpdj4NCg0KDQo8c3BhbiBjbGFzcz0iY2h1LXRoaWNoIj48aDE+IDxhIGhyZWY9Imh0dHBzOi8vZmIuY29tL2NoYXVodXluaDAxMDQiIHN0eWxlPSJhbGw6IHVuc2V0OyBjdXJzb3I6IHBvaW50ZXI7IiB0YXJnZXQ9Il9ibGFuayI+S2nhu4NtIFRyYSBUaOG7pyBUaHXhuq10IFkgVOG6vzwvYT48L2gxPjxzcGFuIGNsYXNzPSJub2ktZHVuZyI+RGVzaWduIEJ5IENow6J1IEh14buzbmg8L3NwYW4+PC9zcGFuPg0KPGRpdiBjbGFzcz0ibGlzdDEiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDhweDsiPg0KPGkgY2xhc3M9ImZhIGZhLWJ1bGxob3JuIj48L2k+DQo8Yj48Zm9udCBjb2xvcj0icmVkIj5UaMO0bmcgYsOhbzo8L2ZvbnQ+PC9iPg0KPGRpdiBjbGFzcz0ic2Nyb2xsaW5nLXRleHQiIHN0eWxlPSJmbGV4OiAxOyBvdmVyZmxvdzogaGlkZGVuOyI+DQo8ZGl2IGNsYXNzPSJzY3JvbGxpbmctY29udGVudCIgaWQ9Im5vaWR1bmciPg0KDQo8L2Rpdj4NCjwvZGl2Pg0KPC9kaXY+DQo8c2NyaXB0Pg0KDQoNCmZldGNoKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY2hhdWh1eW5oMDEwNC9jaGF1aHV5bmgwMTA0LnR4dC9yZWZzL2hlYWRzL21haW4vdGhvbmdiYW8udHh0JykNCiAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKQ0KICAudGhlbihkYXRhID0+IHsNCiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2lkdW5nJyk7DQogICAgZWwuaW5uZXJIVE1MID0gZGF0YTsNCg0KICAgIC8vIFTEg25nIMSR4buZIGTDoGkgbuG7mWkgZHVuZyDEkeG7gyDEkeG6o20gYuG6o28gY3Xhu5luDQogICAgZWwuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snOw0KICAgIGVsLnN0eWxlLm1pbldpZHRoID0gJzEwMCUnOw0KDQogICAgLy8gUmVzZXQgYW5pbWF0aW9uIHRvIGZvcmNlIHJlZmxvdw0KICAgIGVsLnN0eWxlLmFuaW1hdGlvbiA9ICdub25lJzsNCiAgICB2b2lkIGVsLm9mZnNldFdpZHRoOw0KICAgIGVsLnN0eWxlLmFuaW1hdGlvbiA9ICdzY3JvbGwtbGVmdCAxMHMgbGluZWFyIGluZmluaXRlJzsNCiAgfSkNCiAgLmNhdGNoKGVycm9yID0+IHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbm9pZHVuZycpLnRleHRDb250ZW50ID0gJ0tow7RuZyB0aOG7gyB04bqjaSBu4buZaSBkdW5nLic7DQogICAgY29uc29sZS5lcnJvcihlcnJvcik7DQogIH0pOw0KDQoNCjwvc2NyaXB0Pg0KPGRpdiBjbGFzcz0idXBsb2FkLXNlY3Rpb24iPjxkaXYgY2xhc3M9Im1haW5ibG9rIj4NCg0KPGlucHV0IGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIGlkPSJmaWxlSW5wdXQiIHN0eWxlPSJkaXNwbGF5Om5vbmUiIHR5cGU9ImZpbGUiLz4NCjxidXR0b24gY2xhc3M9ImJ0biIgaWQ9InRyaWdnZXJCdXR0b24iPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS11cGxvYWQiPjwvaT4gQ2jhu41uIGZpbGUgdGjhu6cgY8O0bmc8L2J1dHRvbj4NCjxici8+PGJyLz4NCjxpbnB1dCBkaXJlY3Rvcnk9IiIgaWQ9ImZvbGRlcklucHV0IiBtdWx0aXBsZT0iIiBzdHlsZT0iZGlzcGxheTpub25lIiB0eXBlPSJmaWxlIiB3ZWJraXRkaXJlY3Rvcnk9IiIvPg0KPGJ1dHRvbiBjbGFzcz0iYnRuIiBpZD0iZm9sZGVyQnRuIj48aSBjbGFzcz0iZmFzIGZhLWZvbGRlci1vcGVuIj48L2k+IENo4buNbiB0aMawIG3hu6VjIChU4buxIMSR4buZbmcgdMOsbSBmaWxlKTwvYnV0dG9uPg0KPGRpdiBpZD0ic2NhblN0YXR1cyIgc3R5bGU9Im1hcmdpbi10b3A6MTBweDtjb2xvcjojMzQ5OGRiO2ZvbnQtd2VpZ2h0OmJvbGQiPjwvZGl2Pg0KDQoNCjxsYWJlbD4NCjxpbnB1dCBuYW1lPSJ0aW1lT3B0aW9uIiB0eXBlPSJyYWRpbyIgdmFsdWU9Ijc6MDAiLz4gDQogICAgICAgICAgICAgICAgICAgICAgICBH4bujaSDDvSB04burIDA3OjAwDQogICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+DQo8bGFiZWw+DQo8aW5wdXQgY2hlY2tlZD0iIiBuYW1lPSJ0aW1lT3B0aW9uIiB0eXBlPSJyYWRpbyIgdmFsdWU9Ijc6MzAiLz4gDQogICAgICAgICAgICAgICAgICAgICAgICBH4bujaSDDvSB04burIDA3OjMwDQogICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+DQo8YnIvPjxici8+DQoNCiAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDEwcHg7Ij4NCjxpbnB1dCBjaGVja2VkPSIxIiBpZD0iaWdub3JlQWRqYWNlbnRDaGVja2JveCIgdHlwZT0iY2hlY2tib3giLz4NCjxzcGFuIGNsYXNzPSJjaHUtdGhpY2giPkLhu48gcXVhIHRo4bunIHRodeG6rXQgbGnhu4FuIGvhu4E8c3BhbiBjbGFzcz0ibm9pLWR1bmciPlZEOiA4aDAwLThoMzAgeG9hIGLDs3AuIDA4aDMwLTA4aDUwIMSRaeG7h24gY2jDom0uIGxpw6puIHRp4bq/cCBtw6Aga28gY8OhY2ggMSBwaMO6dCA8L3NwYW4+PC9zcGFuPg0KPC9sYWJlbD4NCg0KICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1yaWdodDogMTBweDsiPg0KPGlucHV0IGlkPSJzaG93TW9yZVN1Z2dlc3Rpb25zQ2hlY2tib3giIHR5cGU9ImNoZWNrYm94Ii8+IA0KICAgICAgICBIaeG7g24gdGjhu4sgNiBraHVuZyBnaeG7nSBn4bujaSDDvSAgICAgICAgIA0KICAgIDwvbGFiZWw+DQoNCjxsYWJlbD4NCjxpbnB1dCBpZD0ic2hvd0RvY3RvckNoZWNrYm94IiB0eXBlPSJjaGVja2JveCIvPiANCiAgICAgICAgSGnhu4NuIHRo4buLIELDoWMgc8SpIGNo4buJIMSR4buLbmgNCiAgICA8L2xhYmVsPg0KPGJyLz48YnIvPg0KPGJ1dHRvbiBjbGFzcz0iYnRuIiBpZD0iYW5hbHl6ZUJ0biI+S2nhu4NtIFRyYTwvYnV0dG9uPg0KDQoNCg0KDQoNCg0KDQoNCg0KPHNjcmlwdD4NCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7DQogICAgY29uc3QgZmlsZSA9IHRoaXMuZmlsZXNbMF07DQogICAgaWYgKGZpbGUpIHsNCiAgICAgICAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjYW5TdGF0dXMnKTsNCiAgICAgICAgc3RhdHVzLmlubmVySFRNTCA9IGA8aSBjbGFzcz0iZmFzIGZhLWZpbGUiPjwvaT7EkMOjIGNo4buNbiBmaWxlOiA8Yj4ke2ZpbGUubmFtZX08L2I+YDsNCiAgICAgICAgc3RhdHVzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICBzdGF0dXMuc3R5bGUuY29sb3IgPSAnIzJjM2U1MCc7DQogICAgfQ0KfSk7DQoNCjwvc2NyaXB0Pg0KPGRpdiBpZD0ic2NhblN0YXR1cyIgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgY29sb3I6IzJjM2U1MDsgZm9udC13ZWlnaHQ6Ym9sZDsgZGlzcGxheTogbm9uZTsiPjwvZGl2Pg0KPGRpdiBpZD0ib3BlcmF0b3JGaWx0ZXIiIHN0eWxlPSJtYXJnaW4tdG9wOiAxNXB4OyBkaXNwbGF5OiBub25lOyI+DQo8bGFiZWwgZm9yPSJvcGVyYXRvclNlbGVjdCI+TOG7jWMgdGhlbyBuZ8aw4budaSB0aOG7sWMgaGnhu4duOjwvbGFiZWw+DQo8c2VsZWN0IGNsYXNzPSJsb2dpbi1pbnB1dCIgaWQ9Im9wZXJhdG9yU2VsZWN0Ij4NCjxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6ozwvb3B0aW9uPg0KPC9zZWxlY3Q+DQo8L2Rpdj48YnIvPg0KPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTogMTJweDsiPjxpPlBo4bqnbiBt4buBbSDEkcO0aSBraGkgY8OzIHRo4buDIG3huq9jIGzhu5dpLiBYaW4gaMOjeSBraeG7g20gdHJhIGPDoWMgdGjDtG5nIHRpbiBxdWFuIHRy4buNbmcuPC9pPjwvc3Bhbj4NCjxkaXYgaWQ9ImZpbGVSZXF1aXJlbWVudHMiPjwvZGl2Pg0KPC9kaXY+PC9kaXY+DQoNCjwhLS0gQuG6rlQgxJDhuqZVOiBC4bqiTkcgR0nhu5wgVFLhu5BORyBU4buqTkcgTkfGr+G7nEkgLS0+DQogIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0idG9nZ2xlSGVyYkxpc3QoKSJzdHlsZT0iZGlzcGxheTpub25lIj5T4bqvYyB0aHXhu5FjIHRoYW5nPC9idXR0b24+DQogIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0idG9nZ2xlQXZhaWxhYmlsaXR5KCkiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPkdp4budIHRy4buRbmc8L2J1dHRvbj4NCg0KPGRpdiBpZD0iYXZhaWxhYmlsaXR5VGFibGUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tYm90dG9tOiAyMHB4OyI+DQogIDxoMz5UaOG7kW5nIGvDqiBnaeG7nSB0cuG7kW5nIHThu6tuZyBuZ8aw4budaTwvaDM+DQogIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUgaGVyYi10YWJsZSI+DQogICAgPHRoZWFkPg0KICAgICAgPHRyPg0KICAgICAgICA8dGg+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICAgIDx0aD5OZ8OgeTwvdGg+DQogICAgICAgIA0KICAgICAgICA8dGg+S2h1bmcgZ2nhu50gdHLhu5FuZyBideG7lWkgc8Ohbmc8L3RoPg0KICAgICAgICA8dGg+S2h1bmcgZ2nhu50gdHLhu5FuZyBideG7lWkgY2hp4buBdTwvdGg+DQogICAgICA8L3RyPg0KICAgIDwvdGhlYWQ+DQogICAgPHRib2R5IGlkPSJhdmFpbGFiaWxpdHlCb2R5Ij48L3Rib2R5Pg0KICA8L3RhYmxlPg0KPC9kaXY+DQo8IS0tIEvhur5UIFRIw5pDOiBC4bqiTkcgR0nhu5wgVFLhu5BORyBU4buqTkcgTkfGr+G7nEkgLS0+DQoNCg0KDQoNCjwhLS0gTsOaVCBISeG7gk4gVEjhu4ogVEjhu6YgVEhV4bqsVCBT4bquQyBUSFXhu5BDIC0tPg0KDQoNCiAgDQo8IS0tIELhuqJORyBUSOG7piBUSFXhuqxUIFPhuq5DIFRIVeG7kEMgVEhBTkcgLS0+DQo8ZGl2IGlkPSJoZXJiUHJvY2VkdXJlVGFibGUiIHN0eWxlPSJkaXNwbGF5OiBub25lOyBtYXJnaW4tdG9wOiAyMHB4OyI+DQogIDxkaXYgY2xhc3M9Im1haW5ibG9rInN0eWxlPSJtYXJnaW4tYm90dG9tOiAxMHB4OyI+DQogICAgPGRpdj4NCiAgICA8c2VsZWN0IGlkPSJoZXJiRG9jdG9yRmlsdGVyIiBjbGFzcz0ibG9naW4taW5wdXQiIHN0eWxlPSJ3aWR0aDphdXRvOyBtYXJnaW4tbGVmdDogMjBweDsiPg0KICAgICAgPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGLDoWMgc8SpPC9vcHRpb24+DQogICAgPC9zZWxlY3Q+DQogICAgPHNlbGVjdCBpZD0iaGVyYkRhdGVGaWx0ZXIiIGNsYXNzPSJsb2dpbi1pbnB1dCIgc3R5bGU9IndpZHRoOmF1dG87Ij48L3NlbGVjdD4NCiAgPC9kaXY+PC9kaXY+DQoNCjwhLS0gVMOTTSBU4bquVCBPVVRMSUVSIC0tPg0KPGRpdiBpZD0iaGVyYk91dGxpZXJTdW1tYXJ5IiBzdHlsZT0iZGlzcGxheTpub25lO21hcmdpbjo4cHggMjBweDtmb250LXNpemU6MTRweCI+DQogIDwhLS0gbuG7mWkgZHVuZyBz4bq9IMSRxrDhu6NjIEpTIGPhuq1wIG5o4bqtdCAtLT4NCjwvZGl2Pg0KICA8dGFibGUgY2xhc3M9ImVycm9yLXRhYmxlIj4NCiAgICA8dGhlYWQ+DQogICAgICA8dHI+DQogICAgICAgIDx0aD5I4buNIHTDqm4gYuG7h25oIG5ow6JuPC90aD4NCiAgICAgICAgPHRoPlRo4bunIHRodeG6rXQ8L3RoPg0KICAgICAgICA8dGg+TmfDoHk8L3RoPg0KICAgICAgICA8dGg+VGjhu51pIGdpYW48L3RoPg0KICAgICAgICA8dGg+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICA8L3RyPg0KICAgIDwvdGhlYWQ+DQogICAgPHRib2R5IGlkPSJoZXJiVGFibGVCb2R5Ij48L3Rib2R5Pg0KICA8L3RhYmxlPg0KPC9kaXY+DQoNCg0KPCEtLSBQT1BVUCBEQU5IIFPDgUNIIE9VVExJRVIgU+G6rkMgVEhV4buQQyBUSEFORyAtLT4NCjxkaXYgaWQ9ImhlcmJPdXRsaWVyTW9kYWwiIHN0eWxlPSJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDt6LWluZGV4OjExMDAwIj4NCiAgPGRpdiBpZD0iaGVyYk91dGxpZXJCYWNrZHJvcCIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSkiPjwvZGl2Pg0KICA8ZGl2IHJvbGU9ImRpYWxvZyIgYXJpYS1tb2RhbD0idHJ1ZSINCiAgICAgICBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7dG9wOjEwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTsNCiAgICAgICAgICAgICAgbWF4LXdpZHRoOjcwMHB4O21heC1oZWlnaHQ6ODB2aDtvdmVyZmxvdzphdXRvOw0KICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzAwMDtwYWRkaW5nOjIwcHg7Ym9yZGVyLXJhZGl1czo4cHg7DQogICAgICAgICAgICAgIGJvcmRlcjoycHggc29saWQgI2QzMmYyZjtib3gtc2hhZG93OjAgNXB4IDIwcHggcmdiYSgwLDAsMCwwLjMpO2ZvbnQtZmFtaWx5OkludGVyLHNhbnMtc2VyaWYiPg0KICAgIDxoMz5EYW5oIHPDoWNoIGNhIGtow6FjIMSRYSBz4buRPC9oMz4NCiAgICA8ZGl2IHN0eWxlPSJtYXJnaW46MTBweCAwO2ZvbnQtc2l6ZToxM3B4IiBpZD0iaGVyYk91dGxpZXJNb2RhbEluZm8iPjwvZGl2Pg0KICAgIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUiIHN0eWxlPSJtYXJnaW4tdG9wOjEwcHgiPg0KICAgICAgPHRoZWFkPg0KICAgICAgICA8dHI+DQogICAgICAgICAgPHRoPkjhu40gdMOqbiBi4buHbmggbmjDom48L3RoPg0KICAgICAgICAgIDx0aD5UaOG7pyB0aHXhuq10PC90aD4NCiAgICAgICAgICA8dGg+TmfDoHk8L3RoPg0KICAgICAgICAgIDx0aD5UaOG7nWkgZ2lhbjwvdGg+DQogICAgICAgICAgPHRoPk5nxrDhu51pIHRo4buxYyBoaeG7h248L3RoPg0KICAgICAgICA8L3RyPg0KICAgICAgPC90aGVhZD4NCiAgICAgIDx0Ym9keSBpZD0iaGVyYk91dGxpZXJNb2RhbEJvZHkiPjwvdGJvZHk+DQogICAgPC90YWJsZT4NCiAgICA8YnIvPg0KICAgIDxidXR0b24gY2xhc3M9ImJ0biIgdHlwZT0iYnV0dG9uIiBpZD0iaGVyYk91dGxpZXJDbG9zZUJ0biI+xJDDs25nPC9idXR0b24+DQogIDwvZGl2Pg0KPC9kaXY+DQoNCg0KDQoNCg0KDQo8YnIvPg0KPGJyLz48ZGl2IGlkPSJlcnJvclNlY3Rpb24iIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQo8YnIvPg0KPGgzIGlkPSJlcnJvclNlY3Rpb25UaXRsZSI+TOG7l2kgTmjhuq1wIFNhaSBUaOG7nWkgR2lhbjwvaDI+DQo8ZGl2IGlkPSJvcGVyYXRvckZpbHRlckVycm9yIiBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsgZGlzcGxheTogbm9uZTsiPg0KPGxhYmVsIGZvcj0ib3BlcmF0b3JTZWxlY3RFcnJvciI+TOG7jWMgdGhlbyBuZ8aw4budaSB0aOG7sWMgaGnhu4duOjwvbGFiZWw+DQo8c2VsZWN0IGNsYXNzPSJsb2dpbi1pbnB1dCIgaWQ9Im9wZXJhdG9yU2VsZWN0RXJyb3IiPg0KPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjPC9vcHRpb24+DQo8L3NlbGVjdD4NCjwvZGl2Pg0KPGRpdiBpZD0iZXJyb3JMb2ciPjwvZGl2Pg0KPC9kaXY+DQo8YnIvPg0KPGRpdiBjbGFzcz0iZGFzaGJvYXJkIiBpZD0iZGFzaGJvYXJkIiBzdHlsZT0iZGlzcGxheTpub25lIj4NCjxkaXYgY2xhc3M9ImNhcmQiIGlkPSJjYXJkVG90YWwiPlThu5VuZzogMDwvZGl2Pg0KPGRpdiBjbGFzcz0iY2FyZCIgaWQ9ImNhcmRFcnJvcnMiPkzhu5dpOiAwPC9kaXY+DQo8ZGl2IGNsYXNzPSJjYXJkIiBpZD0iY2FyZENvbmZsaWN0cyI+WHVuZyDEkeG7mXQ6IDA8L2Rpdj4NCjwvZGl2Pg0KPGRpdiBpZD0icmVzdWx0U2VjdGlvbiIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4NCjxoMiBpZD0icmVzdWx0U2VjdGlvblRpdGxlIj5L4bq/dCBRdeG6oyBLaeG7g20gVHJhPC9oMj4gPGJyLz4NCjxkaXYgaWQ9InN1bW1hcnkiPjwvZGl2Pg0KPHRhYmxlIGlkPSJyZXN1bHRUYWJsZSI+DQo8dGhlYWQ+DQo8dHI+DQo8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUw6puIEJOPC90aD4NCjx0aD48aSBjbGFzcz0iZmFzIGZhLXByb2NlZHVyZXMgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFRo4bunIHRodeG6rXQ8L3RoPg0KPHRoPjxpIGNsYXNzPSJmYXIgZmEtY2FsZW5kYXItYWx0IGZhLXNwaW4tY29udGludW91cyI+PC9pPiBOZ8OgeTwvdGg+DQo8dGggY2xhc3M9ImRvY3Rvci1jb2x1bW4iPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1tZCBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gQsOhYyBz4bu5IGNo4buJIMSR4buLbmg8L3RoPg0KPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1udXJzZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQo8dGg+PGkgY2xhc3M9ImZhciBmYS1jbG9jayBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gR+G7o2kgw70gZ2nhu508L3RoPg0KPC90cj4NCjwvdGhlYWQ+DQo8dGJvZHkgaWQ9InJlc3VsdEJvZHkiPjwvdGJvZHk+DQo8L3RhYmxlPg0KDQoNCjwvZGl2Pg0KPC9kaXY+DQo8L2Rpdj4NCjxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4NCjxzY3JpcHQ+DQogICAgIC8vIFTDoGkga2hv4bqjbiBo4bujcCBs4buHDQoNCg0KICAgICAgICAvLyBEYW5oIHPDoWNoIHRo4bunIHRodeG6rXQNCiAgICAgICBsZXQgUFJPQ0VEVVJFUyA9IHt9Ow0KDQphc3luYyBmdW5jdGlvbiBsb2FkUHJvY2VkdXJlcygpIHsNCiAgICB0cnkgew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2NoYXVodXluaDAxMDQvY2hhdWh1eW5oMDEwNC50eHQvcmVmcy9oZWFkcy9tYWluL2NoYXVfdGh1dGh1YXQudHh0Jyk7DQogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpOw0KICAgICAgICBQUk9DRURVUkVTID0gSlNPTi5wYXJzZSh0ZXh0KTsNCiAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgYWxlcnQoJ0tow7RuZyB0aOG7gyB04bqjaSBkYW5oIHPDoWNoIHRo4bunIHRodeG6rXQ6ICcgKyBlcnIubWVzc2FnZSk7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsNCiAgICB9DQp9DQoNCgkJDQoNCiAgICAgICAgLy8gQmnhur9uIHRvw6BuIGPhu6VjDQogICAgICAgIGxldCBlcnJvckxvZyA9IFtdOw0KICAgICAgICBsZXQgY3VycmVudFVzZXIgPSBudWxsOw0KICAgICAgICBsZXQgYWxsUHJvY2VkdXJlcyA9IFtdOw0KDQogICAgICAgIC8vID09PT09PT09PT0gUEjhuqZOIMSQxIJORyBOSOG6rFAgPT09PT09PT09PSAvLw0KICAgYXN5bmMgZnVuY3Rpb24gY2hlY2tTYXZlZExvZ2luKCkgew0KICAgIGNvbnN0IHNhdmVkVXNlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ21lZFVzZXInKTsNCiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGxvYWRBY2NvdW50c0Zyb21UWFQoKTsgLy8gVOG6o2kgZOG7ryBsaeG7h3UgdMOgaSBraG/huqNuIHThu6sgZmlsZSB0eHQNCg0KICAgIGlmIChzYXZlZFVzZXIgJiYgYWNjb3VudHNbc2F2ZWRVc2VyXSkgew0KICAgICAgICBjdXJyZW50VXNlciA9IHNhdmVkVXNlcjsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQ29udGVudCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgIH0NCn0NCg0KICAgICAgICBhc3luYyBmdW5jdGlvbiBjaGVja0xvZ2luKCkgew0KICAgIGNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lSW5wdXQnKS52YWx1ZS50cmltKCk7DQogICAgY29uc3QgcGFzc3dvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpLnZhbHVlLnRyaW0oKTsNCiAgICBjb25zdCBsb2dpbkVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luRXJyb3InKTsNCiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGxvYWRBY2NvdW50c0Zyb21UWFQoKTsgLy8gVOG6o2kgZOG7ryBsaeG7h3UgdMOgaSBraG/huqNuIHThu6sgZmlsZSB0eHQNCg0KICAgIGlmIChhY2NvdW50c1t1c2VybmFtZV0gJiYgYWNjb3VudHNbdXNlcm5hbWVdID09PSBwYXNzd29yZCkgew0KICAgICAgICBjdXJyZW50VXNlciA9IHVzZXJuYW1lOw0KICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdtZWRVc2VyJywgdXNlcm5hbWUpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5TZWN0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5Db250ZW50Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIGxvZ2luRXJyb3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsb2dpbi1wYWdlJyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgbG9naW5FcnJvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICB9DQp9DQoNCiAgICAgICAgZnVuY3Rpb24gbG9nb3V0KCkgew0KICAgICAgICAgICAgY3VycmVudFVzZXIgPSBudWxsOw0KICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbWVkVXNlcicpOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5Db250ZW50Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZUlucHV0JykudmFsdWUgPSAnJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZElucHV0JykudmFsdWUgPSAnJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbkVycm9yJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbG9naW4tcGFnZScpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PSBQSOG6pk4gWOG7rCBMw50gRklMRSA9PT09PT09PT09IC8vDQpmdW5jdGlvbiBoYW5kbGVGaWxlKCkgew0KICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKTsNCiAgICBjb25zdCBhbmFseXplQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuYWx5emVCdG4nKTsNCiAgICBjb25zdCBmaWxlID0gZmlsZUlucHV0LmZpbGVzWzBdOw0KICAgIA0KICAgIGlmICghZmlsZSkgew0KICAgICAgICBhbGVydCgnVnVpIGzDsm5nIGNo4buNbiBmaWxlIHRyxrDhu5tjIGtoaSBraeG7g20gdHJhJyk7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZVJlcXVpcmVtZW50cycpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOw0KICAgIGVycm9yTG9nID0gW107DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdFNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvclNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIGFuYWx5emVCdG4uZGlzYWJsZWQgPSB0cnVlOw0KICAgIGFuYWx5emVCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtc3Bpbm5lciBmYS1zcGluIj48L2k+IMSQYW5nIGtp4buDbSB0cmEuLi4nOw0KICAgIA0KICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgDQogICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpOw0KICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwgeyB0eXBlOiAnYXJyYXknIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAod29ya2Jvb2suU2hlZXROYW1lcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGUgRXhjZWwga2jDtG5nIGPDsyBzaGVldCBuw6BvJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IGZpcnN0U2hlZXQgPSB3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1sxXV07DQogICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbihmaXJzdFNoZWV0LCB7IA0KICAgICAgICAgICAgICAgIGhlYWRlcjogMSwgDQogICAgICAgICAgICAgICAgZGVmdmFsOiAiIiwgDQogICAgICAgICAgICAgICAgYmxhbmtyb3dzOiB0cnVlIA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChqc29uRGF0YS5sZW5ndGggPD0gMSkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlsZSBFeGNlbCBraMO0bmcgY8OzIGThu68gbGnhu4d1IChjaOG7iSBjw7MgdGnDqnUgxJHhu4EgaG/hurdjIHRy4buRbmcpJyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHByb2Nlc3NEYXRhKGpzb25EYXRhKTsNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlUmVxdWlyZW1lbnRzJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7DQogICAgICAgICAgICBsb2dFcnJvcignTOG7l2kga2hpIMSR4buNYyBmaWxlIEV4Y2VsJywgbnVsbCwgZXJyb3IubWVzc2FnZSk7DQogICAgICAgICAgICBkaXNwbGF5RXJyb3JzKCk7DQogICAgICAgICAgICBhbGVydCgnQ8OzIGzhu5dpIHjhuqN5IHJhIGtoaSDEkeG7jWMgZmlsZTogJyArIGVycm9yLm1lc3NhZ2UpOw0KICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgYW5hbHl6ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgYW5hbHl6ZUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1zZWFyY2ggZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IEtp4buDbSBUcmEnOw0KICAgICAgICB9DQogICAgfTsNCiAgICANCiAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZVJlcXVpcmVtZW50cycpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOw0KICAgICAgICBsb2dFcnJvcignTOG7l2kga2hpIMSR4buNYyBmaWxlJywgbnVsbCwgJ0tow7RuZyB0aOG7gyDEkeG7jWMgbuG7mWkgZHVuZyBmaWxlJyk7DQogICAgICAgIGRpc3BsYXlFcnJvcnMoKTsNCiAgICAgICAgYW5hbHl6ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOw0KICAgICAgICBhbmFseXplQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXNlYXJjaCBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gS2nhu4NtIFRyYSc7DQogICAgICAgIGFsZXJ0KCdM4buXaSBraGkgxJHhu41jIGZpbGUuIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSB24bubaSBmaWxlIGtow6FjLicpOw0KICAgIH07DQogICAgDQogICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOw0KfQ0KDQogICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGRhdGEpIHsNCiAgICANCiAgICB0cnkgew0KICAgICAgICBjb25zdCBoZWFkZXJMaW5lMSA9IGRhdGFbN10gfHwgW107DQogICAgICAgIGNvbnN0IGhlYWRlckxpbmUyID0gZGF0YVs4XSB8fCBbXTsNCiAgICAgICAgY29uc3QgY29tYmluZWRIZWFkZXJzID0gaGVhZGVyTGluZTEubWFwKChjb2wsIGluZGV4KSA9PiANCiAgICAgICAgICAgIChjb2wgKyAnICcgKyAoaGVhZGVyTGluZTJbaW5kZXhdIHx8ICcnKSkudHJpbSgpDQogICAgICAgICk7DQoNCiAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc3QgcHJvY2VkdXJlSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiVGjhu6cgdGh14bqtdCIpKTsNCgkJCQljb25zdCBkYXRlSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiTmfDoHkgdGjhu7FjIGhp4buHbiIpKTsgLy8gVGjDqm0gZMOybmcgbsOgeQ0KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiVGjhu51pIGdpYW4gYuG6r3QgxJHhuqd1IHRo4buxYyBoaeG7h24iKSk7DQogICAgICAgICAgICAgICAgY29uc3QgZW5kSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiVGjhu51pIGdpYW4ga+G6v3QgdGjDumMiKSk7DQogICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3JJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJUaOG7pyB0aHXhuq10IGNow61uaCIpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBuYW1lSW5kZXggPSBjb21iaW5lZEhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygiSOG7jSB0w6puIikpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHBhdGllbnRJZEluZGV4ID0gY29tYmluZWRIZWFkZXJzLmZpbmRJbmRleChoID0+IGguaW5jbHVkZXMoIk3DoyBCTiIpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBkb2N0b3JJbmRleCA9IGNvbWJpbmVkSGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCJCw6FjIHPhu7kgY2jhu4kgxJHhu4tuaCIpKTsNCiAgICAgICAgICAgICAgICBjb25zdCBtaXNzaW5nQ29sdW1ucyA9IFtdOw0KICAgICAgICAgICAgICAgIGlmIChwcm9jZWR1cmVJbmRleCA9PT0gLTEpIG1pc3NpbmdDb2x1bW5zLnB1c2goJ1Ro4bunIHRodeG6rXQnKTsNCiAgICAgICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA9PT0gLTEpIG1pc3NpbmdDb2x1bW5zLnB1c2goJ1Ro4budaSBnaWFuIGLhuq90IMSR4bqndSB0aOG7sWMgaGnhu4duJyk7DQogICAgICAgICAgICAgICAgaWYgKGVuZEluZGV4ID09PSAtMSkgbWlzc2luZ0NvbHVtbnMucHVzaCgnVGjhu51pIGdpYW4ga+G6v3QgdGjDumMnKTsNCiAgICAgICAgICAgICAgICBpZiAob3BlcmF0b3JJbmRleCA9PT0gLTEpIG1pc3NpbmdDb2x1bW5zLnB1c2goJ1Ro4bunIHRodeG6rXQgY2jDrW5oJyk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKG1pc3NpbmdDb2x1bW5zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLaMO0bmcgdMOsbSB0aOG6pXkgY8OhYyBj4buZdCBi4bqvdCBideG7mWM6ICR7bWlzc2luZ0NvbHVtbnMuam9pbignLCAnKX1gKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc3Qgcm93cyA9IGRhdGEuc2xpY2UoOSk7DQogICAgICAgICAgICAgICAgY29uc3QgcHJvY2VkdXJlcyA9IFtdOw0KICAgICAgICAgICAgICAgIGNvbnN0IGhlcmJQcm9jZWR1cmVzID0gW107DQogICAgICAgICAgICAgICAgbGV0IHNraXBwZWRSb3dzID0gMDsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICByb3dzLmZvckVhY2goKHJvdywgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm93TnVtYmVyID0gaW5kZXggKyAxMDsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvdyB8fCByb3cubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3IoJ0TDsm5nIHRy4buRbmcnLCByb3dOdW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRSb3dzKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZWR1cmVOYW1lID0gcm93W3Byb2NlZHVyZUluZGV4XTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9jZWR1cmVOYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZFJvd3MrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghUFJPQ0VEVVJFU1twcm9jZWR1cmVOYW1lXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yKGBUaOG7pyB0aHXhuq10IGtow7RuZyBu4bqxbSB0cm9uZyBkYW5oIHPDoWNoIGtp4buDbSB0cmE6ICR7cHJvY2VkdXJlTmFtZX1gLCByb3dOdW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRSb3dzKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoUFJPQ0VEVVJFU1twcm9jZWR1cmVOYW1lXS5za2lwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBwYXJzZURhdGVUaW1lKHJvd1tzdGFydEluZGV4XSwgcm93TnVtYmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBwYXJzZURhdGVUaW1lKHJvd1tlbmRJbmRleF0sIHJvd051bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVyYlByb2NlZHVyZXMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd0luZGV4OiByb3dOdW1iZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRpZW50SWQ6IHBhdGllbnRJZEluZGV4ICE9PSAtMSA/IHJvd1twYXRpZW50SWRJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmU6IHByb2NlZHVyZU5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3Rvcjogcm93W2RvY3RvckluZGV4XSB8fCAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IHN0YXJ0Py5kYXRlS2V5IHx8ICdLaMO0bmcgeMOhYyDEkeG7i25oJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0Py5zZWNvbmRzIHx8IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZW5kPy5zZWNvbmRzIHx8IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTdGFydDogc3RhcnQ/LmRpc3BsYXlUaW1lIHx8ICc/PycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlFbmQ6IGVuZD8uZGlzcGxheVRpbWUgfHwgJz8/JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3I6IHJvd1tvcGVyYXRvckluZGV4XSB8fCAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2NlZHVyZUluZm86IFBST0NFRFVSRVNbcHJvY2VkdXJlTmFtZV0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcGFyc2VEYXRlVGltZShyb3dbc3RhcnRJbmRleF0sIHJvd051bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBwYXJzZURhdGVUaW1lKHJvd1tlbmRJbmRleF0sIHJvd051bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgew0KICAgDQogICAgc2tpcHBlZFJvd3MrKzsNCiAgICByZXR1cm47DQp9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydC5kYXRlS2V5ICE9PSBlbmQuZGF0ZUtleSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yKCdUaOG7pyB0aHXhuq10IGLhuq90IMSR4bqndSB2w6Aga+G6v3QgdGjDumMga2jDoWMgbmfDoHknLCByb3dOdW1iZXIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnREYXRlOiBzdGFydC5kYXRlS2V5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiBlbmQuZGF0ZUtleSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudE5hbWU6IG5hbWVJbmRleCAhPT0gLTEgPyByb3dbbmFtZUluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2NlZHVyZTogcHJvY2VkdXJlTmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRSb3dzKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kLnNlY29uZHMgPD0gc3RhcnQuc2Vjb25kcykgew0KICAgIGxvZ0Vycm9yKCdUaOG7nWkgZ2lhbiBr4bq/dCB0aMO6YyBwaOG6o2kgc2F1IHRo4budaSBnaWFuIGLhuq90IMSR4bqndScsIHJvd051bWJlciwgew0KICAgICAgICBzdGFydFRpbWU6IHN0YXJ0LmRpc3BsYXlUaW1lLA0KICAgICAgICBlbmRUaW1lOiBlbmQuZGlzcGxheVRpbWUsDQogICAgICAgIHN0YXJ0VmFsdWU6IHJvd1tzdGFydEluZGV4XSwNCiAgICAgICAgZW5kVmFsdWU6IHJvd1tlbmRJbmRleF0sDQogICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICBwcm9jZWR1cmU6IHByb2NlZHVyZU5hbWUsDQogICAgICAgIG5nYXlUaHVjSGllbjogZGF0ZUluZGV4ICE9PSAtMSA/IHJvd1tkYXRlSW5kZXhdIDogJ0tow7RuZyB4w6FjIMSR4buLbmgnDQogICAgfSk7DQogICAgc2tpcHBlZFJvd3MrKzsNCiAgICByZXR1cm47DQp9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkRHVyYXRpb24gPSBQUk9DRURVUkVTW3Byb2NlZHVyZU5hbWVdPy5kdXJhdGlvbiB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsRHVyYXRpb25NaW51dGVzID0gKGVuZC5zZWNvbmRzIC0gc3RhcnQuc2Vjb25kcykgLyA2MDsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KaWYgKGV4cGVjdGVkRHVyYXRpb24gPiAwICYmIE1hdGguYWJzKGFjdHVhbER1cmF0aW9uTWludXRlcyAtIGV4cGVjdGVkRHVyYXRpb24pID4gMSkgew0KICAgIGxvZ0Vycm9yKGBgLCByb3dOdW1iZXIsIHsNCiAgICAgICAgcHJvY2VkdXJlOiBwcm9jZWR1cmVOYW1lLA0KICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWREdXJhdGlvbiwNCiAgICAgICAgYWN0dWFsOiBhY3R1YWxEdXJhdGlvbk1pbnV0ZXMsDQogICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICBvcGVyYXRvcjogcm93W29wZXJhdG9ySW5kZXhdID8gcm93W29wZXJhdG9ySW5kZXhdLnJlcGxhY2UoLywvZywgJycpIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICBkYXRlOiBzdGFydC5kYXRlS2V5LA0KICAgICAgICBuZ2F5VGh1Y0hpZW46IGRhdGVJbmRleCAhPT0gLTEgPyByb3dbZGF0ZUluZGV4XSA6ICdLaMO0bmcgeMOhYyDEkeG7i25oJywNCiAgICAgICAgc3RhcnRUaW1lOiBzdGFydC5kaXNwbGF5VGltZSwNCiAgICAgICAgZW5kVGltZTogZW5kLmRpc3BsYXlUaW1lLA0KICAgICAgICBkb2N0b3I6IHJvd1tkb2N0b3JJbmRleF0gfHwgJ0tow7RuZyBjw7MnIC8vIFRow6ptIGTDsm5nIG7DoHkNCiAgICB9KTsNCn0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2VkdXJlTmFtZSA9PT0gJ1Phuq9jIHRodeG7kWMgdGhhbmcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVyYlByb2NlZHVyZXMucHVzaChwcm9jZWR1cmVzW3Byb2NlZHVyZXMubGVuZ3RoIC0gMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dJbmRleDogcm93TnVtYmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnROYW1lOiBuYW1lSW5kZXggIT09IC0xID8gcm93W25hbWVJbmRleF0gfHwgJ0tow7RuZyBjw7MnIDogJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnRJZDogcGF0aWVudElkSW5kZXggIT09IC0xID8gcm93W3BhdGllbnRJZEluZGV4XSB8fCAnS2jDtG5nIGPDsycgOiAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlOiBwcm9jZWR1cmVOYW1lLA0KCQkJCQkJCWRvY3Rvcjogcm93W2RvY3RvckluZGV4XSB8fCAnS2jDtG5nIGPDsycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogc3RhcnQuZGF0ZUtleSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQuc2Vjb25kcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGVuZC5zZWNvbmRzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTdGFydDogc3RhcnQuZGlzcGxheVRpbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUVuZDogZW5kLmRpc3BsYXlUaW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiByb3dbb3BlcmF0b3JJbmRleF0gfHwgJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0OiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25mbGljdFJlYXNvbjogJycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlSW5mbzogUFJPQ0VEVVJFU1twcm9jZWR1cmVOYW1lXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uOiAnJw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvcihgTOG7l2kgeOG7rSBsw70gZMOybmc6ICR7ZXJyb3IubWVzc2FnZX1gLCByb3dOdW1iZXIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRpZW50TmFtZTogbmFtZUluZGV4ICE9PSAtMSA/IHJvd1tuYW1lSW5kZXhdIHx8ICdLaMO0bmcgY8OzJyA6ICdLaMO0bmcgY8OzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmU6IHJvd1twcm9jZWR1cmVJbmRleF0gfHwgJ0tow7RuZyBjw7MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yRGV0YWlsczogZXJyb3Iuc3RhY2sNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZFJvd3MrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChwcm9jZWR1cmVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0tow7RuZyBjw7MgdGjhu6cgdGh14bqtdCBuw6BvIGjhu6NwIGzhu4cgxJHhu4Mga2nhu4NtIHRyYS4gVnVpIGzDsm5nIGtp4buDbSB0cmEgbOG6oWkgZOG7ryBsaeG7h3UuJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNoZWNrQ29uZmxpY3RzKHByb2NlZHVyZXMpOw0KICAgICAgICAgICAgICAgIGdlbmVyYXRlVGltZVN1Z2dlc3Rpb25zKHByb2NlZHVyZXMpOw0KICAgICAgICAgICAgICAgIGRpc3BsYXlSZXN1bHRzKHByb2NlZHVyZXMsIHNraXBwZWRSb3dzKTsNCiAgICAgICAgICAgICAgICB3aW5kb3cuYWxsSGVyYlByb2NlZHVyZXMgPSBoZXJiUHJvY2VkdXJlczsNCiAgICAgICAgICAgICAgICBkaXNwbGF5RXJyb3JzKCk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgIGxvZ0Vycm9yKGVycm9yLm1lc3NhZ2UsIG51bGwsIGVycm9yLnN0YWNrKTsNCiAgICAgICAgICAgICAgICBkaXNwbGF5RXJyb3JzKCk7DQogICAgICAgICAgICAgICAgYWxlcnQoJ0PDsyBs4buXaSB44bqjeSByYSBraGkgeOG7rSBsw70gZOG7ryBsaeG7h3U6ICcgKyBlcnJvci5tZXNzYWdlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQoNCmxldCBjb25mbGljdFJ1bGVzVGV4dCA9ICcnOw0KDQphc3luYyBmdW5jdGlvbiBsb2FkQ29uZmxpY3RSdWxlcygpIHsNCiAgICB0cnkgew0KICAgICAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2NoYXVodXluaDAxMDQvY2hhdWh1eW5oMDEwNC50eHQvcmVmcy9oZWFkcy9tYWluL2NoYXVfeGx0aHV0aHVhdC50eHQ/dHM9JyArIERhdGUubm93KCk7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7DQogICAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ0tow7RuZyB04bqjaSDEkcaw4bujYyBjaGF1X3hsdGh1dGh1YXQudHh0Jyk7DQogICAgICAgIGNvbmZsaWN0UnVsZXNUZXh0ID0gKGF3YWl0IHJlcy50ZXh0KCkpLnRyaW0oKTsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0zhu5dpIHThuqNpIGNoYXVfeGx0aHV0aHVhdC50eHQ6JywgZSk7DQogICAgICAgIGNvbmZsaWN0UnVsZXNUZXh0ID0gJyc7IC8vIGZhbGxiYWNrOiBy4buXbmcgLT4gY29pIG5oxrAga2jDtG5nIGPDsyBuZ2/huqFpIGzhu4cNCiAgICB9DQp9DQoNCg0KDQoNCiAgICAgICAgZnVuY3Rpb24gY2hlY2tDb25mbGljdHMocHJvY2VkdXJlcykgew0KICAgICAgICAgICAgY29uc3QgaWdub3JlQWRqYWNlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWdub3JlQWRqYWNlbnRDaGVja2JveCcpLmNoZWNrZWQ7DQogICAgICAgICAgICBjb25zdCBncm91cHMgPSB7fTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcHJvY2VkdXJlcy5mb3JFYWNoKHByb2MgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke3Byb2Mub3BlcmF0b3J9XyR7cHJvYy5kYXRlfWA7DQogICAgICAgICAgICAgICAgaWYgKCFncm91cHNba2V5XSkgew0KICAgICAgICAgICAgICAgICAgICBncm91cHNba2V5XSA9IFtdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBncm91cHNba2V5XS5wdXNoKHByb2MpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoZ3JvdXBzKS5mb3JFYWNoKGdyb3VwID0+IHsNCiAgICAgICAgICAgICAgICBncm91cC5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBncm91cC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2ID0gZ3JvdXBbaSAtIDFdOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gZ3JvdXBbaV07DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZFbmRXaXRoQnVmZmVyID0gcHJldi5lbmQgKyAocHJldi5wcm9jZWR1cmVJbmZvPy5idWZmZXIgfHwgMCkgKiA2MDsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWRqYWNlbnQgPSBpZ25vcmVBZGphY2VudCAmJiBjdXJyZW50LnN0YXJ0ID09PSBwcmV2LmVuZDsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LnN0YXJ0IDwgcHJldkVuZFdpdGhCdWZmZXIgJiYgIWlzQWRqYWNlbnQpIHsNCiAgICAgICAgICAgICAgICAgDQoNCmxldCBpc0NvbmZsaWN0ID0gdHJ1ZTsNCiAgICB0cnkgew0KICAgICAgICBpZiAoY29uZmxpY3RSdWxlc1RleHQgJiYgY29uZmxpY3RSdWxlc1RleHQudHJpbSgpKSB7DQogICAgICAgICAgICBjb25zdCBjb25mbGljdENvbmRpdGlvbiA9IG5ldyBGdW5jdGlvbigncHJldicsJ2N1cnJlbnQnLCdyZXR1cm4gJyArIGNvbmZsaWN0UnVsZXNUZXh0LnRyaW0oKSk7DQogICAgICAgICAgICAvLyBjb25mbGljdENvbmRpdGlvbigpIFRS4bqiIFbhu4AgdHJ1ZSBu4bq/dSAqxJHGsOG7o2MgbWnhu4VuIHh1bmcgxJHhu5l0Kg0KICAgICAgICAgICAgY29uc3QgYWxsb3dlZCA9IGNvbmZsaWN0Q29uZGl0aW9uKHByZXYsIGN1cnJlbnQpOw0KICAgICAgICAgICAgaXNDb25mbGljdCA9ICFhbGxvd2VkOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaXNDb25mbGljdCA9IHRydWU7IC8vIGtow7RuZyBjw7MgcnVsZSAtPiBj4bupIGLDoW8geHVuZyDEkeG7mXQNCiAgICAgICAgfQ0KICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCdM4buXaSBraGkgxJHDoW5oIGdpw6EgeHVuZyDEkeG7mXQgdGjhu51pIGdpYW46JywgZXJyKTsNCiAgICAgICAgaXNDb25mbGljdCA9IHRydWU7DQogICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDb25mbGljdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuY29uZmxpY3QgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuY29uZmxpY3RSZWFzb24gPSBgJHtwcmV2LnByb2NlZHVyZX08YnI+4oCiIELhu4duaCBuaMOibjogJHtwcmV2LnBhdGllbnROYW1lfTxicj7igKIgTmfDoHk6ICR7cHJldi5kYXRlfTxicj7igKIgVGjhu51pIGdpYW46ICR7cHJldi5kaXNwbGF5U3RhcnR9LSR7cHJldi5kaXNwbGF5RW5kfWA7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2LmNvbmZsaWN0ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXYuY29uZmxpY3RSZWFzb24uaW5jbHVkZXMoY3VycmVudC5wcm9jZWR1cmUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXYuY29uZmxpY3RSZWFzb24gKz0gKHByZXYuY29uZmxpY3RSZWFzb24gPyAnPGJyPjxicj4nIDogJycpICsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgICR7Y3VycmVudC5wcm9jZWR1cmV9PGJyPuKAoiBC4buHbmggbmjDom46ICR7Y3VycmVudC5wYXRpZW50TmFtZX08YnI+4oCiIE5nw6B5OiAke2N1cnJlbnQuZGF0ZX08YnI+4oCiIFRo4budaSBnaWFuOiAke2N1cnJlbnQuZGlzcGxheVN0YXJ0fS0ke2N1cnJlbnQuZGlzcGxheUVuZH1gOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCmZ1bmN0aW9uIGdlbmVyYXRlVGltZVN1Z2dlc3Rpb25zKHByb2NlZHVyZXMpIHsNCiAgICBjb25zdCB0aW1lT3B0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0idGltZU9wdGlvbiJdOmNoZWNrZWQnKS52YWx1ZTsNCiAgICBjb25zdCBzdGFydEhvdXIgPSB0aW1lT3B0aW9uID09PSAnNzozMCcgPyA3LjUgOiA3Ow0KICAgIGNvbnN0IGlnbm9yZUFkamFjZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lnbm9yZUFkamFjZW50Q2hlY2tib3gnKS5jaGVja2VkOw0KICAgIGNvbnN0IGJ1ZmZlck1pbnV0ZXMgPSBpZ25vcmVBZGphY2VudCA/IDAgOiAxOw0KICAgIGNvbnN0IHNob3dNb3JlU3VnZ2VzdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hvd01vcmVTdWdnZXN0aW9uc0NoZWNrYm94JykuY2hlY2tlZDsNCiAgICANCiAgICAvLyBT4buRIGtodW5nIGdp4budIHThu5FpIMSRYSBt4buXaSBideG7lWkgKG7hur91IGNo4buNbiA2IGtodW5nIHRow6wgMyBzw6FuZyArIDMgY2hp4buBdSkNCiAgICBjb25zdCBtYXhNb3JuaW5nID0gc2hvd01vcmVTdWdnZXN0aW9ucyA/IDMgOiAyOw0KICAgIGNvbnN0IG1heEFmdGVybm9vbiA9IHNob3dNb3JlU3VnZ2VzdGlvbnMgPyAzIDogMTsNCg0KICAgIHByb2NlZHVyZXMuZm9yRWFjaChwcm9jID0+IHsNCiAgICAgICAgaWYgKCFwcm9jLmNvbmZsaWN0KSByZXR1cm47DQoNCiAgICAgICAgY29uc3Qgc2FtZURheVByb2NlZHVyZXMgPSBwcm9jZWR1cmVzLmZpbHRlcihwID0+IA0KICAgICAgICAgICAgcC5kYXRlID09PSBwcm9jLmRhdGUgJiYgDQogICAgICAgICAgICBwLm9wZXJhdG9yID09PSBwcm9jLm9wZXJhdG9yICYmDQogICAgICAgICAgICBwLnJvd0luZGV4ICE9PSBwcm9jLnJvd0luZGV4DQogICAgICAgICk7DQoNCiAgICAgICAgY29uc3QgZHVyYXRpb25TZWNvbmRzID0gcHJvYy5lbmQgLSBwcm9jLnN0YXJ0ICsgKGJ1ZmZlck1pbnV0ZXMgKiA2MCk7DQogICAgICAgIA0KICAgICAgICAvLyBUw6xtIGtodW5nIGdp4budIGJ14buVaSBzw6FuZw0KICAgICAgICBjb25zdCBtb3JuaW5nU2xvdHMgPSBmaW5kQXZhaWxhYmxlU2xvdHMoDQogICAgICAgICAgICBzdGFydEhvdXIgKiAzNjAwLCANCiAgICAgICAgICAgIDExLjUgKiAzNjAwLCANCiAgICAgICAgICAgIGR1cmF0aW9uU2Vjb25kcywgDQogICAgICAgICAgICBzYW1lRGF5UHJvY2VkdXJlcywgDQogICAgICAgICAgICBtYXhNb3JuaW5nDQogICAgICAgICk7DQogICAgICAgIA0KICAgICAgICAvLyBUw6xtIGtodW5nIGdp4budIGJ14buVaSBjaGnhu4F1DQogICAgICAgIGNvbnN0IGFmdGVybm9vblNsb3RzID0gZmluZEF2YWlsYWJsZVNsb3RzKA0KICAgICAgICAgICAgMTMuNSAqIDM2MDAsIA0KICAgICAgICAgICAgMTcgKiAzNjAwLCANCiAgICAgICAgICAgIGR1cmF0aW9uU2Vjb25kcywgDQogICAgICAgICAgICBzYW1lRGF5UHJvY2VkdXJlcywgDQogICAgICAgICAgICBtYXhBZnRlcm5vb24NCiAgICAgICAgKTsNCg0KICAgICAgICAvLyBGb3JtYXQga+G6v3QgcXXhuqMNCiAgICAgICAgbGV0IHN1Z2dlc3Rpb25zID0gW107DQogICAgICAgIGlmIChtb3JuaW5nU2xvdHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnPHN0cm9uZz5Tw6FuZzo8L3N0cm9uZz48YnI+JyArIA0KICAgICAgICAgICAgICAgIG1vcm5pbmdTbG90cy5tYXAoc2xvdCA9PiBgJHtzbG90LnN0YXJ0fSAtICR7c2xvdC5lbmR9YCkuam9pbignPGJyPicpKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYWZ0ZXJub29uU2xvdHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnPHN0cm9uZz5DaGnhu4F1Ojwvc3Ryb25nPjxicj4nICsgDQogICAgICAgICAgICAgICAgYWZ0ZXJub29uU2xvdHMubWFwKHNsb3QgPT4gYCR7c2xvdC5zdGFydH0gLSAke3Nsb3QuZW5kfWApLmpvaW4oJzxicj4nKSk7DQogICAgICAgIH0NCg0KICAgICAgICANCmlmIChtb3JuaW5nU2xvdHMubGVuZ3RoICsgYWZ0ZXJub29uU2xvdHMubGVuZ3RoID4gMCkgew0KICAgIGNvbnN0IGZpcnN0U2xvdCA9IG1vcm5pbmdTbG90c1swXSB8fCBhZnRlcm5vb25TbG90c1swXTsNCiAgICBjb25zdCBzbWFydEhpbnQgPSBgPGJyPjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6NnB4O2NvbG9yOiMwMDc5NmI7Zm9udC13ZWlnaHQ6NjAwIj4NCiAgICDwn5GJIEfhu6NpIMO9OiBE4budaSB04burIDx1PiR7cHJvYy5kaXNwbGF5U3RhcnR9PC91PiDihpIgPHU+JHtmaXJzdFNsb3Quc3RhcnR9PC91Pg0KICAgIDwvZGl2PmA7DQoNCiAgICBwcm9jLnN1Z2dlc3Rpb24gPSBzdWdnZXN0aW9ucy5qb2luKCc8YnI+JykgKyBzbWFydEhpbnQ7DQp9IGVsc2Ugew0KICAgIHByb2Muc3VnZ2VzdGlvbiA9ICc8c3BhbiBjbGFzcz0ibm8tc3VnZ2VzdGlvbiI+S2jDtG5nIGPDsyBraHVuZyBnaeG7nSB0cuG7kW5nPC9zcGFuPic7DQp9DQoNCiAgICB9KTsNCn0NCi8vIEjDoG0ga2nhu4NtIHRyYSB4dW5nIMSR4buZdCB0aOG7nWkgZ2lhbg0KZnVuY3Rpb24gaGFzVGltZUNvbmZsaWN0KHN0YXJ0VGltZSwgZHVyYXRpb24sIHByb2NlZHVyZXMpIHsNCiAgICBjb25zdCBlbmRUaW1lID0gc3RhcnRUaW1lICsgZHVyYXRpb247DQogICAgDQogICAgZm9yIChjb25zdCBwcm9jIG9mIHByb2NlZHVyZXMpIHsNCiAgICAgICAgY29uc3QgcHJvY1N0YXJ0ID0gcHJvYy5zdGFydDsNCiAgICAgICAgY29uc3QgcHJvY0VuZCA9IHByb2MuZW5kICsgKHByb2MucHJvY2VkdXJlSW5mbz8uYnVmZmVyIHx8IDApICogNjA7DQogICAgICAgIA0KICAgICAgICBpZiAoKHN0YXJ0VGltZSA+PSBwcm9jU3RhcnQgJiYgc3RhcnRUaW1lIDwgcHJvY0VuZCkgfHwgDQogICAgICAgICAgICAoZW5kVGltZSA+IHByb2NTdGFydCAmJiBlbmRUaW1lIDw9IHByb2NFbmQpIHx8DQogICAgICAgICAgICAoc3RhcnRUaW1lIDw9IHByb2NTdGFydCAmJiBlbmRUaW1lID49IHByb2NFbmQpKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICByZXR1cm4gZmFsc2U7DQp9DQovLyBIw6BtIHTDrG0ga2h1bmcgZ2nhu50gdHLhu5FuZw0KZnVuY3Rpb24gZmluZEF2YWlsYWJsZVNsb3RzKHN0YXJ0VGltZSwgZW5kVGltZSwgZHVyYXRpb24sIHByb2NlZHVyZXMsIG1heFNsb3RzKSB7DQogICAgY29uc3Qgc2xvdHMgPSBbXTsNCiAgICBsZXQgY3VycmVudFRpbWUgPSBzdGFydFRpbWU7DQogICAgY29uc3QgaWdub3JlQWRqYWNlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWdub3JlQWRqYWNlbnRDaGVja2JveCcpLmNoZWNrZWQ7DQogICAgY29uc3QgYnVmZmVyTWludXRlcyA9IGlnbm9yZUFkamFjZW50ID8gMCA6IDE7DQogICAgDQogICAgd2hpbGUgKGN1cnJlbnRUaW1lICsgZHVyYXRpb24gPD0gZW5kVGltZSAmJiBzbG90cy5sZW5ndGggPCBtYXhTbG90cykgew0KICAgICAgICBpZiAoIWhhc1RpbWVDb25mbGljdChjdXJyZW50VGltZSwgZHVyYXRpb24sIHByb2NlZHVyZXMpKSB7DQogICAgICAgICAgICBzbG90cy5wdXNoKHsNCiAgICAgICAgICAgICAgICBzdGFydDogc2Vjb25kc1RvVGltZVN0cihjdXJyZW50VGltZSksDQogICAgICAgICAgICAgICAgZW5kOiBzZWNvbmRzVG9UaW1lU3RyKGN1cnJlbnRUaW1lICsgKGR1cmF0aW9uIC0gKGJ1ZmZlck1pbnV0ZXMgKiA2MCkpKSAvLyBUcuG7qyBidWZmZXIgxJHhu4MgaGnhu4NuIHRo4buLDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBjdXJyZW50VGltZSArPSAxNSAqIDYwOyAvLyBLaeG7g20gdHJhIG3hu5dpIDE1IHBow7p0DQogICAgfQ0KICAgIA0KICAgIHJldHVybiBzbG90czsNCn0NCg0KICAgICAgICBmdW5jdGlvbiBzZWNvbmRzVG9UaW1lU3RyKHNlY29uZHMpIHsNCiAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7DQogICAgICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApOw0KICAgICAgICAgICAgcmV0dXJuIGAke2hvdXJzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHttaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gOw0KICAgICAgICB9DQoNCiAgICAgICBmdW5jdGlvbiBkaXNwbGF5UmVzdWx0cyhwcm9jZWR1cmVzLCBza2lwcGVkUm93cyA9IDApIHsNCiAgICBhbGxQcm9jZWR1cmVzID0gcHJvY2VkdXJlczsNCiAgICANCiAgICBjb25zdCBvcGVyYXRvcnMgPSBbLi4ubmV3IFNldChwcm9jZWR1cmVzLm1hcChwID0+IHAub3BlcmF0b3IpKV07DQogICAgY29uc3Qgb3BlcmF0b3JTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JTZWxlY3QnKTsNCiAgICBjb25zdCBvcGVyYXRvclNlbGVjdEVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yU2VsZWN0RXJyb3InKTsNCiAgICANCiAgICBvcGVyYXRvclNlbGVjdC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjPC9vcHRpb24+JyArIA0KICAgICAgICBvcGVyYXRvcnMubWFwKG9wID0+IGA8b3B0aW9uIHZhbHVlPSIke29wfSI+JHtvcC5yZXBsYWNlKC8sL2csICcnKX08L29wdGlvbj5gKS5qb2luKCcnKTsNCiAgICANCiAgICBvcGVyYXRvclNlbGVjdEVycm9yLmlubmVySFRNTCA9IG9wZXJhdG9yU2VsZWN0LmlubmVySFRNTDsgLy8gxJDhu5NuZyBi4buZIG7hu5lpIGR1bmcNCiAgICANCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JGaWx0ZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JGaWx0ZXJFcnJvcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjb25zdCBjb25mbGljdFByb2NlZHVyZXMgPSBwcm9jZWR1cmVzLmZpbHRlcihwID0+IHAuY29uZmxpY3QpOw0KICAgICAgICAgICAgY29uc3QgY29uZmxpY3RDb3VudCA9IGNvbmZsaWN0UHJvY2VkdXJlcy5sZW5ndGg7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdW1tYXJ5JykuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgIDxwPlThu5VuZyBz4buRIGTDsm5nIMSRw6MgeOG7rSBsw706IDxzdHJvbmc+JHtwcm9jZWR1cmVzLmxlbmd0aCArIHNraXBwZWRSb3dzfTwvc3Ryb25nPiANCiAgICAgICAgICAgICAgICAgIHx8IFPhu5EgZMOybmcgY8OzIHh1bmcgxJHhu5l0OiA8c3Ryb25nPiR7Y29uZmxpY3RDb3VudH08L3N0cm9uZz48L3A+IDxici8+DQogICAgICAgICAgICAgICANCiAgICAgICAgICAgIGA7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZpbHRlckJ5T3BlcmF0b3IoKTsNCiAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0U2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgIA0KICAgIC8vIE7hur91IGtow7RuZyBjw7MgbOG7l2ksIGN14buZbiB4deG7kW5nIHBo4bqnbiBr4bq/dCBxdeG6ow0KICAgIGlmIChlcnJvckxvZy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICBjb25zdCByZXN1bHRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdFNlY3Rpb24nKTsNCiAgICAgICAgICAgIGlmIChyZXN1bHRTZWN0aW9uKSB7DQogICAgICAgICAgICAgICAgc21vb3RoU2Nyb2xsVG8ocmVzdWx0U2VjdGlvbiwgLTQwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwgMzAwKTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGZpbHRlckJ5T3BlcmF0b3IoKSB7DQogICAgY29uc3Qgb3BlcmF0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JTZWxlY3QnKS52YWx1ZTsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JTZWxlY3RFcnJvcicpLnZhbHVlID0gb3BlcmF0b3I7IC8vIMSQ4buTbmcgYuG7mSBnacOhIHRy4buLIGRyb3Bkb3duIGzhu5dpDQogY29uc3Qgc2hvd0RvY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93RG9jdG9yQ2hlY2tib3gnKS5jaGVja2VkOw0KICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdy1kb2N0b3InLCBzaG93RG9jdG9yKTsNCiAgICAvLyA9PT09PSAxLiBM4buMQyBWw4AgSEnhu4JOIFRI4buKIELhuqJORyBL4bq+VCBRVeG6oiBLSeG7gk0gVFJBIFhVTkcgxJDhu5hUID09PT09DQogICAgY29uc3QgZmlsdGVyZWRQcm9jZWR1cmVzID0gb3BlcmF0b3IgPT09ICdhbGwnIA0KICAgICAgICA/IGFsbFByb2NlZHVyZXMuZmlsdGVyKHAgPT4gcC5jb25mbGljdCkgDQogICAgICAgIDogYWxsUHJvY2VkdXJlcy5maWx0ZXIocCA9PiBwLm9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpID09PSBvcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKSAmJiBwLmNvbmZsaWN0KTsNCg0KICAgIGNvbnN0IHJlc3VsdEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0Qm9keScpOw0KICAgIHJlc3VsdEJvZHkuaW5uZXJIVE1MID0gJyc7DQoNCiAgICAvLyBOaMOzbSBjw6FjIHRo4bunIHRodeG6rXQgeHVuZyDEkeG7mXQgduG7m2kgbmhhdQ0KICAgIGNvbnN0IGNvbmZsaWN0R3JvdXBzID0gW107DQogICAgY29uc3QgcHJvY2Vzc2VkUm93cyA9IG5ldyBTZXQoKTsNCg0KICAgIGZpbHRlcmVkUHJvY2VkdXJlcy5mb3JFYWNoKHByb2MgPT4gew0KICAgICAgICBpZiAoIXByb2Nlc3NlZFJvd3MuaGFzKHByb2Mucm93SW5kZXgpKSB7DQogICAgICAgICAgICBjb25zdCBncm91cCA9IFtwcm9jXTsNCiAgICAgICAgICAgIHByb2Nlc3NlZFJvd3MuYWRkKHByb2Mucm93SW5kZXgpOw0KDQogICAgICAgICAgICAvLyBUw6xtIHRo4bunIHRodeG6rXQgbGnDqm4gcXVhbiB0cm9uZyB4dW5nIMSR4buZdA0KICAgICAgICAgICAgaWYgKHByb2MuY29uZmxpY3RSZWFzb24pIHsNCiAgICAgICAgICAgICAgICBjb25zdCBjb25mbGljdE1hdGNoZXMgPSBwcm9jLmNvbmZsaWN0UmVhc29uLm1hdGNoKC9C4buHbmggbmjDom46ICguKj8pPGJyPuKAoiBOZ8OgeTogKC4qPyk8YnI+4oCiIFRo4budaSBnaWFuOiAoLio/KS0vZyk7DQogICAgICAgICAgICAgICAgaWYgKGNvbmZsaWN0TWF0Y2hlcykgew0KICAgICAgICAgICAgICAgICAgICBjb25mbGljdE1hdGNoZXMuZm9yRWFjaChtYXRjaCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRpZW50TmFtZSA9IG1hdGNoLm1hdGNoKC9C4buHbmggbmjDom46ICguKj8pPGJyPi8pWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG1hdGNoLm1hdGNoKC9OZ8OgeTogKC4qPyk8YnI+LylbMV07DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gbWF0Y2gubWF0Y2goL1Ro4budaSBnaWFuOiAoLio/KS0vKVsxXTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmxpY3RQcm9jID0gZmlsdGVyZWRQcm9jZWR1cmVzLmZpbmQocCA9PiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnBhdGllbnROYW1lID09PSBwYXRpZW50TmFtZSAmJiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRhdGUgPT09IGRhdGUgJiYgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5kaXNwbGF5U3RhcnQgPT09IHRpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhcHJvY2Vzc2VkUm93cy5oYXMocC5yb3dJbmRleCkNCiAgICAgICAgICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25mbGljdFByb2MpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cC5wdXNoKGNvbmZsaWN0UHJvYyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkUm93cy5hZGQoY29uZmxpY3RQcm9jLnJvd0luZGV4KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uZmxpY3RHcm91cHMucHVzaChncm91cCk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vIEhp4buDbiB0aOG7iyBr4bq/dCBxdeG6ow0KICAgIGNvbmZsaWN0R3JvdXBzLmZvckVhY2goZ3JvdXAgPT4gew0KICAgICAgICBncm91cC5mb3JFYWNoKHByb2MgPT4gew0KICAgICAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgnY29uZmxpY3Qtcm93Jyk7DQogICAgICAgICAgICByb3cuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgIDx0ZD4ke3Byb2MucGF0aWVudE5hbWV9IDxici8+ICR7cHJvYy5wYXRpZW50SWR9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtwcm9jLnByb2NlZHVyZX08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD48Y2VudGVyPiR7cHJvYy5kYXRlfTxici8+JHtwcm9jLmRpc3BsYXlTdGFydH0gLSAke3Byb2MuZGlzcGxheUVuZH08L2NlbnRlcj48L3RkPg0KCQkJCSAgPHRkIGNsYXNzPSJkb2N0b3ItY29sdW1uIj4ke3Byb2MuZG9jdG9yfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7cHJvYy5vcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKX08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0idGltZS1zdWdnZXN0aW9uIj4ke3Byb2Muc3VnZ2VzdGlvbiB8fCAnS2jDtG5nIGPDsyB4dW5nIMSR4buZdCd9PC90ZD4NCiAgICAgICAgICAgIGA7DQogICAgICAgICAgICByZXN1bHRCb2R5LmFwcGVuZENoaWxkKHJvdyk7DQogICAgICAgIH0pOw0KDQogICAgICAgIC8vIFRow6ptIGTDsm5nIHBow6JuIGPDoWNoDQogICAgICAgIGlmIChncm91cC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgICAgICAgc2VwYXJhdG9yLmlubmVySFRNTCA9ICc8dGQgY29sc3Bhbj0iOCIgY2xhc3M9Imdyb3VwLXNlcGFyYXRvciI+PC90ZD4nOw0KICAgICAgICAgICAgcmVzdWx0Qm9keS5hcHBlbmRDaGlsZChzZXBhcmF0b3IpOw0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICAvLyA9PT09PSAyLiBM4buMQyBWw4AgSEnhu4JOIFRI4buKIELhuqJORyBM4buWSSA9PT09PQ0KICAgIGNvbnN0IGZpbHRlcmVkRXJyb3JzID0gb3BlcmF0b3IgPT09ICdhbGwnIA0KICAgICAgICA/IGVycm9yTG9nIA0KICAgICAgICA6IGVycm9yTG9nLmZpbHRlcihlcnJvciA9PiANCiAgICAgICAgICAgIGVycm9yLmRldGFpbHMgJiYgDQogICAgICAgICAgICBlcnJvci5kZXRhaWxzLm9wZXJhdG9yICYmIA0KICAgICAgICAgICAgZXJyb3IuZGV0YWlscy5vcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKSA9PT0gb3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJykNCiAgICAgICAgKTsNCg0KICAgIC8vIEhp4buDbiB0aOG7iyBs4buXaSDEkcOjIGzhu41jDQogICAgY29uc3QgZXJyb3JMb2dEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJyb3JMb2cnKTsNCiAgICBpZiAoZmlsdGVyZWRFcnJvcnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGVycm9yTG9nRGl2LmlubmVySFRNTCA9ICc8cD5LaMO0bmcgY8OzIGzhu5dpIG7DoG8gxJHGsOG7o2MgZ2hpIG5o4bqtbjwvcD4nOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgbGV0IGh0bWwgPSBgDQogICAgPHRhYmxlIGNsYXNzPSJlcnJvci10YWJsZSI+DQogICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlciBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gVMOqbiBCTjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS1wcm9jZWR1cmVzIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUaOG7pyB0aHXhuq10PC90aD4NCiAgICAgICAgICAgIDx0aCBjbGFzcz0iZG9jdG9yLWNvbHVtbiI+PGkgY2xhc3M9ImZhcyBmYS11c2VyLW1kIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBCw6FjIHPhu7kgY2jhu4kgxJHhu4tuaDwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyLW51cnNlIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBOZ8aw4budaSB0aOG7sWMgaGnhu4duPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFyIGZhLWNsb2NrIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUaOG7nWkgZ2lhbjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS1leGNsYW1hdGlvbi10cmlhbmdsZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTOG7l2k8L3RoPg0KICAgICAgICAgICAgPC90cj4NCiAgICAgICAgPC90aGVhZD4NCiAgICAgICAgPHRib2R5PmA7DQoNCiAgICBmaWx0ZXJlZEVycm9ycy5mb3JFYWNoKGVycm9yID0+IHsNCiAgICAgICAgaWYgKGVycm9yLmRldGFpbHMpIHsNCiAgICAgICAgICAgIGh0bWwgKz0gYA0KICAgICAgICAgICAgPHRyIGNsYXNzPSJlcnJvci1yb3ciPg0KICAgICAgICAgICAgICAgIDx0ZD4ke2Vycm9yLmRldGFpbHMucGF0aWVudE5hbWUgfHwgJ0tow7RuZyBjw7MnfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5wcm9jZWR1cmUgfHwgJ0tow7RuZyBjw7MnfTwvdGQ+DQoJCQkJPHRkIGNsYXNzPSJkb2N0b3ItY29sdW1uIj4ke2Vycm9yLmRldGFpbHMuZG9jdG9yIHx8ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke2Vycm9yLmRldGFpbHMub3BlcmF0b3IgPyBlcnJvci5kZXRhaWxzLm9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpIDogJ0tow7RuZyBjw7MnfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPjxjZW50ZXI+JHtlcnJvci5kZXRhaWxzLm5nYXlUaHVjSGllbiB8fCAoZXJyb3IuZGV0YWlscy5kYXRlIHx8ICdLaMO0bmcgY8OzJyl9IDxici8+JHsNCiAgICAgICAgICAgICAgICAgICAgZXJyb3IuZGV0YWlscy5zdGFydFRpbWUgPyBgJHtlcnJvci5kZXRhaWxzLnN0YXJ0VGltZX0gLSAke2Vycm9yLmRldGFpbHMuZW5kVGltZX1gIDogJ0tow7RuZyBjw7MnDQogICAgICAgICAgICAgICAgfTwvY2VudGVyPjwvdGQ+DQogICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJlcnJvci1kZXRhaWwiPg0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLm1lc3NhZ2V9DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IuZGV0YWlscy5leHBlY3RlZCA/IGAke2Vycm9yLmRldGFpbHMuYWN0dWFsfSBwaMO6dCAoUXV5IMSR4buLbmg6ICR7ZXJyb3IuZGV0YWlscy5leHBlY3RlZH0gcGjDunQpYCA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPmA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBodG1sICs9IGANCiAgICAgICAgICAgIDx0ciBjbGFzcz0iZXJyb3Itcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iNSIgY2xhc3M9ImVycm9yLWRldGFpbCI+DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IubWVzc2FnZX0gJHtlcnJvci5yb3cgPyAnKETDsm5nICcgKyBlcnJvci5yb3cgKyAnKScgOiAnJ30NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICBodG1sICs9IGA8L3Rib2R5PjwvdGFibGU+YDsNCiAgICBlcnJvckxvZ0Rpdi5pbm5lckhUTUwgPSBodG1sOw0KfQ0KDQpmdW5jdGlvbiBkaXNwbGF5RmlsdGVyZWRFcnJvcnMoZmlsdGVyZWRFcnJvcnMpIHsNCiAgICBjb25zdCBlcnJvckxvZ0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvckxvZycpOw0KICAgIA0KICAgIGlmIChmaWx0ZXJlZEVycm9ycy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgZXJyb3JMb2dEaXYuaW5uZXJIVE1MID0gJzxwPktow7RuZyBjw7MgbOG7l2kgbsOgbyDEkcaw4bujYyBnaGkgbmjhuq1uPC9wPic7DQogICAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgbGV0IGh0bWwgPSBgDQogICAgPHRhYmxlIGNsYXNzPSJlcnJvci10YWJsZSI+DQogICAgICAgIDx0aGVhZD4NCiAgICAgICAgICAgIDx0cj4NCiAgICAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFzIGZhLXVzZXIgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IFTDqm4gQk48L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtcHJvY2VkdXJlcyBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gVGjhu6cgdGh14bqtdDwvdGg+DQogICAgICAgICAgICA8dGggY2xhc3M9ImRvY3Rvci1jb2x1bW4iPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1tZCBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gQsOhYyBz4bu5IGNo4buJIMSR4buLbmg8L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1udXJzZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhciBmYS1jbG9jayBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gVGjhu51pIGdpYW48L3RoPg0KICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGUgZmEtc3Bpbi1jb250aW51b3VzIj48L2k+IEzhu5dpPC90aD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgIDwvdGhlYWQ+DQogICAgICAgIDx0Ym9keT5gOw0KICAgIA0KICAgIGZpbHRlcmVkRXJyb3JzLmZvckVhY2goZXJyb3IgPT4gew0KICAgICAgICBpZiAoZXJyb3IuZGV0YWlscykgew0KICAgICAgICAgICAgaHRtbCArPSBgDQogICAgICAgICAgICA8dHIgY2xhc3M9ImVycm9yLXJvdyI+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5wYXRpZW50TmFtZSB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLnByb2NlZHVyZSB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLm9wZXJhdG9yID8gZXJyb3IuZGV0YWlscy5vcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKSA6ICdLaMO0bmcgY8OzJ308L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD48Y2VudGVyPiR7ZXJyb3IuZGV0YWlscy5uZ2F5VGh1Y0hpZW4gfHwgKGVycm9yLmRldGFpbHMuZGF0ZSB8fCAnS2jDtG5nIGPDsycpfSA8YnIvPiR7ZXJyb3IuZGV0YWlscy5zdGFydFRpbWUgPyBgJHtlcnJvci5kZXRhaWxzLnN0YXJ0VGltZX0gLSAke2Vycm9yLmRldGFpbHMuZW5kVGltZX1gIDogJ0tow7RuZyBjw7MnfTwvY2VudGVyPjwvdGQ+DQogICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJlcnJvci1kZXRhaWwiPg0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLm1lc3NhZ2V9DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IuZGV0YWlscy5leHBlY3RlZCA/IGAke2Vycm9yLmRldGFpbHMuYWN0dWFsfSBwaMO6dCAgIChRdXkgxJHhu4tuaDogJHtlcnJvci5kZXRhaWxzLmV4cGVjdGVkfSBwaMO6dClgIDogJyd9DQogICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+YDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGh0bWwgKz0gYA0KICAgICAgICAgICAgPHRyIGNsYXNzPSJlcnJvci1yb3ciPg0KICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSI2IiBjbGFzcz0iZXJyb3ItZGV0YWlsIj4NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5tZXNzYWdlfSAke2Vycm9yLnJvdyA/ICcoRMOybmcgJyArIGVycm9yLnJvdyArICcpJyA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPmA7DQogICAgICAgIH0NCiAgICB9KTsNCiAgICANCiAgICBodG1sICs9IGA8L3Rib2R5PjwvdGFibGU+YDsNCiAgICBlcnJvckxvZ0Rpdi5pbm5lckhUTUwgPSBodG1sOw0KfQ0KDQogICAgICAgIGZ1bmN0aW9uIGxvZ0Vycm9yKG1lc3NhZ2UsIHJvdyA9IG51bGwsIGRldGFpbHMgPSBudWxsKSB7DQogICAgICAgICAgICBlcnJvckxvZy5wdXNoKHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlLA0KICAgICAgICAgICAgICAgIHJvdywNCiAgICAgICAgICAgICAgICBkZXRhaWxzLA0KICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKSwNCiAgICAgICAgICAgICAgICB1c2VyOiBjdXJyZW50VXNlcg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbTOG7l2ldICR7bWVzc2FnZX1gLCBkZXRhaWxzKTsNCiAgICAgICAgfQ0KDQpmdW5jdGlvbiBkaXNwbGF5RXJyb3JzKCkgew0KICAgIGNvbnN0IGVycm9yTG9nRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yTG9nJyk7DQogICAgDQogICAgaWYgKGVycm9yTG9nLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICBlcnJvckxvZ0Rpdi5pbm5lckhUTUwgPSAnPHA+S2jDtG5nIGPDsyBs4buXaSBuw6BvIMSRxrDhu6NjIGdoaSBuaOG6rW48L3A+JzsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yU2VjdGlvbicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICAgIA0KICAgICAgICAvLyBO4bq/dSBraMO0bmcgY8OzIGzhu5dpLCBjdeG7mW4geHXhu5FuZyBwaOG6p24gS+G6v3QgUXXhuqMgS2nhu4NtIFRyYQ0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0U2VjdGlvbicpOw0KICAgICAgICAgICAgaWYgKHJlc3VsdFNlY3Rpb24gJiYgcmVzdWx0U2VjdGlvbi5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpIHsNCiAgICAgICAgICAgICAgICBzbW9vdGhTY3JvbGxUbyhyZXN1bHRTZWN0aW9uLCAtNDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LCAzMDApOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICAgIGxldCBodG1sID0gYA0KICAgIDx0YWJsZSBjbGFzcz0iZXJyb3ItdGFibGUiPg0KICAgICAgICA8dGhlYWQ+DQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgPHRoPjxpIGNsYXNzPSJmYXMgZmEtdXNlciBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gVMOqbiBCTjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS1wcm9jZWR1cmVzIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUaOG7pyB0aHXhuq10PC90aD4NCiAgICAgICAgICAgIDx0aCBjbGFzcz0iZG9jdG9yLWNvbHVtbiI+PGkgY2xhc3M9ImZhcyBmYS11c2VyLW1kIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBCw6FjIHPhu7kgY2jhu4kgxJHhu4tuaDwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS11c2VyLW51cnNlIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBOZ8aw4budaSB0aOG7sWMgaGnhu4duPC90aD4NCiAgICAgICAgICAgIDx0aD48aSBjbGFzcz0iZmFyIGZhLWNsb2NrIGZhLXNwaW4tY29udGludW91cyI+PC9pPiBUaOG7nWkgZ2lhbjwvdGg+DQogICAgICAgICAgICA8dGg+PGkgY2xhc3M9ImZhcyBmYS1leGNsYW1hdGlvbi10cmlhbmdsZSBmYS1zcGluLWNvbnRpbnVvdXMiPjwvaT4gTOG7l2k8L3RoPg0KICAgICAgICAgICAgPC90cj4NCiAgICAgICAgPC90aGVhZD4NCiAgICAgICAgPHRib2R5PmA7DQogICAgDQogICAgLy8gSGnhu4NuIHRo4buLIHThu6tuZyBs4buXaQ0KICAgIGVycm9yTG9nLmZvckVhY2goZXJyb3IgPT4gew0KICAgICAgICBpZiAoZXJyb3IuZGV0YWlscykgew0KICAgICAgICAgICAgaHRtbCArPSBgDQogICAgICAgICAgICA8dHIgY2xhc3M9ImVycm9yLXJvdyI+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5wYXRpZW50TmFtZSB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtlcnJvci5kZXRhaWxzLnByb2NlZHVyZSB8fCAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9ImRvY3Rvci1jb2x1bW4iPiR7ZXJyb3IuZGV0YWlscy5kb2N0b3IgfHwgJ0tow7RuZyBjw7MnfTwvdGQ+DQogICAgICAgICAgICAgICAgPHRkPiR7ZXJyb3IuZGV0YWlscy5vcGVyYXRvciA/IGVycm9yLmRldGFpbHMub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJykgOiAnS2jDtG5nIGPDsyd9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+PGNlbnRlcj4ke2Vycm9yLmRldGFpbHMubmdheVRodWNIaWVuIHx8IChlcnJvci5kZXRhaWxzLmRhdGUgfHwgJ0tow7RuZyBjw7MnKX0gPGJyLz4ke2Vycm9yLmRldGFpbHMuc3RhcnRUaW1lID8gYCR7ZXJyb3IuZGV0YWlscy5zdGFydFRpbWV9IC0gJHtlcnJvci5kZXRhaWxzLmVuZFRpbWV9YCA6ICdLaMO0bmcgY8OzJ308L2NlbnRlcj48L3RkPg0KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iZXJyb3ItZGV0YWlsIj4NCiAgICAgICAgICAgICAgICAgICAgJHtlcnJvci5tZXNzYWdlfQ0KICAgICAgICAgICAgICAgICAgICAke2Vycm9yLmRldGFpbHMuZXhwZWN0ZWQgPyBgJHtlcnJvci5kZXRhaWxzLmFjdHVhbH0gcGjDunQgICAoUXV5IMSR4buLbmg6ICR7ZXJyb3IuZGV0YWlscy5leHBlY3RlZH0gcGjDunQpYCA6ICcnfQ0KICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICA8L3RyPmA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBodG1sICs9IGANCiAgICAgICAgICAgIDx0ciBjbGFzcz0iZXJyb3Itcm93Ij4NCiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iNiIgY2xhc3M9ImVycm9yLWRldGFpbCI+DQogICAgICAgICAgICAgICAgICAgICR7ZXJyb3IubWVzc2FnZX0gJHtlcnJvci5yb3cgPyAnKETDsm5nICcgKyBlcnJvci5yb3cgKyAnKScgOiAnJ30NCiAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgPC90cj5gOw0KICAgICAgICB9DQogICAgfSk7DQogICAgDQogICAgaHRtbCArPSBgPC90Ym9keT48L3RhYmxlPmA7DQogICAgDQogICAgZXJyb3JMb2dEaXYuaW5uZXJIVE1MID0gaHRtbDsNCiAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvclNlY3Rpb24nKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICANCiAgICAvLyBDdeG7mW4geHXhu5FuZyBwaOG6p24gbOG7l2kgbuG6v3UgY8OzDQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGNvbnN0IGVycm9yU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvclNlY3Rpb24nKTsNCiAgICAgICAgaWYgKGVycm9yU2VjdGlvbikgew0KICAgICAgICAgICAgc21vb3RoU2Nyb2xsVG8oZXJyb3JTZWN0aW9uLCAtMTMwKTsNCiAgICAgICAgfQ0KICAgIH0sIDMwMCk7DQp9DQoNCi8vIEjDoG0gY3Xhu5luIG3GsOG7o3QgdOG7lW5nIHF1w6F0DQpmdW5jdGlvbiBzbW9vdGhTY3JvbGxUbyhlbGVtZW50LCBvZmZzZXQgPSAwKSB7DQogICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQtZXJyb3Itc2VjdGlvbicpOw0KICAgIA0KICAgIGNvbnN0IGVsZW1lbnRQb3NpdGlvbiA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOw0KICAgIGNvbnN0IG9mZnNldFBvc2l0aW9uID0gZWxlbWVudFBvc2l0aW9uICsgd2luZG93LnBhZ2VZT2Zmc2V0IC0gb2Zmc2V0Ow0KICAgIA0KICAgIGNvbnN0IGR1cmF0aW9uID0gMTUwMDsNCiAgICBjb25zdCBzdGFydCA9IHdpbmRvdy5wYWdlWU9mZnNldDsNCiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTsNCiAgICANCiAgICBmdW5jdGlvbiBzY3JvbGxTdGVwKHRpbWVzdGFtcCkgew0KICAgICAgICBjb25zdCBlbGFwc2VkID0gdGltZXN0YW1wIC0gc3RhcnRUaW1lOw0KICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKGVsYXBzZWQgLyBkdXJhdGlvbiwgMSk7DQogICAgICAgIGNvbnN0IGVhc2luZyA9IGVhc2VJbk91dEN1YmljKHByb2dyZXNzKTsNCiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHN0YXJ0ICsgKG9mZnNldFBvc2l0aW9uIC0gc3RhcnQpICogZWFzaW5nKTsNCiAgICAgICAgDQogICAgICAgIGlmIChwcm9ncmVzcyA8IDEpIHsNCiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsU3RlcCk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gZWFzZUluT3V0Q3ViaWModCkgew0KICAgICAgICByZXR1cm4gdCA8IDAuNSA/IDQgKiB0ICogdCAqIHQgOiAxIC0gTWF0aC5wb3coLTIgKiB0ICsgMiwgMykgLyAyOw0KICAgIH0NCiAgICANCiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNjcm9sbFN0ZXApOw0KICAgIA0KICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodC1lcnJvci1zZWN0aW9uJyk7DQogICAgfSwgMjAwMCk7DQp9DQoNCg0KIA0KDQogICAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVRpbWUoZGF0ZXRpbWVTdHIsIHJvd0luZGV4KSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmICghZGF0ZXRpbWVTdHIpIHsNCiAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRldGltZVN0ciA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhjZWxEYXRlID0gbmV3IERhdGUoTWF0aC5yb3VuZCgoZGF0ZXRpbWVTdHIgLSAyNTU2OSkgKiA4NjQwMCAqIDEwMDApKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF5ID0gZXhjZWxEYXRlLmdldERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9udGggPSBleGNlbERhdGUuZ2V0TW9udGgoKSArIDE7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBleGNlbERhdGUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBleGNlbERhdGUuZ2V0SG91cnMoKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IGV4Y2VsRGF0ZS5nZXRNaW51dGVzKCk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY29uZHMgPSBleGNlbERhdGUuZ2V0U2Vjb25kcygpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmo6IGV4Y2VsRGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVLZXk6IGAke2RheX0vJHttb250aH0vJHt5ZWFyfWAsDQogICAgICAgICAgICAgICAgICAgICAgICBtaW51dGVzOiBob3VycyAqIDYwICsgbWludXRlcywNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IGhvdXJzICogMzYwMCArIG1pbnV0ZXMgKiA2MCArIHNlY29uZHMsDQogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGltZTogYCR7aG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3NlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWANCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZXRpbWVTdHIgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBkYXRlUGFydCwgdGltZVBhcnQgPSAnMDA6MDA6MDAnOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZXRpbWVTdHIuaW5jbHVkZXMoJyAnKSkgW2RhdGVQYXJ0LCB0aW1lUGFydF0gPSBkYXRldGltZVN0ci5zcGxpdCgnICcpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlIGRhdGVQYXJ0ID0gZGF0ZXRpbWVTdHI7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBsZXQgZGF5LCBtb250aCwgeWVhcjsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVQYXJ0LmluY2x1ZGVzKCcvJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVBhcnQuc3BsaXQoJy8nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIFtkYXksIG1vbnRoLCB5ZWFyXSA9IHBhcnRzLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFydHMubGVuZ3RoID09PSAyKSBbZGF5LCBtb250aF0gPSBwYXJ0cy5tYXAoTnVtYmVyKSwgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRlUGFydC5pbmNsdWRlcygnLScpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVQYXJ0LnNwbGl0KCctJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAzKSBbeWVhciwgbW9udGgsIGRheV0gPSBwYXJ0cy5tYXAoTnVtYmVyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikgW21vbnRoLCBkYXldID0gcGFydHMubWFwKE51bWJlciksIHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ8SQ4buLbmggZOG6oW5nIG5nw6B5IGtow7RuZyDEkcaw4bujYyBo4buXIHRy4bujJyk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZGF5KSB8fCBpc05hTihtb250aCkgfHwgaXNOYU4oeWVhcikgfHwgZGF5IDwgMSB8fCBkYXkgPiAzMSB8fCBtb250aCA8IDEgfHwgbW9udGggPiAxMikgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHacOhIHRy4buLIG5nw6B5IGtow7RuZyBo4bujcCBs4buHJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGxldCBob3VycyA9IDAsIG1pbnV0ZXMgPSAwLCBzZWNvbmRzID0gMDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVQYXJ0LmluY2x1ZGVzKCc6JykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVQYXJ0cyA9IHRpbWVQYXJ0LnNwbGl0KCc6Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICBob3VycyA9IHBhcnNlSW50KHRpbWVQYXJ0c1swXSkgfHwgMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBwYXJzZUludCh0aW1lUGFydHNbMV0pIHx8IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzID0gcGFyc2VJbnQodGltZVBhcnRzWzJdKSB8fCAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oaG91cnMpIHx8IGlzTmFOKG1pbnV0ZXMpIHx8IGlzTmFOKHNlY29uZHMpIHx8IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzIDwgMCB8fCBob3VycyA+IDIzIHx8IG1pbnV0ZXMgPCAwIHx8IG1pbnV0ZXMgPiA1OSB8fCBzZWNvbmRzIDwgMCB8fCBzZWNvbmRzID4gNTkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvcignR2nDoSB0cuG7iyB0aOG7nWkgZ2lhbiBraMO0bmcgaOG7o3AgbOG7hycsIHJvd0luZGV4LCB7IHRpbWU6IHRpbWVQYXJ0IH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJzID0gMDsgbWludXRlcyA9IDA7IHNlY29uZHMgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlT2JqID0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXksIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKGRhdGVPYmouZ2V0VGltZSgpKSkgdGhyb3cgbmV3IEVycm9yKCdOZ8OgeSBraMO0bmcgaOG7o3AgbOG7hycpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kc0luRGF5ID0gaG91cnMgKiAzNjAwICsgbWludXRlcyAqIDYwICsgc2Vjb25kczsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWludXRlc0luRGF5ID0gaG91cnMgKiA2MCArIG1pbnV0ZXM7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVLZXk6IGAke2RheX0vJHttb250aH0vJHt5ZWFyfWAsDQogICAgICAgICAgICAgICAgICAgICAgICBtaW51dGVzOiBtaW51dGVzSW5EYXksDQogICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiBzZWNvbmRzSW5EYXksDQogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGltZTogYCR7aG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3NlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWANCiAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfEkOG7i25oIGThuqFuZyB0aOG7nWkgZ2lhbiBraMO0bmcgxJHGsOG7o2MgaOG7lyB0cuG7oycpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBsb2dFcnJvcihgTOG7l2kgcGjDom4gdMOtY2ggdGjhu51pIGdpYW46ICR7ZXJyb3IubWVzc2FnZX1gLCByb3dJbmRleCwgeyANCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGV0aW1lU3RyLA0KICAgICAgICAgICAgICAgICAgICBlcnJvckRldGFpbHM6IGVycm9yLnN0YWNrIA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gPT09PT09PT09PSBLSOG7nkkgVOG6oE8gU+G7sCBLSeG7hk4gPT09PT09PT09PSAvLw0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAvLyBLaGkgdHJhbmcgbG9hZA0KICAgICAgICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdtZWRVc2VyJykpIHsNCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2xvZ2luLXBhZ2UnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gS2nhu4NtIHRyYSDEkcSDbmcgbmjhuq1wIGtoaSB0cmFuZyB04bqjaQ0KCQkNCgkJCQ0KICAgICAgICAgICAgY2hlY2tTYXZlZExvZ2luKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEfDoW4gc+G7sSBraeG7h24gY2hvIG7DunQgxJHEg25nIG5o4bqtcA0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0xvZ2luKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR8OhbiBz4buxIGtp4buHbiBjaG8gbsO6dCDEkcSDbmcgeHXhuqV0DQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb3V0QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsb2dvdXQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyDEkMSDbmcgbmjhuq1wIGLhurFuZyBwaMOtbSBFbnRlcg0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkSW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgew0KICAgICAgICAgICAgICAgICAgICBjaGVja0xvZ2luKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIEfDoW4gc+G7sSBraeG7h24gY2hvIG7DunQgcGjDom4gdMOtY2ggZmlsZQ0KICAgICAgICAgICAgDQpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5hbHl6ZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4gew0KICAgIGNvbnN0IGZpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0JykuZmlsZXNbMF07DQogICAgaWYgKCFmaWxlKSB7DQogICAgICAgIGFsZXJ0KCdWdWkgbMOybmcgY2jhu41uIGZpbGUgdHLGsOG7m2Mga2hpIGtp4buDbSB0cmEnKTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdQb3B1cCcpOw0KICAgIGNvbnN0IGxvYWRpbmdUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdUZXh0Jyk7DQogICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3NCYXInKTsNCg0KICAgIHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKSk7DQoNCiAgICBsb2FkaW5nVGV4dC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1wYXBlci1wbGFuZSIgc3R5bGU9ImZvbnQtc2l6ZToyNHB4O2NvbG9yOiMzNDk4ZGI7bWFyZ2luLWJvdHRvbToxMHB4OyI+PC9pPjxici8+xJBhbmcgZ+G7rWkgZOG7ryBsaeG7h3UgduG7gSBtw6F5IGNo4bunLi4uJzsNCiAgICBwcm9ncmVzc0Jhci5zdHlsZS53aWR0aCA9ICczMyUnOw0KCQ0KCQ0KCQ0KCWNvbnN0IHByb2dyZXNzQmFyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzQmFyQ29udGFpbmVyJyk7DQoNCi8vIENo4buJIHThuqFvIDEgbOG6p24NCmlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWRpdExpbmVCZWxvdycpKSB7DQogIGNvbnN0IGNyZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICBjcmVkaXQuaWQgPSAnY3JlZGl0TGluZUJlbG93JzsNCiAgY3JlZGl0LmlubmVyVGV4dCA9ICfCqSBUaGnhur90IGvhur8gJiBwaMOhdCB0cmnhu4NuIGLhu59pIENow6J1IEh14buzbmgnOw0KICBjcmVkaXQuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnOw0KICBjcmVkaXQuc3R5bGUuZm9udFNpemUgPSAnMTZweCc7DQogIGNyZWRpdC5zdHlsZS5jb2xvciA9ICcjRkYwMDAwJzsNCiAgY3JlZGl0LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInOw0KDQogIHByb2dyZXNzQmFyQ29udGFpbmVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNyZWRpdCwgcHJvZ3Jlc3NCYXJDb250YWluZXIubmV4dFNpYmxpbmcpOw0KfQ0KCQ0KCQ0KCQ0KCQ0KICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTApKSk7DQogICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDcwMCkpOw0KDQogICAgcHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAnNjYlJzsNCg0KICAgIGxldCB0b3RhbCA9IDA7DQogICAgdHJ5IHsNCiAgICAgICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7DQogICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGUgPT4gcmVzb2x2ZShuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpKTsNCiAgICAgICAgICAgIGZpbGVSZWFkZXIub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoIkzhu5dpIMSR4buNYyBmaWxlIikpOw0KICAgICAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwgeyB0eXBlOiAnYXJyYXknIH0pOw0KICAgICAgICBjb25zdCBmaXJzdFNoZWV0ID0gd29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMV1dOw0KICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbihmaXJzdFNoZWV0LCB7DQogICAgICAgICAgICBoZWFkZXI6IDEsDQogICAgICAgICAgICBkZWZ2YWw6ICIiLA0KICAgICAgICAgICAgYmxhbmtyb3dzOiB0cnVlDQogICAgICAgIH0pOw0KDQogICAgICAgIGNvbnN0IHJvd3MgPSBqc29uRGF0YS5zbGljZSg5KTsNCiAgICAgICAgdG90YWwgPSByb3dzLmxlbmd0aDsNCiAgICB9IGNhdGNoIHsNCiAgICAgICAgdG90YWwgPSAxMDAwOw0KICAgIH0NCg0KICAgIGNvbnN0IHN0ZXAgPSAxMDA7DQogICAgY29uc3Qgc3RlcHMgPSBNYXRoLmNlaWwodG90YWwgLyBzdGVwKTsNCiAgICBjb25zdCBpbnRlcnZhbCA9IDI2MDAgLyBzdGVwczsNCg0KICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHN0ZXBzOyBpKyspIHsNCiAgICAgICAgY29uc3QgY3VycmVudCA9IE1hdGgubWluKGkgKiBzdGVwLCB0b3RhbCk7DQogICAgICAgIGxvYWRpbmdUZXh0LmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXVzZXItbWQiIHN0eWxlPSJmb250LXNpemU6MjRweDtjb2xvcjojMjk4MGI5O21hcmdpbi1ib3R0b206MTBweDsiPjwvaT48YnIvPsSQYW5nIHBow6JuIHTDrWNoIGThu68gbGnhu4d1IHThu6tuZyBi4buHbmggbmjDom4uLi48YnI+JyArIGN1cnJlbnQgKyAnIC8gJyArIHRvdGFsOw0KICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgaW50ZXJ2YWwpKTsNCiAgICB9DQoNCiAgICBsb2FkaW5nVGV4dC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1jaGVjay1jaXJjbGUiIHN0eWxlPSJmb250LXNpemU6MjRweDtjb2xvcjpncmVlbjttYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyLz7EkMOjIGtp4buDbSB0cmEgeG9uZy4uLic7DQogICAgcHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAnMTAwJSc7DQogICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTsNCg0KICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsNCiAgICBzZXRUaW1lb3V0KCgpID0+IHsgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfSwgNTAwKTsNCiAgICBoYW5kbGVGaWxlKCk7DQoJDQoJc2V0VGltZW91dCgoKSA9PiB7DQogICAgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICAgIC8vIEhp4buDbiB0aOG7iyAyIG7DunQgc2F1IGtoaSBwb3B1cCB04bqvdA0KICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbi5idG4nKS5mb3JFYWNoKGJ0biA9PiB7DQogICAgICAgIGlmIChidG4udGV4dENvbnRlbnQuaW5jbHVkZXMoJ0dp4budIHRy4buRbmcnKSB8fCBidG4udGV4dENvbnRlbnQuaW5jbHVkZXMoJ1Phuq9jIHRodeG7kWMgdGhhbmcnKSkgew0KICAgICAgICAgICAgYnRuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJzsNCiAgICAgICAgfQ0KICAgIH0pOw0KDQp9LCA1MDApOw0KCQ0KCQ0KfSk7DQoNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gR8OhbiBz4buxIGtp4buHbiBjaG8gZHJvcGRvd24gbOG7jWMNCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVyYXRvclNlbGVjdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZpbHRlckJ5T3BlcmF0b3IpOw0KICAgICAgICAgICAgDQoJCQkNCgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93RG9jdG9yQ2hlY2tib3gnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmaWx0ZXJCeU9wZXJhdG9yKTsNCgkJCQ0KCQkJDQogICAgICAgICAgICAvLyBHw6FuIHPhu7Ega2nhu4duIGNobyByYWRpbyBidXR0b24gY2jhu41uIGtodW5nIGdp4budDQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPSJ0aW1lT3B0aW9uIl0nKS5mb3JFYWNoKHJhZGlvID0+IHsNCiAgICAgICAgICAgICAgICByYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbFByb2NlZHVyZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVUaW1lU3VnZ2VzdGlvbnMoYWxsUHJvY2VkdXJlcyk7DQogICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJCeU9wZXJhdG9yKCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KCQkJDQoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JTZWxlY3QnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsNCiAgICBmaWx0ZXJCeU9wZXJhdG9yKCk7DQp9KTsNCg0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZXJhdG9yU2VsZWN0RXJyb3InKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3BlcmF0b3JTZWxlY3QnKS52YWx1ZSA9IHRoaXMudmFsdWU7DQogICAgZmlsdGVyQnlPcGVyYXRvcigpOw0KfSk7DQoJCQkNCiAgICAgICAgfSk7DQogICAgPC9zY3JpcHQ+DQo8ZGl2IGNsYXNzPSJwcm9jZWR1cmUtaW5mbyI+PGNlbnRlcj4gDQpEZXNpZ24gQnkgPGEgaHJlZj0iaHR0cDovL2ZiLmNvbS9jaGF1aHV5bmgwMTA0IiB0YXJnZXQ9Il9ibGFuayI+IERyLkNow6J1PC9hPjxici8+DQogICAgICAgICAgICAgICAgTuG6v3UgQ8OzIELhuqV0IEvhu7MgVsaw4bubbmcgTeG6r2MgR8OsIFZ1aSBMw7JuZyBMSCA6IDxici8+DQogICAgICAgICAgICAgICAgRW1haWw6IGNoYXVodXluaDAxMDRAZ21haWwuY29tPGJyLz4NCiAgICAgICAgICAgICAgICBTRFQ6IDA3OS41NjcuOTM1MDwvY2VudGVyPg0KPC9kaXY+DQo8c2NyaXB0Pg0KICAvLyBI4buXIHRy4bujIG5o4bqlbiBFbnRlciB04burIMO0IHVzZXJuYW1lIGhv4bq3YyBwYXNzd29yZA0KICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWVJbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpLmZvY3VzKCk7DQogICAgfQ0KICB9KTsNCg0KICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW5CdG4nKS5jbGljaygpOw0KICAgIH0NCiAgfSk7DQoNCi8vID09PT09PSBU4buwIMSQ4buYTkcgUVXDiVQgVEjGryBN4bukQyAmIENI4buMTiBGSUxFIE3hu5pJIE5I4bqkVCA9PT09PT0NCg0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbGRlckJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkZXJJbnB1dCcpLmNsaWNrKCk7DQp9KTsNCg0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbGRlcklucHV0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGUpID0+IHsNCiAgICBjb25zdCBmaWxlcyA9IEFycmF5LmZyb20oZS50YXJnZXQuZmlsZXMpLmZpbHRlcihmID0+IC9cLih4bHN4fHhsc3xjc3YpJC9pLnRlc3QoZi5uYW1lKSk7DQogICAgY29uc3Qgc3RhdHVzRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjYW5TdGF0dXMnKTsNCiAgICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0Jyk7DQoNCiAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHN0YXR1c0Rpdi5zdHlsZS5jb2xvciA9ICdyZWQnOw0KICAgICAgICBzdGF0dXNEaXYuaW5uZXJIVE1MID0gJ0tow7RuZyB0w6xtIHRo4bqleSBmaWxlIEV4Y2VsIGjhu6NwIGzhu4cgdHJvbmcgdGjGsCBt4bulYy4nOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgbGV0IHZhbGlkRmlsZSA9IG51bGw7DQoNCiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMuc29ydCgoYSwgYikgPT4gYi5sYXN0TW9kaWZpZWQgLSBhLmxhc3RNb2RpZmllZCkpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChkYXRhLCB7IHR5cGU6ICdhcnJheScgfSk7DQoNCiAgICAgICAgICAgIGlmICghd29ya2Jvb2suU2hlZXROYW1lc1sxXSkgY29udGludWU7IC8vIGPhuqduIFNoZWV0IHRo4bupIDINCg0KICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1sxXV07DQogICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbihzaGVldCwgeyBoZWFkZXI6IDEsIGRlZnZhbDogIiIsIGJsYW5rcm93czogdHJ1ZSB9KTsNCg0KICAgICAgICAgICAgaWYgKGpzb25EYXRhLmxlbmd0aCA+PSAxMCkgeyAvLyDDrXQgbmjhuqV0IDIgZMOybmcgaGVhZGVyIHbDoCBjw7MgZOG7ryBsaeG7h3UgZMOybmcgMTANCiAgICAgICAgICAgICAgICB2YWxpZEZpbGUgPSBmaWxlOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEzhu5dpIMSR4buNYyBmaWxlICR7ZmlsZS5uYW1lfTpgLCBlcnIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKHZhbGlkRmlsZSkgew0KICAgICAgICBjb25zdCBkdCA9IG5ldyBEYXRhVHJhbnNmZXIoKTsNCiAgICAgICAgZHQuaXRlbXMuYWRkKHZhbGlkRmlsZSk7DQogICAgICAgIGZpbGVJbnB1dC5maWxlcyA9IGR0LmZpbGVzOw0KDQogICAgICAgIC8vIGPhuq1wIG5o4bqtdCB0cuG6oW5nIHRow6FpDQogICAgICAgIHN0YXR1c0Rpdi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9ImZhcyBmYS1mb2xkZXItb3BlbiI+PC9pPiDEkMOjIGNo4buNbiBmaWxlOiA8Yj4ke3ZhbGlkRmlsZS5uYW1lfTwvYj5gOw0KICAgICAgICBzdGF0dXNEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIHN0YXR1c0Rpdi5zdHlsZS5jb2xvciA9ICcjMmMzZTUwJzsNCg0KICAgICAgICAvLyBH4buNaSBraeG7g20gdHJhDQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbmFseXplQnRuJykuY2xpY2soKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBzdGF0dXNEaXYuc3R5bGUuY29sb3IgPSAncmVkJzsNCiAgICAgICAgc3RhdHVzRGl2LmlubmVySFRNTCA9ICdLaMO0bmcgdMOsbSDEkcaw4bujYyBmaWxlIGPDsyBj4bqldSB0csO6YyBo4bujcCBs4buHLiBWdWkgbMOybmcga2nhu4NtIHRyYSBs4bqhaS4nOw0KICAgIH0NCn0pOw0KDQoNCjwvc2NyaXB0Pg0KPGRpdiBjbGFzcz0idG9hc3QiIGlkPSJ0b2FzdCI+PC9kaXY+DQo8IS0tIFBvcHVwIGxvYWRpbmcgLS0+DQo8ZGl2IGlkPSJsb2FkaW5nUG9wdXAiIHN0eWxlPSJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7ei1pbmRleDo5OTk5O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtZmFtaWx5OidJbnRlcicsc2Fucy1zZXJpZiI+DQo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7cGFkZGluZzozMHB4IDQwcHg7Ym9yZGVyLXJhZGl1czoxMHB4O3RleHQtYWxpZ246Y2VudGVyO2JveC1zaGFkb3c6MCAwIDE1cHggcmdiYSgwLDAsMCwwLjMpO21heC13aWR0aDo5MCU7Zm9udC1zaXplOjE4cHgiPg0KPGRpdiBpZD0ibG9hZGluZ1RleHQiPg0KPGkgY2xhc3M9ImZhcyBmYS1zcGlubmVyIGZhLXNwaW4iIHN0eWxlPSJmb250LXNpemU6MjRweDtjb2xvcjojMzQ5OGRiO21hcmdpbi1ib3R0b206MTBweDsiPjwvaT48YnIvPg0KICAgICAgxJBhbmcgZ+G7rWkgZOG7ryBsaeG7h3UgduG7gSBtw6F5IGNo4bunLi4uDQogICAgPC9kaXY+DQo8ZGl2IGlkPSJwcm9ncmVzc0JhckNvbnRhaW5lciI+DQo8ZGl2IGlkPSJwcm9ncmVzc0JhciI+PC9kaXY+DQo8ZGl2IGlkPSJhdmFpbGFiaWxpdHlUYWJsZSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IG1hcmdpbi10b3A6IDIwcHg7Ij4NCiAgPGgyPlRo4buRbmcga8OqIGdp4budIHRy4buRbmcgdOG7q25nIG5nxrDhu51pPC9oMj4NCiAgPHRhYmxlIGNsYXNzPSJlcnJvci10YWJsZSI+DQogICAgPHRoZWFkPg0KICAgICAgPHRyPg0KICAgICAgICA8dGg+TmfGsOG7nWkgdGjhu7FjIGhp4buHbjwvdGg+DQogICAgICAgIDx0aD5OZ8OgeTwvdGg+DQogICAgICAgIA0KICAgICAgICA8dGg+R2nhu50gdHLhu5FuZyBideG7lWkgc8Ohbmc8L3RoPg0KICAgICAgICA8dGg+R2nhu50gdHLhu5FuZyBideG7lWkgY2hp4buBdTwvdGg+DQogICAgICA8L3RyPg0KICAgIDwvdGhlYWQ+DQogICAgPHRib2R5IGlkPSJhdmFpbGFiaWxpdHlCb2R5Ij48L3Rib2R5Pg0KICA8L3RhYmxlPg0KPC9kaXY+DQo8IS0tIEvhur5UIFRIw5pDOiBC4bqiTkcgR0nhu5wgVFLhu5BORyBU4buqTkcgTkfGr+G7nEkgLS0+DQo8L2Rpdj4NCjwvZGl2Pg0KPC9kaXY+DQo8L2Rpdj4NCg0KPHNjcmlwdD4NCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBmdW5jdGlvbigpIHsNCiAgY29uc3Qgbm9pZHVuZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJub2lkdW5nIik7DQogIGNvbnN0IGxpc3QxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmxpc3QxIik7DQoNCiAgaWYgKG5vaWR1bmcgJiYgbGlzdDEpIHsNCiAgICBjb25zdCB0ZXh0ID0gbm9pZHVuZy50ZXh0Q29udGVudCB8fCBub2lkdW5nLmlubmVyVGV4dCB8fCAiIjsNCiAgICBpZiAodGV4dC50cmltKCkgPT09ICIiKSB7DQogICAgICBsaXN0MS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgIH0NCiAgfQ0KfSk7DQoNCi8vID09PT0gVMONTkggVE/DgU4gR0nhu5wgVFLhu5BORyBDSE8gVOG7qk5HIE5Hxq/hu5xJID09PT0NCmZ1bmN0aW9uIHRvZ2dsZUF2YWlsYWJpbGl0eSgpIHsNCiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmFpbGFiaWxpdHlUYWJsZScpOw0KICAgIGlmICh0YWJsZS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIGNhbGN1bGF0ZUF2YWlsYWJpbGl0eSgpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBjYWxjdWxhdGVBdmFpbGFiaWxpdHkoKSB7DQogICAgY29uc3QgZ3JvdXBzID0ge307DQoNCiAgICBhbGxQcm9jZWR1cmVzLmZvckVhY2gocHJvYyA9PiB7DQogICAgICAgIGNvbnN0IGtleSA9IGAke3Byb2Mub3BlcmF0b3J9XyR7cHJvYy5kYXRlfWA7DQogICAgICAgIGlmICghZ3JvdXBzW2tleV0pIHsNCiAgICAgICAgICAgIGdyb3Vwc1trZXldID0gW107DQogICAgICAgIH0NCiAgICAgICAgZ3JvdXBzW2tleV0ucHVzaChwcm9jKTsNCiAgICB9KTsNCg0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YWlsYWJpbGl0eUJvZHknKTsNCiAgICB0Ym9keS5pbm5lckhUTUwgPSAnJzsNCg0KICAgIE9iamVjdC5rZXlzKGdyb3VwcykuZm9yRWFjaChrZXkgPT4gew0KICAgICAgICBjb25zdCBbb3BlcmF0b3IsIGRhdGVdID0ga2V5LnNwbGl0KCdfJyk7DQogICAgICAgIGxldCB1c2VkTW9ybmluZyA9IDA7DQogICAgICAgIGxldCB1c2VkQWZ0ZXJub29uID0gMDsNCg0KICAgICAgICBncm91cHNba2V5XS5mb3JFYWNoKHByb2MgPT4gew0KICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBwcm9jLnN0YXJ0Ow0KICAgICAgICAgICAgY29uc3QgZW5kID0gcHJvYy5lbmQ7DQogICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IChlbmQgLSBzdGFydCkgLyA2MDsNCg0KICAgICAgICAgICAgaWYgKHN0YXJ0ID49IDcgKiAzNjAwICYmIGVuZCA8PSAxMS41ICogMzYwMCkgew0KICAgICAgICAgICAgICAgIHVzZWRNb3JuaW5nICs9IGR1cmF0aW9uOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFydCA+PSAxMy41ICogMzYwMCAmJiBlbmQgPD0gMTcgKiAzNjAwKSB7DQogICAgICAgICAgICAgICAgdXNlZEFmdGVybm9vbiArPSBkdXJhdGlvbjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdXNlZE1vcm5pbmcgKz0gZHVyYXRpb24gLyAyOw0KICAgICAgICAgICAgICAgIHVzZWRBZnRlcm5vb24gKz0gZHVyYXRpb24gLyAyOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KICAgICAgICBjb25zdCBmcmVlTW9ybmluZyA9IE1hdGgubWF4KDI3MCAtIHVzZWRNb3JuaW5nLCAwKTsNCiAgICAgICAgY29uc3QgZnJlZUFmdGVybm9vbiA9IE1hdGgubWF4KDIxMCAtIHVzZWRBZnRlcm5vb24sIDApOw0KDQogICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCJoZXJiLXJvdyIpOw0KICAgICAgICByb3cuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgPHRkPjxhIGhyZWY9IiMiIG9uY2xpY2s9InNob3dQcm9jZWR1cmVzRm9yT3BlcmF0b3IoXGAke29wZXJhdG9yfVxgLCBcYCR7ZGF0ZX1cYCk7cmV0dXJuIGZhbHNlOyIgc3R5bGU9ImNvbG9yOiMzNDk4ZGI7Zm9udC13ZWlnaHQ6Ym9sZCI+JHtvcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKX08L2E+PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke2RhdGV9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4keyh1c2VkTW9ybmluZyArIHVzZWRBZnRlcm5vb24pLnRvRml4ZWQoMSl9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke2ZyZWVNb3JuaW5nLnRvRml4ZWQoMSl9IHBow7p0PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke2ZyZWVBZnRlcm5vb24udG9GaXhlZCgxKX0gcGjDunQ8L3RkPg0KICAgICAgICBgOw0KICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChyb3cpOw0KICAgIH0pOw0KfQ0KDQpmdW5jdGlvbiB0b2dnbGVBdmFpbGFiaWxpdHkoKSB7DQogICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhaWxhYmlsaXR5VGFibGUnKTsNCiAgICBpZiAodGFibGUuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICBjYWxjdWxhdGVBdmFpbGFiaWxpdHkoKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICB0YWJsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIH0NCn0NCg0KZnVuY3Rpb24gY2FsY3VsYXRlQXZhaWxhYmlsaXR5KCkgew0KICAgIGNvbnN0IGdyb3VwcyA9IHt9Ow0KDQogICAgYWxsUHJvY2VkdXJlcy5mb3JFYWNoKHByb2MgPT4gew0KICAgICAgICBjb25zdCBrZXkgPSBgJHtwcm9jLm9wZXJhdG9yfV8ke3Byb2MuZGF0ZX1gOw0KICAgICAgICBpZiAoIWdyb3Vwc1trZXldKSB7DQogICAgICAgICAgICBncm91cHNba2V5XSA9IFtdOw0KICAgICAgICB9DQogICAgICAgIGdyb3Vwc1trZXldLnB1c2gocHJvYyk7DQogICAgfSk7DQoNCiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmFpbGFiaWxpdHlCb2R5Jyk7DQogICAgdGJvZHkuaW5uZXJIVE1MID0gJyc7DQoNCiAgICBPYmplY3Qua2V5cyhncm91cHMpLmZvckVhY2goa2V5ID0+IHsNCiAgICAgICAgY29uc3QgW29wZXJhdG9yLCBkYXRlXSA9IGtleS5zcGxpdCgnXycpOw0KICAgICAgICBjb25zdCBwcm9jZWR1cmVzID0gZ3JvdXBzW2tleV07DQogICAgICAgIHByb2NlZHVyZXMuc29ydCgoYSwgYikgPT4gYS5zdGFydCAtIGIuc3RhcnQpOw0KDQogICAgICAgIGNvbnN0IG1vcm5pbmdTdGFydCA9IDcgKiAzNjAwOw0KICAgICAgICBjb25zdCBtb3JuaW5nRW5kID0gMTEuNSAqIDM2MDA7DQogICAgICAgIGNvbnN0IGFmdGVybm9vblN0YXJ0ID0gMTMuNSAqIDM2MDA7DQogICAgICAgIGNvbnN0IGFmdGVybm9vbkVuZCA9IDE3ICogMzYwMDsNCg0KICAgICAgICBjb25zdCBtb3JuaW5nRnJlZSA9IGdldEZyZWVTbG90cyhwcm9jZWR1cmVzLCBtb3JuaW5nU3RhcnQsIG1vcm5pbmdFbmQpOw0KICAgICAgICBjb25zdCBhZnRlcm5vb25GcmVlID0gZ2V0RnJlZVNsb3RzKHByb2NlZHVyZXMsIGFmdGVybm9vblN0YXJ0LCBhZnRlcm5vb25FbmQpOw0KDQogICAgICAgIGNvbnN0IHVzZWRNaW51dGVzID0gcHJvY2VkdXJlcy5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgKHAuZW5kIC0gcC5zdGFydCkvNjAsIDApOw0KDQogICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCJoZXJiLXJvdyIpOw0KICAgICAgICByb3cuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgPHRkPjxhIGhyZWY9IiMiIG9uY2xpY2s9InNob3dQcm9jZWR1cmVzRm9yT3BlcmF0b3IoXGAke29wZXJhdG9yfVxgLCBcYCR7ZGF0ZX1cYCk7cmV0dXJuIGZhbHNlOyIgc3R5bGU9ImNvbG9yOiMzNDk4ZGI7Zm9udC13ZWlnaHQ6Ym9sZCI+JHtvcGVyYXRvci5yZXBsYWNlKC8sL2csICcnKX08L2E+PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke2RhdGV9PC90ZD4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPHRkPiR7bW9ybmluZ0ZyZWV9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke2FmdGVybm9vbkZyZWV9PC90ZD4NCiAgICAgICAgYDsNCiAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTsNCiAgICB9KTsNCn0NCg0KZnVuY3Rpb24gZ2V0RnJlZVNsb3RzKHByb2NlZHVyZXMsIHN0YXJ0LCBlbmQpIHsNCiAgICBjb25zdCBidXN5ID0gcHJvY2VkdXJlcy5tYXAocCA9PiAoew0KICAgICAgICBzdGFydDogcC5zdGFydCwNCiAgICAgICAgZW5kOiBwLmVuZCArICgocC5wcm9jZWR1cmVJbmZvPy5idWZmZXIgfHwgMCkgKiA2MCkNCiAgICB9KSkuZmlsdGVyKHAgPT4gcC5lbmQgPiBzdGFydCAmJiBwLnN0YXJ0IDwgZW5kKTsNCg0KICAgIGJ1c3kuc29ydCgoYSwgYikgPT4gYS5zdGFydCAtIGIuc3RhcnQpOw0KDQogICAgY29uc3QgZnJlZSA9IFtdOw0KICAgIGxldCBjdXJzb3IgPSBzdGFydDsNCg0KICAgIGZvciAoY29uc3QgYiBvZiBidXN5KSB7DQogICAgICAgIGlmIChiLnN0YXJ0ID4gY3Vyc29yICYmIGIuc3RhcnQgPiBzdGFydCAmJiBjdXJzb3IgPCBlbmQpIHsNCiAgICAgICAgICAgIGNvbnN0IGZyZWVTdGFydCA9IE1hdGgubWF4KGN1cnNvciwgc3RhcnQpOw0KICAgICAgICAgICAgY29uc3QgZnJlZUVuZCA9IE1hdGgubWluKGIuc3RhcnQsIGVuZCk7DQogICAgICAgICAgICBpZiAoZnJlZUVuZCA+IGZyZWVTdGFydCkgew0KICAgICAgICAgICAgICAgIGZyZWUucHVzaChgJHtmb3JtYXRUaW1lKGZyZWVTdGFydCl9IC0gJHtmb3JtYXRUaW1lKGZyZWVFbmQpfWApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGN1cnNvciA9IE1hdGgubWF4KGN1cnNvciwgYi5lbmQpOw0KICAgIH0NCg0KICAgIGlmIChjdXJzb3IgPCBlbmQpIHsNCiAgICAgICAgZnJlZS5wdXNoKGAke2Zvcm1hdFRpbWUoY3Vyc29yKX0gLSAke2Zvcm1hdFRpbWUoZW5kKX1gKTsNCiAgICB9DQoNCiAgICByZXR1cm4gZnJlZS5sZW5ndGggPyBmcmVlLmpvaW4oJzxicj4nKSA6ICc8aT5LaMO0bmcgY8OybiB0cuG7kW5nPC9pPic7DQp9DQoNCmZ1bmN0aW9uIGZvcm1hdFRpbWUoc2VjKSB7DQogICAgY29uc3QgaCA9IE1hdGguZmxvb3Ioc2VjIC8gMzYwMCk7DQogICAgY29uc3QgbSA9IE1hdGguZmxvb3IoKHNlYyAlIDM2MDApIC8gNjApOw0KICAgIHJldHVybiBoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArICdoJyArIG0udG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOw0KfQ0KDQpmdW5jdGlvbiBzaG93UHJvY2VkdXJlc0Zvck9wZXJhdG9yKG9wZXJhdG9yLCBkYXRlKSB7DQogICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jZWR1cmVPdmVybGF5Jyk7DQogICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cENvbnRlbnQnKTsNCiAgICBjb25zdCBsaXN0ID0gYWxsUHJvY2VkdXJlcy5maWx0ZXIocCA9PiBwLm9wZXJhdG9yID09PSBvcGVyYXRvciAmJiBwLmRhdGUgPT09IGRhdGUpOw0KDQogICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gIjxpPktow7RuZyB0w6xtIHRo4bqleSB0aOG7pyB0aHXhuq10PC9pPiI7DQogICAgfSBlbHNlIHsNCiAgICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7DQogICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gIjxiPk5nxrDhu51pIHRo4buxYyBoaeG7h246PC9iPiAiICsgb3BlcmF0b3IgKyAiPGJyPjxiPk5nw6B5OjwvYj4gIiArIGRhdGUgKyAiPGJyPjxicj4iICsNCiAgICAgICAgICAgICI8dWwgc3R5bGU9J3BhZGRpbmctbGVmdDoyMHB4Jz4iICsgbGlzdC5tYXAocCA9PiANCiAgICAgICAgICAgICAgICAiPGxpPjxiPiIgKyBwLnBhdGllbnROYW1lICsgIjwvYj4gLSAiICsgcC5wcm9jZWR1cmUgKyAiICgiICsgcC5kaXNwbGF5U3RhcnQgKyAiIOKGkiAiICsgcC5kaXNwbGF5RW5kICsgIik8L2xpPiINCiAgICAgICAgICAgICkuam9pbignJykgKyAiPC91bD4iOw0KICAgIH0NCg0KICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQp9DQoNCmZ1bmN0aW9uIGNsb3NlUHJvY2VkdXJlUG9wdXAoKSB7DQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2NlZHVyZU92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KfQ0KPC9zY3JpcHQ+DQo8IS0tIFBvcHVwIHRo4bunIHRodeG6rXQgY2hpIHRp4bq/dCB24bubaSBvdmVybGF5IC0tPg0KPGRpdiBpZD0icHJvY2VkdXJlT3ZlcmxheSIgc3R5bGU9ImRpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC40KTt6LWluZGV4OjEwMDAwIiBvbmNsaWNrPSJjbG9zZVByb2NlZHVyZVBvcHVwKCkiPg0KICA8ZGl2IGlkPSJwcm9jZWR1cmVQb3B1cCIgb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkiIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6MTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO2JhY2tncm91bmQ6I2ZmZjtjb2xvcjojMDAwO2JvcmRlcjoycHggc29saWQgIzM0OThkYjtwYWRkaW5nOjIwcHg7Ym9yZGVyLXJhZGl1czo4cHg7Ym94LXNoYWRvdzowIDVweCAyMHB4IHJnYmEoMCwwLDAsMC4zKTttYXgtaGVpZ2h0Ojcwdmg7b3ZlcmZsb3c6YXV0bztmb250LWZhbWlseTpJbnRlcixzYW5zLXNlcmlmO21heC13aWR0aDo2MDBweCI+DQogICAgPGgzPkNoaSB0aeG6v3QgdGjhu6cgdGh14bqtdDwvaDM+DQogICAgPGRpdiBpZD0icG9wdXBDb250ZW50Ij48L2Rpdj4NCiAgICA8YnIvPg0KICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0iY2xvc2VQcm9jZWR1cmVQb3B1cCgpIj7EkMOzbmc8L2J1dHRvbj4NCiAgPC9kaXY+DQo8L2Rpdj4NCg0KDQo8c2NyaXB0Pg0KZnVuY3Rpb24gdG9nZ2xlSGVyYkxpc3QoKSB7DQogICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYlByb2NlZHVyZVRhYmxlJyk7DQogICAgaWYgKHRhYmxlLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgew0KICAgICAgICB0YWJsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgcmVuZGVySGVyYkxpc3QoKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICB0YWJsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIH0NCn0NCg0KDQopOw0KfQ0KKTsNCg0KICAgIGlmIChoZXJicy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49IjUiPjxjZW50ZXI+S2jDtG5nIGPDsyBk4buvIGxp4buHdSBz4bqvYyB0aHXhu5FjIHRoYW5nPC9jZW50ZXI+PC90ZD5gOw0KICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChyb3cpOw0KICAgIH0NCn0NCjwvc2NyaXB0Pg0KDQoNCjxzY3JpcHQ+DQpmdW5jdGlvbiB0b2dnbGVIZXJiTGlzdCgpIHsNCiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiUHJvY2VkdXJlVGFibGUnKTsNCiAgICBpZiAodGFibGUuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICByZW5kZXJIZXJiTGlzdCgpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHRhYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgfQ0KfQ0KPC9zY3JpcHQ+DQoNCg0KDQoNCg0KDQoNCg0KPC9odG1sPg0KPHNjcmlwdD4NCmZ1bmN0aW9uIHJlbmRlckhlcmJMaXN0KCkgew0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJUYWJsZUJvZHknKTsNCiAgICB0Ym9keS5pbm5lckhUTUwgPSAnJzsNCg0KICAgIGNvbnN0IGhlcmJzID0gd2luZG93LmFsbEhlcmJQcm9jZWR1cmVzIHx8IFtdOw0KICAgIGNvbnN0IGRhdGVGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYkRhdGVGaWx0ZXInKTsNCiAgICBjb25zdCBkb2N0b3JGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYkRvY3RvckZpbHRlcicpOw0KDQogICAgaWYgKCFkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQpIHsNCiAgICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaCA9PiBoLmRhdGUpKV0uc29ydCgoYSwgYikgPT4gew0KICAgICAgICAgICAgY29uc3QgW2RhLCBtYSwgeWFdID0gYS5zcGxpdCgnLycpLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgY29uc3QgW2RiLCBtYiwgeWJdID0gYi5zcGxpdCgnLycpLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHlhLCBtYSAtIDEsIGRhKSAtIG5ldyBEYXRlKHliLCBtYiAtIDEsIGRiKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgY29uc3QgdW5pcXVlRG9jdG9ycyA9IFsuLi5uZXcgU2V0KGhlcmJzLm1hcChoID0+IGguZG9jdG9yIHx8ICdLaMO0bmcgY8OzJykpXS5zb3J0KCk7DQoNCiAgICAgICAgZGF0ZUZpbHRlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjPC9vcHRpb24+JyArDQogICAgICAgICAgICB1bmlxdWVEYXRlcy5tYXAoZCA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtkfSI+JHtkfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KDQogICAgICAgIGRvY3RvckZpbHRlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGLDoWMgc8SpPC9vcHRpb24+JyArDQogICAgICAgICAgICB1bmlxdWVEb2N0b3JzLm1hcChkID0+IGA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQoNCiAgICAgICAgZGF0ZUZpbHRlci5kYXRhc2V0LmluaXRpYWxpemVkID0gInRydWUiOw0KICAgICAgICBkYXRlRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJlbmRlckhlcmJMaXN0KTsNCiAgICAgICAgZG9jdG9yRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHJlbmRlckhlcmJMaXN0KTsNCiAgICB9DQoNCiAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBkYXRlRmlsdGVyLnZhbHVlOw0KICAgIGNvbnN0IHNlbGVjdGVkRG9jdG9yID0gZG9jdG9yRmlsdGVyLnZhbHVlOw0KDQogICAgY29uc3QgZmlsdGVyZWRIZXJicyA9IGhlcmJzLmZpbHRlcihwID0+DQogICAgICAgIChzZWxlY3RlZERhdGUgPT09ICdhbGwnIHx8IHAuZGF0ZSA9PT0gc2VsZWN0ZWREYXRlKSAmJg0KICAgICAgICAoc2VsZWN0ZWREb2N0b3IgPT09ICdhbGwnIHx8IHAuZG9jdG9yID09PSBzZWxlY3RlZERvY3RvcikNCiAgICApOw0KDQogICAgaWYgKGZpbHRlcmVkSGVyYnMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCJoZXJiLXJvdyIpOw0KICAgICAgICByb3cuaW5uZXJIVE1MID0gYDx0ZCBjb2xzcGFuPSI1Ij48Y2VudGVyPktow7RuZyBjw7MgZOG7ryBsaeG7h3Ugc+G6r2MgdGh14buRYyB0aGFuZzwvY2VudGVyPjwvdGQ+YDsNCiAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGZpbHRlcmVkSGVyYnMuZm9yRWFjaChwID0+IHsNCiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgDQogICAgICAgICAgICA8dGQ+JHtwLnBhdGllbnROYW1lfTwvdGQ+DQogICAgICAgICAgICA8dGQ+JHtwLnByb2NlZHVyZX08L3RkPg0KICAgICAgICAgICAgPHRkPiR7cC5kYXRlfTwvdGQ+DQogICAgICAgICAgICA8dGQ+JHtwLmRpc3BsYXlTdGFydH0g4oaSICR7cC5kaXNwbGF5RW5kfTwvdGQ+DQogICAgICAgICAgICA8dGQ+JHtwLm9wZXJhdG9yLnJlcGxhY2UoLywvZywgJycpfTwvdGQ+DQogICAgICAgIGA7DQogICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvdyk7DQogICAgfSk7DQp9DQoNCmZ1bmN0aW9uIHRvZ2dsZUhlcmJMaXN0KCkgew0KICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJQcm9jZWR1cmVUYWJsZScpOw0KICAgIGlmICh0YWJsZS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICAgIHJlbmRlckhlcmJMaXN0KCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgdGFibGUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9DQp9DQo8L3NjcmlwdD4NCg0KPHNjcmlwdD4NCmZ1bmN0aW9uIHJlbmRlckhlcmJMaXN0KCkgew0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJUYWJsZUJvZHknKTsNCiAgICB0Ym9keS5pbm5lckhUTUwgPSAnJzsNCg0KICAgIGNvbnN0IGhlcmJzID0gd2luZG93LmFsbEhlcmJQcm9jZWR1cmVzIHx8IFtdOw0KICAgIGNvbnN0IGRhdGVGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYkRhdGVGaWx0ZXInKTsNCiAgICBjb25zdCBkb2N0b3JGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYkRvY3RvckZpbHRlcicpOw0KDQogICAgaWYgKCFkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQpIHsNCiAgICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaCA9PiBoLmRhdGUpKV0uc29ydCgoYSwgYikgPT4gew0KICAgICAgICAgICAgY29uc3QgW2RhLCBtYSwgeWFdID0gYS5zcGxpdCgnLycpLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgY29uc3QgW2RiLCBtYiwgeWJdID0gYi5zcGxpdCgnLycpLm1hcChOdW1iZXIpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHlhLCBtYSAtIDEsIGRhKSAtIG5ldyBEYXRlKHliLCBtYiAtIDEsIGRiKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgY29uc3QgdW5pcXVlRG9jdG9ycyA9IFsuLi5uZXcgU2V0KGhlcmJzLm1hcChoID0+IGguZG9jdG9yIHx8ICdLaMO0bmcgY8OzJykpXS5zb3J0KCk7DQoNCiAgICAgICAgZGF0ZUZpbHRlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGPDoWMgbmfDoHk8L29wdGlvbj4nICsNCiAgICAgICAgICAgIHVuaXF1ZURhdGVzLm1hcChkID0+IGA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQoNCiAgICAgICAgZG9jdG9yRmlsdGVyLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJhbGwiPlThuqV0IGPhuqMgYsOhYyBzxKk8L29wdGlvbj4nICsNCiAgICAgICAgICAgIHVuaXF1ZURvY3RvcnMubWFwKGQgPT4gYDxvcHRpb24gdmFsdWU9IiR7ZH0iPiR7ZH08L29wdGlvbj5gKS5qb2luKCcnKTsNCg0KICAgICAgICBkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQgPSAidHJ1ZSI7DQogICAgICAgIGRhdGVGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmVuZGVySGVyYkxpc3QpOw0KICAgICAgICBkb2N0b3JGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcmVuZGVySGVyYkxpc3QpOw0KICAgIH0NCg0KICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IGRhdGVGaWx0ZXIudmFsdWU7DQogICAgY29uc3Qgc2VsZWN0ZWREb2N0b3IgPSBkb2N0b3JGaWx0ZXIudmFsdWU7DQoNCiAgICBjb25zdCBmaWx0ZXJlZEhlcmJzID0gaGVyYnMuZmlsdGVyKHAgPT4NCiAgICAgICAgKHNlbGVjdGVkRGF0ZSA9PT0gJ2FsbCcgfHwgcC5kYXRlID09PSBzZWxlY3RlZERhdGUpICYmDQogICAgICAgIChzZWxlY3RlZERvY3RvciA9PT0gJ2FsbCcgfHwgcC5kb2N0b3IgPT09IHNlbGVjdGVkRG9jdG9yKQ0KICAgICk7DQoNCiAgICBpZiAoZmlsdGVyZWRIZXJicy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoImhlcmItcm93Iik7DQogICAgICAgIHJvdy5pbm5lckhUTUwgPSBgPHRkIGNvbHNwYW49IjUiPjxjZW50ZXI+S2jDtG5nIGPDsyBk4buvIGxp4buHdSBz4bqvYyB0aHXhu5FjIHRoYW5nPC9jZW50ZXI+PC90ZD5gOw0KICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZChyb3cpOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgZmlsdGVyZWRIZXJicy5mb3JFYWNoKHAgPT4gew0KICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgICByb3cuY2xhc3NMaXN0LmFkZCgiaGVyYi1yb3ciKTsNCiAgICAgICAgcm93LmlubmVySFRNTCA9IGANCiAgICAgICAgICAgIDx0ZD4ke3AucGF0aWVudE5hbWV9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke3AucHJvY2VkdXJlfTwvdGQ+DQogICAgICAgICAgICA8dGQ+JHtwLmRhdGV9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke3AuZGlzcGxheVN0YXJ0fSDihpIgJHtwLmRpc3BsYXlFbmR9PC90ZD4NCiAgICAgICAgICAgIDx0ZD4ke3Aub3BlcmF0b3IucmVwbGFjZSgvLC9nLCAnJyl9PC90ZD4NCiAgICAgICAgYDsNCiAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTsNCiAgICB9KTsNCn0NCg0KZnVuY3Rpb24gdG9nZ2xlSGVyYkxpc3QoKSB7DQogICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYlByb2NlZHVyZVRhYmxlJyk7DQogICAgaWYgKHRhYmxlLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykgew0KICAgICAgICB0YWJsZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgcmVuZGVySGVyYkxpc3QoKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICB0YWJsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIH0NCn0NCjwvc2NyaXB0Pg0KDQoNCg0KPHNjcmlwdD4NCihmdW5jdGlvbigpew0KICAvLyAtLS0gdGnhu4duIMOtY2ggY2h14bqpbiBob8OhIHTDqm4gLS0tDQogIGZ1bmN0aW9uIGNsZWFuRGlzcGxheShuYW1lKXsNCiAgICByZXR1cm4gKG5hbWV8fCcnKQ0KICAgICAgLnRvU3RyaW5nKCkNCiAgICAgIC5yZXBsYWNlKC9bLO+8jF0rXHMqJC8sJycpICAgLy8gYuG7jyBk4bqldSBwaOG6qXkvY3Xhu5FpIGTDsm5nDQogICAgICAucmVwbGFjZSgvXHMrL2csJyAnKSAgICAgICAgLy8gZ+G7mXAga2hv4bqjbmcgdHLhuq9uZw0KICAgICAgLnRyaW0oKTsNCiAgfQ0KICBmdW5jdGlvbiBub3JtKG5hbWUpew0KICAgIHJldHVybiBjbGVhbkRpc3BsYXkobmFtZSkudG9Mb3dlckNhc2UoKTsNCiAgfQ0KDQogIC8vIFTDrW5oIMSRYSBz4buRIGNobyB04burbmcgbmfDoHkNCiAgZnVuY3Rpb24gY29tcHV0ZU1ham9yaXR5QnlEYXRlKHJvd3Mpew0KICAgIGNvbnN0IG1hcCA9IHt9Ow0KICAgIHJvd3MuZm9yRWFjaChyPT57DQogICAgICBjb25zdCBkID0gci5kYXRlOw0KICAgICAgY29uc3QgbiA9IG5vcm0oci5vcGVyYXRvcik7DQogICAgICBpZighbiB8fCBuID09PSAna2jDtG5nIGPDsycpIHJldHVybjsNCiAgICAgIGlmKCFtYXBbZF0pIG1hcFtkXSA9IHt9Ow0KICAgICAgbWFwW2RdW25dID0gKG1hcFtkXVtuXXx8MCkrMTsNCiAgICB9KTsNCiAgICBjb25zdCBvdXQgPSB7fTsNCiAgICBPYmplY3Qua2V5cyhtYXApLmZvckVhY2goZD0+ew0KICAgICAgY29uc3QgYXJyID0gT2JqZWN0LmVudHJpZXMobWFwW2RdKS5zb3J0KChhLGIpPT5iWzFdLWFbMV0pOw0KICAgICAgY29uc3QgdG9wID0gYXJyWzBdIHx8IFtudWxsLDBdOw0KICAgICAgY29uc3Qgc2Vjb25kID0gYXJyWzFdIHx8IFtudWxsLDBdOw0KICAgICAgb3V0W2RdID0gew0KICAgICAgICB0b3BOb3JtOiB0b3BbMF0sDQogICAgICAgIHRvcENvdW50OiB0b3BbMV0sDQogICAgICAgIHNlY29uZENvdW50OiBzZWNvbmRbMV0NCiAgICAgIH07DQogICAgfSk7DQogICAgcmV0dXJuIG91dDsNCiAgfQ0KDQogIC8vID09PSBIw4BNIEdISSDEkMOIID09PQ0KICB3aW5kb3cucmVuZGVySGVyYkxpc3QgPSBmdW5jdGlvbigpew0KICAgIGNvbnN0IGhlcmJzID0gKHdpbmRvdy5hbGxIZXJiUHJvY2VkdXJlc3x8W10pLm1hcChoPT4oew0KICAgICAgLi4uaCwNCiAgICAgIG9wQ2xlYW46IGNsZWFuRGlzcGxheShoLm9wZXJhdG9yKSwNCiAgICAgIG9wTm9ybTogIG5vcm0oaC5vcGVyYXRvcikNCiAgICB9KSk7DQoNCiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiVGFibGVCb2R5Jyk7DQogICAgY29uc3QgZGF0ZUZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiRGF0ZUZpbHRlcicpOw0KICAgIGNvbnN0IGRvY3RvckZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiRG9jdG9yRmlsdGVyJyk7DQogICAgdGJvZHkuaW5uZXJIVE1MID0gJyc7DQoNCiAgICAvLyBLaOG7n2kgdOG6oW8gZHJvcGRvd24gMSBs4bqnbg0KICAgIGlmKCFkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQpew0KICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaD0+aC5kYXRlKSldLnNvcnQoKGEsYik9PnsNCiAgICAgICAgY29uc3QgW2RhLG1hLHlhXSA9IGEuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgY29uc3QgW2RiLG1iLHliXSA9IGIuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHlhLG1hLTEsZGEpIC0gbmV3IERhdGUoeWIsbWItMSxkYik7DQogICAgICB9KTsNCiAgICAgIGNvbnN0IHVuaXF1ZURvY3RvcnMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaD0+aC5kb2N0b3J8fCdLaMO0bmcgY8OzJykpXS5zb3J0KCk7DQoNCiAgICAgIGRhdGVGaWx0ZXIuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6ozwvb3B0aW9uPicgKw0KICAgICAgICB1bmlxdWVEYXRlcy5tYXAoZD0+YDxvcHRpb24gdmFsdWU9IiR7ZH0iPiR7ZH08L29wdGlvbj5gKS5qb2luKCcnKTsNCiAgICAgIGRvY3RvckZpbHRlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iYWxsIj5U4bqldCBj4bqjIGLDoWMgc8SpPC9vcHRpb24+JyArDQogICAgICAgIHVuaXF1ZURvY3RvcnMubWFwKGQ9PmA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQoNCiAgICAgIGRhdGVGaWx0ZXIuZGF0YXNldC5pbml0aWFsaXplZCA9ICd0cnVlJzsNCiAgICAgIGRhdGVGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgd2luZG93LnJlbmRlckhlcmJMaXN0KTsNCiAgICAgIGRvY3RvckZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB3aW5kb3cucmVuZGVySGVyYkxpc3QpOw0KICAgIH0NCg0KICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IGRhdGVGaWx0ZXIudmFsdWU7DQogICAgY29uc3Qgc2VsZWN0ZWREb2N0b3IgPSBkb2N0b3JGaWx0ZXIudmFsdWU7DQoNCiAgICBjb25zdCBmaWx0ZXJlZCA9IGhlcmJzLmZpbHRlcihwID0+DQogICAgICAoc2VsZWN0ZWREYXRlID09PSAnYWxsJyB8fCBwLmRhdGUgPT09IHNlbGVjdGVkRGF0ZSkgJiYNCiAgICAgIChzZWxlY3RlZERvY3RvciA9PT0gJ2FsbCcgfHwgcC5kb2N0b3IgPT09IHNlbGVjdGVkRG9jdG9yKQ0KICAgICk7DQoNCiAgICBpZihmaWx0ZXJlZC5sZW5ndGggPT09IDApew0KICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgdHIuY2xhc3NOYW1lID0gJ2hlcmItcm93JzsNCiAgICAgIHRyLmlubmVySFRNTCA9ICc8dGQgY29sc3Bhbj0iNSI+PGNlbnRlcj5LaMO0bmcgY8OzIGThu68gbGnhu4d1IHPhuq9jIHRodeG7kWMgdGhhbmc8L2NlbnRlcj48L3RkPic7DQogICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7DQogICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLy8gxJBhIHPhu5EgdMOtbmggdGhlbyAqdG/DoG4gYuG7mSBk4buvIGxp4buHdSosIGtow7RuZyBjaOG7iSBmaWx0ZXJlZA0KICAgIGNvbnN0IG1ham9yaXR5ID0gY29tcHV0ZU1ham9yaXR5QnlEYXRlKGhlcmJzKTsNCg0KICAgIGZpbHRlcmVkLmZvckVhY2gocD0+ew0KICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOw0KICAgICAgdHIuY2xhc3NOYW1lID0gJ2hlcmItcm93JzsNCiAgICAgIGNvbnN0IG0gPSBtYWpvcml0eVtwLmRhdGVdOw0KICAgICAgY29uc3QgaGFzTWFqb3JpdHkgPSBtICYmIG0udG9wTm9ybSAmJiBtLnRvcENvdW50ID4gbS5zZWNvbmRDb3VudDsNCiAgICAgIGlmKGhhc01ham9yaXR5ICYmIHAub3BOb3JtICE9PSBtLnRvcE5vcm0pew0KICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKCdoZXJiLW91dGxpZXInKTsNCiAgICAgIH0NCiAgICAgIHRyLmlubmVySFRNTCA9IGANCiAgICAgICAgPHRkPiR7cC5wYXRpZW50TmFtZX08L3RkPg0KICAgICAgICA8dGQ+JHtwLnByb2NlZHVyZX08L3RkPg0KICAgICAgICA8dGQ+JHtwLmRhdGV9PC90ZD4NCiAgICAgICAgPHRkPiR7cC5kaXNwbGF5U3RhcnR9ICZyYXJyOyAke3AuZGlzcGxheUVuZH08L3RkPg0KICAgICAgICA8dGQ+JHtwLm9wQ2xlYW59PC90ZD4NCiAgICAgIGA7DQogICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7DQogICAgfSk7DQogIH07DQp9KSgpOw0KDQoNCg0KDQooZnVuY3Rpb24oKXsNCiAgLyogPT09PSBUSeG7hk4gw41DSCBDSFXhuqhOIEhPw4EgVMOKTiA9PT09ICovDQogIGZ1bmN0aW9uIGNsZWFuRGlzcGxheShuYW1lKXsNCiAgICByZXR1cm4gKG5hbWV8fCcnKQ0KICAgICAgLnRvU3RyaW5nKCkNCiAgICAgIC5yZXBsYWNlKC9bLO+8jF0rXHMqJC8sJycpICAgLy8gYuG7jyBk4bqldSBwaOG6qXkvY3Xhu5FpDQogICAgICAucmVwbGFjZSgvXHMrL2csJyAnKQ0KICAgICAgLnRyaW0oKTsNCiAgfQ0KICBmdW5jdGlvbiBub3JtKG5hbWUpew0KICAgIHJldHVybiBjbGVhbkRpc3BsYXkobmFtZSkudG9Mb3dlckNhc2UoKTsNCiAgfQ0KDQogIC8qID09PT0gVMONTkggxJBBIFPhu5AgVEhFTyBOR8OAWSA9PT09ICovDQogIGZ1bmN0aW9uIGNvbXB1dGVNYWpvcml0eUJ5RGF0ZShyb3dzKXsNCiAgICBjb25zdCBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpOw0KICAgIHJvd3MuZm9yRWFjaChyPT57DQogICAgICBjb25zdCBkID0gci5kYXRlOw0KICAgICAgY29uc3QgbiA9IG5vcm0oci5vcGVyYXRvcik7DQogICAgICBpZighbiB8fCBuID09PSAna2jDtG5nIGPDsycpIHJldHVybjsNCiAgICAgIChtYXBbZF18fChtYXBbZF09e30pKVtuXSA9IChtYXBbZF1bbl18fDApKzE7DQogICAgfSk7DQogICAgY29uc3Qgb3V0ID0ge307DQogICAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGQ9PnsNCiAgICAgIGNvbnN0IGFyciA9IE9iamVjdC5lbnRyaWVzKG1hcFtkXSkuc29ydCgoYSxiKT0+YlsxXS1hWzFdKTsNCiAgICAgIGNvbnN0IHRvcCA9IGFyclswXSB8fCBbbnVsbCwwXTsNCiAgICAgIGNvbnN0IHNlY29uZCA9IGFyclsxXSB8fCBbbnVsbCwwXTsNCiAgICAgIG91dFtkXSA9IHsgdG9wTm9ybTp0b3BbMF0sIHRvcENvdW50OnRvcFsxXSwgc2Vjb25kQ291bnQ6c2Vjb25kWzFdIH07DQogICAgfSk7DQogICAgcmV0dXJuIG91dDsNCiAgfQ0KDQogIC8qID09PT0gVUkgUEjhu6Q6IFTDk00gVOG6rlQgKyBQT1BVUCA9PT09ICovDQogIGZ1bmN0aW9uIGVuc3VyZU91dGxpZXJVSSgpew0KICAgIGNvbnN0IHN1bW1hcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJTdW1tYXJ5Jyk7DQogICAgY29uc3QgbW9kYWwgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiT3V0bGllck1vZGFsJyk7DQogICAgaWYoIXN1bW1hcnkpIGNvbnNvbGUud2FybignVGhp4bq/dSAjaGVyYk91dGxpZXJTdW1tYXJ5IHRyb25nIEhUTUwhJyk7DQogICAgaWYoIW1vZGFsKSAgIGNvbnNvbGUud2FybignVGhp4bq/dSAjaGVyYk91dGxpZXJNb2RhbCB0cm9uZyBIVE1MIScpOw0KICAgIC8vIMSQw7NuZyBwb3B1cA0KICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiT3V0bGllckNsb3NlQnRuJyk7DQogICAgY29uc3QgYmFja2Ryb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJCYWNrZHJvcCcpOw0KICAgIGlmKGJ0bikgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9Pm1vZGFsLnN0eWxlLmRpc3BsYXk9J25vbmUnKTsNCiAgICBpZihiYWNrZHJvcCkgYmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+bW9kYWwuc3R5bGUuZGlzcGxheT0nbm9uZScpOw0KICB9DQogIGVuc3VyZU91dGxpZXJVSSgpOw0KDQogIC8qID09PT0gR0hJIMSQw4ggSMOATSBSRU5ERVIgPT09PSAqLw0KICB3aW5kb3cucmVuZGVySGVyYkxpc3QgPSBmdW5jdGlvbigpew0KICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJUYWJsZUJvZHknKTsNCiAgICBjb25zdCBkYXRlRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJEYXRlRmlsdGVyJyk7DQogICAgY29uc3QgZG9jdG9yRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJEb2N0b3JGaWx0ZXInKTsNCiAgICBjb25zdCBzdW1tYXJ5RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJPdXRsaWVyU3VtbWFyeScpOw0KICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJPdXRsaWVyTW9kYWwnKTsNCiAgICBjb25zdCBtb2RhbEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJNb2RhbEJvZHknKTsNCiAgICBjb25zdCBtb2RhbEluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVyYk91dGxpZXJNb2RhbEluZm8nKTsNCg0KICAgIHRib2R5LmlubmVySFRNTCA9ICcnOw0KDQogICAgY29uc3QgaGVyYnNSYXcgPSB3aW5kb3cuYWxsSGVyYlByb2NlZHVyZXMgfHwgW107DQogICAgY29uc3QgaGVyYnMgPSBoZXJic1Jhdy5tYXAoaD0+KHsNCiAgICAgIC4uLmgsDQogICAgICBvcENsZWFuOiBjbGVhbkRpc3BsYXkoaC5vcGVyYXRvciksDQogICAgICBvcE5vcm06IG5vcm0oaC5vcGVyYXRvcikNCiAgICB9KSk7DQoNCiAgICAvKiBLaOG7n2kgdOG6oW8gZHJvcGRvd24gMSBs4bqnbiAqLw0KICAgIGlmKCFkYXRlRmlsdGVyLmRhdGFzZXQuaW5pdGlhbGl6ZWQpew0KICAgICAgY29uc3QgdW5pcXVlRGF0ZXMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaD0+aC5kYXRlKSldLnNvcnQoKGEsYik9PnsNCiAgICAgICAgY29uc3QgW2RhLG1hLHlhXSA9IGEuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgY29uc3QgW2RiLG1iLHliXSA9IGIuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTsNCiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHlhLG1hLTEsZGEpIC0gbmV3IERhdGUoeWIsbWItMSxkYik7DQogICAgICB9KTsNCiAgICAgIGNvbnN0IHVuaXF1ZURvY3RvcnMgPSBbLi4ubmV3IFNldChoZXJicy5tYXAoaD0+aC5kb2N0b3J8fCdLaMO0bmcgY8OzJykpXS5zb3J0KCk7DQogICAgICBkYXRlRmlsdGVyLmlubmVySFRNTCA9DQogICAgICAgICc8b3B0aW9uIHZhbHVlPSJhbGwiPlThuqV0IGPhuqM8L29wdGlvbj4nICsNCiAgICAgICAgdW5pcXVlRGF0ZXMubWFwKGQ9PmA8b3B0aW9uIHZhbHVlPSIke2R9Ij4ke2R9PC9vcHRpb24+YCkuam9pbignJyk7DQogICAgICBkb2N0b3JGaWx0ZXIuaW5uZXJIVE1MID0NCiAgICAgICAgJzxvcHRpb24gdmFsdWU9ImFsbCI+VOG6pXQgY+G6oyBiw6FjIHPEqTwvb3B0aW9uPicgKw0KICAgICAgICB1bmlxdWVEb2N0b3JzLm1hcChkPT5gPG9wdGlvbiB2YWx1ZT0iJHtkfSI+JHtkfTwvb3B0aW9uPmApLmpvaW4oJycpOw0KICAgICAgZGF0ZUZpbHRlci5kYXRhc2V0LmluaXRpYWxpemVkID0gJ3RydWUnOw0KICAgICAgZGF0ZUZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB3aW5kb3cucmVuZGVySGVyYkxpc3QpOw0KICAgICAgZG9jdG9yRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHdpbmRvdy5yZW5kZXJIZXJiTGlzdCk7DQogICAgfQ0KDQogICAgY29uc3Qgc2VsZWN0ZWREYXRlID0gZGF0ZUZpbHRlci52YWx1ZTsNCiAgICBjb25zdCBzZWxlY3RlZERvY3RvciA9IGRvY3RvckZpbHRlci52YWx1ZTsNCg0KICAgIGNvbnN0IGZpbHRlcmVkID0gaGVyYnMuZmlsdGVyKHAgPT4NCiAgICAgIChzZWxlY3RlZERhdGUgPT09ICdhbGwnIHx8IHAuZGF0ZSA9PT0gc2VsZWN0ZWREYXRlKSAmJg0KICAgICAgKHNlbGVjdGVkRG9jdG9yID09PSAnYWxsJyB8fCBwLmRvY3RvciA9PT0gc2VsZWN0ZWREb2N0b3IpDQogICAgKTsNCg0KICAgIGlmKGZpbHRlcmVkLmxlbmd0aCA9PT0gMCl7DQogICAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7DQogICAgICB0ci5jbGFzc05hbWUgPSAnaGVyYi1yb3cnOw0KICAgICAgdHIuaW5uZXJIVE1MID0gJzx0ZCBjb2xzcGFuPSI1Ij48Y2VudGVyPktow7RuZyBjw7MgZOG7ryBsaeG7h3Ugc+G6r2MgdGh14buRYyB0aGFuZzwvY2VudGVyPjwvdGQ+JzsNCiAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTsNCiAgICAgIGlmKHN1bW1hcnlEaXYpIHN1bW1hcnlEaXYuc3R5bGUuZGlzcGxheT0nbm9uZSc7DQogICAgICByZXR1cm47DQogICAgfQ0KDQogICAgLyogxJBhIHPhu5EgdMOtbmggdHLDqm4gVE/DgE4gQuG7mCBk4buvIGxp4buHdSAoxJHDum5nIHnDqnUgY+G6p3U6IG7hur91IHRyb25nIG5nw6B5IGPDsyBuZ8aw4budaSBraMOhYyDEkWEgc+G7kSkuICovDQogICAgY29uc3QgbWFqb3JpdHkgPSBjb21wdXRlTWFqb3JpdHlCeURhdGUoaGVyYnMpOw0KDQogICAgY29uc3Qgb3V0bGllcnNJblZpZXcgPSBbXTsNCiAgICBmaWx0ZXJlZC5mb3JFYWNoKHA9PnsNCiAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgIHRyLmNsYXNzTmFtZSA9ICdoZXJiLXJvdyc7DQogICAgICBjb25zdCBtID0gbWFqb3JpdHlbcC5kYXRlXTsNCiAgICAgIGNvbnN0IGhhc01ham9yaXR5ID0gbSAmJiBtLnRvcE5vcm0gJiYgbS50b3BDb3VudCA+IG0uc2Vjb25kQ291bnQ7DQogICAgICBpZihoYXNNYWpvcml0eSAmJiBwLm9wTm9ybSAhPT0gbS50b3BOb3JtKXsNCiAgICAgICAgdHIuY2xhc3NMaXN0LmFkZCgnaGVyYi1vdXRsaWVyJyk7DQogICAgICAgIG91dGxpZXJzSW5WaWV3LnB1c2gocCk7DQogICAgICB9DQogICAgICB0ci5pbm5lckhUTUwgPSBgDQogICAgICAgIDx0ZD4ke3AucGF0aWVudE5hbWV9PC90ZD4NCiAgICAgICAgPHRkPiR7cC5wcm9jZWR1cmV9PC90ZD4NCiAgICAgICAgPHRkPiR7cC5kYXRlfTwvdGQ+DQogICAgICAgIDx0ZD4ke3AuZGlzcGxheVN0YXJ0fSAmcmFycjsgJHtwLmRpc3BsYXlFbmR9PC90ZD4NCiAgICAgICAgPHRkPiR7cC5vcENsZWFufTwvdGQ+DQogICAgICBgOw0KICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpOw0KICAgIH0pOw0KDQogICAgLyogQ+G6rXAgbmjhuq10IHTDs20gdOG6r3QgKyBjbGljayBt4bufIHBvcHVwICovDQogICAgaWYoc3VtbWFyeURpdil7DQogICAgICBpZihvdXRsaWVyc0luVmlldy5sZW5ndGgpew0KICAgICAgICBzdW1tYXJ5RGl2LnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsNCiAgICAgICAgc3VtbWFyeURpdi5pbm5lckhUTUwgPQ0KICAgICAgICAgIGA8YSBocmVmPSIjIiBpZD0iaGVyYk91dGxpZXJDb3VudExpbmsiPkPDsyAke291dGxpZXJzSW5WaWV3Lmxlbmd0aH0gY2EgY8OzIHbhuqVuIMSR4buBIHRyb25nIGRhbmggc8OhY2ggbsOgeS48L2E+YDsNCiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZXJiT3V0bGllckNvdW50TGluaycpOw0KICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpew0KICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgLy8gcG9wdWxhdGUgbW9kYWwNCiAgICAgICAgICBpZihtb2RhbEJvZHkpew0KICAgICAgICAgICAgbW9kYWxCb2R5LmlubmVySFRNTCA9ICcnOw0KICAgICAgICAgICAgb3V0bGllcnNJblZpZXcuZm9yRWFjaChwPT57DQogICAgICAgICAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsNCiAgICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgIDx0ZD4ke3AucGF0aWVudE5hbWV9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtwLnByb2NlZHVyZX08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke3AuZGF0ZX08L3RkPg0KICAgICAgICAgICAgICAgIDx0ZD4ke3AuZGlzcGxheVN0YXJ0fSAmcmFycjsgJHtwLmRpc3BsYXlFbmR9PC90ZD4NCiAgICAgICAgICAgICAgICA8dGQ+JHtwLm9wQ2xlYW59PC90ZD4NCiAgICAgICAgICAgICAgYDsNCiAgICAgICAgICAgICAgbW9kYWxCb2R5LmFwcGVuZENoaWxkKHRyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihtb2RhbEluZm8pew0KICAgICAgICAgICAgLy8gTuG6v3UgxJFhbmcgbOG7jWMgdGhlbyBuZ8OgeSBj4bulIHRo4buDIC0+IGdoaSBjaMO6OyBu4bq/dSBhbGwgLT4gZ2hpICJuaGnhu4F1IG5nw6B5Ig0KICAgICAgICAgICAgY29uc3Qgbm90ZURhdGUgPSAoc2VsZWN0ZWREYXRlPT09J2FsbCcpID8gJ25oaeG7gXUgbmfDoHknIDogc2VsZWN0ZWREYXRlOw0KICAgICAgICAgICAgbW9kYWxJbmZvLnRleHRDb250ZW50ID0gYFThu5VuZyAke291dGxpZXJzSW5WaWV3Lmxlbmd0aH0gY2Ega2jDoWMgxJFhIHPhu5EgKCR7bm90ZURhdGV9KS5gOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihtb2RhbCkgbW9kYWwuc3R5bGUuZGlzcGxheT0nYmxvY2snOw0KICAgICAgICB9LCB7b25jZTp0cnVlfSk7IC8vIG3hu5dpIHJlbmRlciBn4bqvbiBt4bubaQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc3VtbWFyeURpdi5zdHlsZS5kaXNwbGF5PSdub25lJzsNCiAgICAgICAgc3VtbWFyeURpdi5pbm5lckhUTUw9Jyc7DQogICAgICB9DQogICAgfQ0KICB9Ow0KDQogIC8qIEF1dG8tcnVuIG7hur91IGLhuqNuZyDEkWFuZyBt4bufICovDQogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKT0+ew0KICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hlcmJQcm9jZWR1cmVUYWJsZScpOw0KICAgIGlmKHRhYmxlICYmIHRhYmxlLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJyl7DQogICAgICB3aW5kb3cucmVuZGVySGVyYkxpc3QoKTsNCiAgICB9DQogIH0pOw0KfSkoKTsNCg0KDQoNCjwvc2NyaXB0Pg0KPHNjcmlwdD4NCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uICgpIHsNCiAgICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUlucHV0Jyk7DQogICAgY29uc3QgYW5hbHl6ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbmFseXplQnRuJyk7DQogICAgaWYgKGZpbGVJbnB1dCAmJiBhbmFseXplQnRuKSB7DQogICAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBhbmFseXplQnRuLmNsaWNrKCk7DQogICAgICB9KTsNCiAgICB9DQogIH0pOw0KPC9zY3JpcHQ+DQoNCg0KPCEtLSBUSEVNRSBQSUNLRVIgU0NSSVBUIC0tPg0KPHNjcmlwdD4NCihmdW5jdGlvbigpew0KICBjb25zdCBUSEVNRV9LRVkgPSAndWlBY2NlbnRUaGVtZSc7DQogIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5Ow0KICBjb25zdCBwaWNrZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWVQaWNrZXInKTsNCiAgaWYoIXBpY2tlcikgcmV0dXJuOw0KICBmdW5jdGlvbiBhcHBseVRoZW1lKHQpew0KICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndGhlbWUtZGVmYXVsdCcsJ3RoZW1lLW9yYW5nZScsJ3RoZW1lLXJlZCcsJ3RoZW1lLWdyZWVuJyk7DQogICAgaWYodCAmJiB0ICE9PSAnZGVmYXVsdCcpew0KICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCd0aGVtZS0nK3QpOw0KICAgIH0gZWxzZSB7DQogICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ3RoZW1lLWRlZmF1bHQnKTsgLy8gZXhwbGljaXQgxJHhu4MgYWN0aXZlIHJpbmcNCiAgICB9DQogICAgcGlja2VyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50aGVtZS1zd2F0Y2gnKS5mb3JFYWNoKGJ0bj0+ew0KICAgICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScsIGJ0bi5kYXRhc2V0LnRoZW1lPT09dCB8fCAodD09PScnICYmIGJ0bi5kYXRhc2V0LnRoZW1lPT09J2RlZmF1bHQnKSk7DQogICAgfSk7DQogICAgdHJ5eyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUSEVNRV9LRVksdHx8J2RlZmF1bHQnKTsgfWNhdGNoKGUpe30NCiAgfQ0KICBjb25zdCBzYXZlZCA9IChmdW5jdGlvbigpe3RyeXtyZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVEhFTUVfS0VZKSB8fCAnZGVmYXVsdCc7fWNhdGNoKGUpe3JldHVybiAnZGVmYXVsdCc7fX0pKCk7DQogIGFwcGx5VGhlbWUoc2F2ZWQpOw0KICBwaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGU9PnsNCiAgICBjb25zdCBidG4gPSBlLnRhcmdldC5jbG9zZXN0KCcudGhlbWUtc3dhdGNoJyk7DQogICAgaWYoIWJ0bikgcmV0dXJuOw0KICAgIGFwcGx5VGhlbWUoYnRuLmRhdGFzZXQudGhlbWUpOw0KICB9KTsNCn0pKCk7DQo8L3NjcmlwdD4NCg0KPHNjcmlwdD4NCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2xkZXJJbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7DQogICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGUudGFyZ2V0LmZpbGVzKS5maWx0ZXIoZiA9PiAvXC4oeGxzeHx4bHN8Y3N2KSQvaS50ZXN0KGYubmFtZSkpOw0KICAgIGNvbnN0IHN0YXR1c0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2FuU3RhdHVzJyk7DQoNCiAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHN0YXR1c0Rpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgY29uc3QgbGF0ZXN0RmlsZSA9IGZpbGVzLnNvcnQoKGEsIGIpID0+IGIubGFzdE1vZGlmaWVkIC0gYS5sYXN0TW9kaWZpZWQpWzBdOw0KICAgIHN0YXR1c0Rpdi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9ImZhcyBmYS1mb2xkZXItb3BlbiI+PC9pPiBGaWxlIG3hu5tpIG5o4bqldDogPGI+JHtsYXRlc3RGaWxlLm5hbWV9PC9iPmA7DQogICAgc3RhdHVzRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgIHN0YXR1c0Rpdi5zdHlsZS5jb2xvciA9ICcjMmMzZTUwJzsNCn0pOw0KPC9zY3JpcHQ+DQoNCg0KPC9ib2R5Pg0KDQo8L2h0bWw+";
  const binary = atob(base64);
  const bytes = new Uint8Array([...binary].map(c => c.charCodeAt(0)));
  const decoded = new TextDecoder("utf-8").decode(bytes);
  document.write(decoded);
</script>


</body>
</html>
